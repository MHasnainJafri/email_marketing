import{r as n,j as e,a as wt}from"./app-DFNoTZa7.js";import{a as L,c as z,b as Zt,B as u,u as ie,S as Xs}from"./button-BUbYegtQ.js";import{X as Jt,c as Qt,u as Ys,R as Zs,a as bt,b as Js,V as Qs,A as ea,P as ta,h as sa,d as aa,e as na,F as ra,D as la,C as ca,f as ia,g as oa,i as da,j as ma}from"./index-CxXtyJHy.js";import{I as ce,P as ne,r as es}from"./index-CUUgjMrx.js";import{D as oe,a as de,b as me,c as he,d as ue,e as xe,f as $e}from"./dialog-CIGaRBas.js";import{L as K}from"./label-BzVW42w4.js";import{L as Q}from"./loader-circle-Bo87Rnl5.js";import{u as It,c as ha,a as fe,b as Z,d as ua,C as xa}from"./index-BGS5ZrTO.js";import{u as pa,C as dt}from"./checkbox-D-uJgLNm.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Mt=L("AlignCenter",ga);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],At=L("AlignLeft",fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Rt=L("AlignRight",ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Dt=L("Bold",ya);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Na=L("Calendar",va);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ct=L("ChevronDown",wa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],ts=L("ChevronUp",ba);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],He=L("CircleAlert",Ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],tt=L("CircleCheckBig",Sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ka=L("Clock",_a);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ss=L("Copy",Ta);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],st=L("Eye",Ea);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qe=L("FileText",Pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],Lt=L("Heading1",Ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Bt=L("Heading2",Ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ra=L("House",Aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ft=L("Image",Da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Ot=L("Italic",La);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],$t=L("Link",Ba);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],Ht=L("ListOrdered",Fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],zt=L("List",Oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ge=L("Mail",$a);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],ze=L("Package",Ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Be=L("Plus",za);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ua=L("Printer",Va);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],qa=L("RefreshCw",Wa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Vt=L("Save",Ka);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],as=L("Search",Ga);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Me=L("Send",Xa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Za=L("SquarePen",Ya);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ns=L("Trash2",Ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Ut=L("Underline",Qa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Fe=L("Upload",en);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],sn=L("UserX",tn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],ut=L("Users",an),Ke=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:z("w-full caption-bottom text-sm",t),...s})}));Ke.displayName="Table";const Ge=n.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:z("[&_tr]:border-b",t),...s}));Ge.displayName="TableHeader";const Xe=n.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:z("[&_tr:last-child]:border-0",t),...s}));Xe.displayName="TableBody";const nn=n.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:z("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));nn.displayName="TableFooter";const we=n.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:z("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));we.displayName="TableRow";const se=n.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:z("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));se.displayName="TableHead";const ae=n.forwardRef(({className:t,...s},a)=>e.jsx("td",{ref:a,className:z("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...s}));ae.displayName="TableCell";const rn=n.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:z("mt-4 text-sm text-muted-foreground",t),...s}));rn.displayName="TableCaption";function ln(t,s=[]){let a=[];function r(h,d){const c=n.createContext(d),o=a.length;a=[...a,d];const g=_=>{var p;const{scope:E,children:I,...C}=_,f=((p=E==null?void 0:E[t])==null?void 0:p[o])||c,j=n.useMemo(()=>C,Object.values(C));return e.jsx(f.Provider,{value:j,children:I})};g.displayName=h+"Provider";function w(_,E){var f;const I=((f=E==null?void 0:E[t])==null?void 0:f[o])||c,C=n.useContext(I);if(C)return C;if(d!==void 0)return d;throw new Error(`\`${_}\` must be used within \`${h}\``)}return[g,w]}const l=()=>{const h=a.map(d=>n.createContext(d));return function(c){const o=(c==null?void 0:c[t])||h;return n.useMemo(()=>({[`__scope${t}`]:{...c,[t]:o}}),[c,o])}};return l.scopeName=t,[r,cn(l,...s)]}function cn(...t){const s=t[0];if(t.length===1)return s;const a=()=>{const r=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(h){const d=r.reduce((c,{useScope:o,scopeName:g})=>{const _=o(h)[`__scope${g}`];return{...c,..._}},{});return n.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return a.scopeName=s.scopeName,a}function Wt(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function on(...t){return s=>{let a=!1;const r=t.map(l=>{const h=Wt(l,s);return!a&&typeof h=="function"&&(a=!0),h});if(a)return()=>{for(let l=0;l<r.length;l++){const h=r[l];typeof h=="function"?h():Wt(t[l],null)}}}}function dn(t){const s=mn(t),a=n.forwardRef((r,l)=>{const{children:h,...d}=r,c=n.Children.toArray(h),o=c.find(un);if(o){const g=o.props.children,w=c.map(_=>_===o?n.Children.count(g)>1?n.Children.only(null):n.isValidElement(g)?g.props.children:null:_);return e.jsx(s,{...d,ref:l,children:n.isValidElement(g)?n.cloneElement(g,void 0,w):null})}return e.jsx(s,{...d,ref:l,children:h})});return a.displayName=`${t}.Slot`,a}function mn(t){const s=n.forwardRef((a,r)=>{const{children:l,...h}=a;if(n.isValidElement(l)){const d=pn(l),c=xn(h,l.props);return l.type!==n.Fragment&&(c.ref=r?on(r,d):d),n.cloneElement(l,c)}return n.Children.count(l)>1?n.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var hn=Symbol("radix.slottable");function un(t){return n.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===hn}function xn(t,s){const a={...s};for(const r in s){const l=t[r],h=s[r];/^on[A-Z]/.test(r)?l&&h?a[r]=(...c)=>{const o=h(...c);return l(...c),o}:l&&(a[r]=l):r==="style"?a[r]={...l,...h}:r==="className"&&(a[r]=[l,h].filter(Boolean).join(" "))}return{...t,...a}}function pn(t){var r,l;let s=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=(l=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:l.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var gn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rs=gn.reduce((t,s)=>{const a=dn(`Primitive.${s}`),r=n.forwardRef((l,h)=>{const{asChild:d,...c}=l,o=d?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...c,ref:h})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),St="Progress",_t=100,[fn,Cr]=ln(St),[jn,yn]=fn(St),ls=n.forwardRef((t,s)=>{const{__scopeProgress:a,value:r=null,max:l,getValueLabel:h=vn,...d}=t;(l||l===0)&&!qt(l)&&console.error(Nn(`${l}`,"Progress"));const c=qt(l)?l:_t;r!==null&&!Kt(r,c)&&console.error(wn(`${r}`,"Progress"));const o=Kt(r,c)?r:null,g=Ye(o)?h(o,c):void 0;return e.jsx(jn,{scope:a,value:o,max:c,children:e.jsx(rs.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":Ye(o)?o:void 0,"aria-valuetext":g,role:"progressbar","data-state":os(o,c),"data-value":o??void 0,"data-max":c,...d,ref:s})})});ls.displayName=St;var cs="ProgressIndicator",is=n.forwardRef((t,s)=>{const{__scopeProgress:a,...r}=t,l=yn(cs,a);return e.jsx(rs.div,{"data-state":os(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...r,ref:s})});is.displayName=cs;function vn(t,s){return`${Math.round(t/s*100)}%`}function os(t,s){return t==null?"indeterminate":t===s?"complete":"loading"}function Ye(t){return typeof t=="number"}function qt(t){return Ye(t)&&!isNaN(t)&&t>0}function Kt(t,s){return Ye(t)&&!isNaN(t)&&t<=s&&t>=0}function Nn(t,s){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${_t}\`.`}function wn(t,s){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${_t} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ds=ls,bn=is;const kt=n.forwardRef(({className:t,value:s,...a},r)=>e.jsx(ds,{ref:r,className:z("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...a,children:e.jsx(bn,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));kt.displayName=ds.displayName;const Cn=Zt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Te=n.forwardRef(({className:t,variant:s,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:z(Cn({variant:s}),t),...a}));Te.displayName="Alert";const Sn=n.forwardRef(({className:t,...s},a)=>e.jsx("h5",{ref:a,className:z("mb-1 font-medium leading-none tracking-tight",t),...s}));Sn.displayName="AlertTitle";const Ee=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:z("text-sm [&_p]:leading-relaxed",t),...s}));Ee.displayName="AlertDescription";const Tt="/api",Y=wt.create({baseURL:Tt,headers:{Accept:"application/json","Content-Type":"application/json"}}),Ie={getContacts:async(t=1,s="")=>{const a=new URLSearchParams({page:t.toString()});return s.trim()&&a.append("search",s.trim()),(await Y.get(`/contacts?${a.toString()}`)).data},getAllContacts:async()=>(await Y.get("/contacts?per_page=1000")).data.data||[],importContacts:async t=>{const s=new FormData;return s.append("file",t),(await wt.post(`${Tt}/contacts/import`,s,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data},createContact:async t=>(await Y.post("/contacts",t)).data,updateContact:async(t,s)=>(await Y.put(`/contacts/${t}`,s)).data,deleteContact:async t=>(await Y.delete(`/contacts/${t}`)).data},De={getBatches:async(t=1,s="")=>{const a=new URLSearchParams({page:t.toString()});return s.trim()&&a.append("search",s.trim()),(await Y.get(`/batches?${a.toString()}`)).data},getBatchDetail:async t=>(await Y.get(`/batches/${t}`)).data,importBatch:async(t,s)=>{const a=new FormData;return a.append("file",t),a.append("batch_name",s),(await wt.post(`${Tt}/contacts/import`,a,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data},getBatchContacts:async t=>(await Y.get(`/batches/${t}/contacts`)).data,deleteBatch:async t=>(await Y.delete(`/batches/${t}`)).data},ms={getTemplates:async(t=1)=>(await Y.get(`/templates?page=${t}`)).data,getAllTemplates:async()=>(await Y.get("/templates?per_page=1000")).data.data||[],createTemplate:async t=>(await Y.post("/templates",t)).data,updateTemplate:async(t,s)=>(await Y.put(`/templates/${t}`,s)).data,deleteTemplate:async t=>(await Y.delete(`/templates/${t}`)).data,getTemplate:async t=>(await Y.get(`/templates/${t}`)).data},xt={getCampaigns:async(t=1)=>(await Y.get(`/campaigns?page=${t}`)).data,createCampaign:async t=>(await Y.post("/send-email",t)).data,sendEmailToBatch:async(t,s)=>(await Y.post(`/send-email/batch/${t}`,s)).data},_n=1,kn=1e6;let mt=0;function Tn(){return mt=(mt+1)%Number.MAX_SAFE_INTEGER,mt.toString()}const ht=new Map,Gt=t=>{if(ht.has(t))return;const s=setTimeout(()=>{ht.delete(t),Oe({type:"REMOVE_TOAST",toastId:t})},kn);ht.set(t,s)},En=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,_n)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?Gt(a):t.toasts.forEach(r=>{Gt(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},Ue=[];let We={toasts:[]};function Oe(t){We=En(We,t),Ue.forEach(s=>{s(We)})}function Pn({...t}){const s=Tn(),a=l=>Oe({type:"UPDATE_TOAST",toast:{...l,id:s}}),r=()=>Oe({type:"DISMISS_TOAST",toastId:s});return Oe({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:l=>{l||r()}}}),{id:s,dismiss:r,update:a}}function Ae(){const[t,s]=n.useState(We);return n.useEffect(()=>(Ue.push(s),()=>{const a=Ue.indexOf(s);a>-1&&Ue.splice(a,1)}),[t]),{...t,toast:Pn,dismiss:a=>Oe({type:"DISMISS_TOAST",toastId:a})}}function In(){const[t,s]=n.useState([]),[a,r]=n.useState(null),[l,h]=n.useState(!0),[d,c]=n.useState(!1),[o,g]=n.useState(null),[w,_]=n.useState(1),[E,I]=n.useState(""),[C,f]=n.useState(""),{toast:j}=Ae(),p=n.useRef();n.useEffect(()=>(p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{f(E)},500),()=>{p.current&&clearTimeout(p.current)}),[E]);const m=n.useCallback(async(v=1,b="")=>{try{h(!0),g(null);const i=await Ie.getContacts(v,b);s(i.data),r({current_page:i.current_page,first_page_url:i.first_page_url,from:i.from,last_page:i.last_page,last_page_url:i.last_page_url,links:i.links,next_page_url:i.next_page_url,path:i.path,per_page:i.per_page,prev_page_url:i.prev_page_url,to:i.to,total:i.total}),_(v)}catch(i){const S=i instanceof Error?i.message:"Failed to fetch contacts";g(S),j({title:"Error",description:S,variant:"destructive"})}finally{h(!1)}},[j]),y=async v=>{try{c(!0);const b=await Ie.importContacts(v);return b.success?(j({title:"Import Successful",description:`Successfully imported ${b.imported_count||0} contacts${b.failed_count?`. ${b.failed_count} failed.`:""}`}),await m(1,C)):j({title:"Import Failed",description:b.message||"Failed to import contacts",variant:"destructive"}),b}catch(b){const i=b instanceof Error?b.message:"Failed to import contacts";throw j({title:"Import Error",description:i,variant:"destructive"}),b}finally{c(!1)}};n.useEffect(()=>{_(1),m(1,C)},[C,m]),n.useEffect(()=>{m(1,"")},[]);const B=async v=>{try{await Ie.createContact(v),j({title:"Success",description:"Contact created successfully"}),await m(w,C)}catch(b){const i=b instanceof Error?b.message:"Failed to create contact";throw j({title:"Error",description:i,variant:"destructive"}),b}},F=async(v,b)=>{try{await Ie.updateContact(v,b),j({title:"Success",description:"Contact updated successfully"}),await m(w,C)}catch(i){const S=i instanceof Error?i.message:"Failed to update contact";throw j({title:"Error",description:S,variant:"destructive"}),i}},A=async v=>{try{await Ie.deleteContact(v),j({title:"Success",description:"Contact deleted successfully"}),await m(w,C)}catch(b){const i=b instanceof Error?b.message:"Failed to delete contact";throw j({title:"Error",description:i,variant:"destructive"}),b}},N=v=>{v>=1&&a&&v<=a.last_page&&m(v,C)};return{contacts:t,pagination:a,loading:l,importing:d,error:o,currentPage:w,searchTerm:E,debouncedSearchTerm:C,fetchContacts:m,importContacts:y,createContact:B,updateContact:F,deleteContact:A,goToPage:N,goToNextPage:()=>{a!=null&&a.next_page_url&&N(w+1)},goToPrevPage:()=>{a!=null&&a.prev_page_url&&N(w-1)},handleSearch:v=>{I(v)},clearSearch:()=>{I(""),f("")},refetch:()=>m(w,C)}}function Mn(){const{contacts:t,pagination:s,loading:a,importing:r,error:l,currentPage:h,searchTerm:d,debouncedSearchTerm:c,importContacts:o,createContact:g,goToPage:w,goToNextPage:_,goToPrevPage:E,handleSearch:I,clearSearch:C,refetch:f}=In(),[j,p]=n.useState(null),[m,y]=n.useState("asc"),[B,F]=n.useState(!1),[A,N]=n.useState(!1),[R,G]=n.useState({name:"",email:""}),[O,V]=n.useState(null),[v,b]=n.useState(null),i=n.useRef(null),{toast:S}=Ae(),x=[...t].sort((P,k)=>{if(!j)return 0;const D=P[j],U=k[j];return D===null&&U===null?0:D===null?m==="asc"?1:-1:U===null||D<U?m==="asc"?-1:1:D>U?m==="asc"?1:-1:0}),M=P=>{j===P?y(k=>k==="asc"?"desc":"asc"):(p(P),y("asc"))},$=P=>{var D,U;const k=(D=P.target.files)==null?void 0:D[0];if(k){const H=(U=k.name.split(".").pop())==null?void 0:U.toLowerCase();H==="csv"||H==="xlsx"||H==="xls"?(V(k),b(null)):(S({title:"Invalid file format",description:"Please upload a CSV or Excel file (.csv, .xlsx, .xls).",variant:"destructive"}),V(null))}},X=async()=>{if(!O){S({title:"No file selected",description:"Please select a file to import.",variant:"destructive"});return}try{const P=await o(O);b(P),P.success&&setTimeout(()=>{N(!1),V(null),b(null)},3e3)}catch{b({success:!1,message:"Failed to import contacts. Please try again."})}},J=()=>{V(null),b(null),i.current&&(i.current.value="")},re=()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Search:"}),e.jsxs("div",{className:"relative",children:[e.jsx(as,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(ce,{placeholder:"Search users...",value:d,onChange:P=>I(P.target.value),className:"pl-8 w-64"}),d&&e.jsx(u,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-6 w-6 p-0",onClick:C,children:e.jsx(Jt,{className:"h-3 w-3"})})]}),c&&e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:['Searching: "',c,'"']})]}),ee=P=>{S({title:`Export ${P}`,description:`User data exported as ${P} format.`})},pe=async()=>{if(!R.name||!R.email){S({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{await g(R),G({name:"",email:""}),F(!1)}catch{}},te=P=>new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),T=({field:P})=>j!==P?null:m==="asc"?e.jsx(ts,{className:"h-4 w-4"}):e.jsx(Ct,{className:"h-4 w-4"});return l?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading contacts: ",l]}),e.jsx(u,{onClick:f,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Users"}),e.jsx("p",{className:"text-gray-600",children:"Manage your email subscribers"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(oe,{open:B,onOpenChange:F,children:[e.jsx(de,{asChild:!0,children:e.jsxs(u,{variant:"outline",children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Add Contact"]})}),e.jsxs(me,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:"Add New Contact"}),e.jsx(xe,{children:"Add a new contact to your email list."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"contact-name",children:"Name"}),e.jsx(ce,{id:"contact-name",value:R.name,onChange:P=>G({...R,name:P.target.value}),placeholder:"Enter contact name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"contact-email",children:"Email"}),e.jsx(ce,{id:"contact-email",type:"email",value:R.email,onChange:P=>G({...R,email:P.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(u,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(u,{onClick:pe,children:"Add Contact"})]})]})]})]}),e.jsxs(oe,{open:A,onOpenChange:P=>{N(P),P||J()},children:[e.jsx(de,{asChild:!0,children:e.jsxs(u,{className:"bg-gray-600 hover:bg-gray-700",children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Import Excel"]})}),e.jsxs(me,{className:"max-w-md",children:[e.jsxs(he,{children:[e.jsx(ue,{children:"Import Contacts"}),e.jsx(xe,{children:"Upload a CSV or Excel file to import contacts. The file should contain columns for Name and Email."})]}),e.jsxs("div",{className:"space-y-4",children:[!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"file-upload",children:"Select File"}),e.jsx("input",{id:"file-upload",type:"file",ref:i,onChange:$,accept:".csv,.xlsx,.xls",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),O&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:O.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(O.size/1024).toFixed(1)," KB)"]})]})}),e.jsxs(Te,{children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx(Ee,{children:'Make sure your file has columns named "name" and "email". The first row should contain headers.'})]})]}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Importing contacts..."})]}),e.jsx(kt,{value:void 0,className:"w-full"})]}),v&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Te,{className:v.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[v.success?e.jsx(tt,{className:"h-4 w-4 text-green-600"}):e.jsx(He,{className:"h-4 w-4 text-red-600"}),e.jsx(Ee,{className:v.success?"text-green-800":"text-red-800",children:v.message})]}),v.success&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-green-100 rounded",children:[e.jsx("div",{className:"font-semibold text-green-800",children:v.imported_count||0}),e.jsx("div",{className:"text-green-600",children:"Imported"})]}),v.failed_count&&v.failed_count>0&&e.jsxs("div",{className:"text-center p-2 bg-red-100 rounded",children:[e.jsx("div",{className:"font-semibold text-red-800",children:v.failed_count}),e.jsx("div",{className:"text-red-600",children:"Failed"})]})]}),v.errors&&v.errors.length>0&&e.jsxs("div",{className:"max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Errors:"}),e.jsx("ul",{className:"text-xs text-red-600 space-y-1",children:v.errors.map((P,k)=>e.jsxs("li",{children:["• ",P]},k))})]})]})]}),e.jsxs($e,{children:[!v&&e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsx(u,{onClick:X,disabled:!O||r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Import"]})})]}),v&&e.jsx(u,{onClick:()=>N(!1),className:"w-full",children:"Close"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Data"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>ee("copy"),children:[e.jsx(ss,{className:"mr-1 h-3 w-3"}),"Copy"]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>ee("CSV"),children:[e.jsx(qe,{className:"mr-1 h-3 w-3"}),"CSV"]}),e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>ee("print"),children:[e.jsx(Ua,{className:"mr-1 h-3 w-3"}),"Print"]})]}),e.jsx(re,{})]})]}),e.jsx("div",{className:"overflow-x-auto",children:a?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Q,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading contacts..."})]}):e.jsxs(Ke,{children:[e.jsx(Ge,{children:e.jsxs(we,{children:[e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",e.jsx(T,{field:"name"})]})}),e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("email"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Email",e.jsx(T,{field:"email"})]})}),e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("created_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Created At",e.jsx(T,{field:"created_at"})]})}),e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("updated_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Updated At",e.jsx(T,{field:"updated_at"})]})})]})}),e.jsx(Xe,{children:x.map(P=>e.jsxs(we,{children:[e.jsx(ae,{className:"font-medium",children:P.name||"N/A"}),e.jsx(ae,{children:P.email}),e.jsx(ae,{children:te(P.created_at)}),e.jsx(ae,{children:te(P.updated_at)})]},P.id))})]})}),e.jsxs("div",{className:"p-4 border-t flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:s&&e.jsxs(e.Fragment,{children:["Showing ",s.from," to ",s.to," of ",s.total," entries (Page"," ",s.current_page," of ",s.last_page,")"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:E,disabled:!(s!=null&&s.prev_page_url),children:"Previous"}),s&&s.last_page>1&&e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(P,k)=>{const D=k+1;return e.jsx(u,{variant:h===D?"default":"outline",size:"sm",onClick:()=>w(D),children:D},D)})}),e.jsx(u,{variant:"outline",size:"sm",onClick:_,disabled:!(s!=null&&s.next_page_url),children:"Next"})]})]})]})]})}const be=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:z("rounded-lg border bg-card text-card-foreground shadow-sm",t),...s}));be.displayName="Card";const Ce=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:z("flex flex-col space-y-1.5 p-6",t),...s}));Ce.displayName="CardHeader";const Se=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:z("text-2xl font-semibold leading-none tracking-tight",t),...s}));Se.displayName="CardTitle";const _e=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:z("text-sm text-muted-foreground",t),...s}));_e.displayName="CardDescription";const ke=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:z("p-6 pt-0",t),...s}));ke.displayName="CardContent";const at=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:z("flex items-center p-6 pt-0",t),...s}));at.displayName="CardFooter";function An(){return{}}function Rn(){const{templates:t,pagination:s,loading:a,creating:r,updating:l,deleting:h,error:d,currentPage:c,createTemplate:o,updateTemplate:g,deleteTemplate:w,duplicateTemplate:_,goToPage:E,goToNextPage:I,goToPrevPage:C,refetch:f}=An(),[j,p]=n.useState(!1),[m,y]=n.useState(null),[B,F]=n.useState(null),[A,N]=n.useState({title:"",subject:"",body:""}),R=async()=>{if(!A.title||!A.subject||!A.body){alert("Please fill in all fields");return}try{await o(A),N({title:"",subject:"",body:""}),p(!1)}catch{}},G=async()=>{if(m)try{await g(m.id,{title:m.title,subject:m.subject,body:m.body}),y(null)}catch{}},O=async i=>{if(confirm("Are you sure you want to delete this template?"))try{await w(i)}catch{}},V=async i=>{try{await _(i)}catch{}},v=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),b=(i,S=!1)=>{const x=`<span style="background-color: #e0f2fe; padding: 2px 4px; border-radius: 3px; font-weight: bold;">{{${i}}}</span>`;document.execCommand("insertHTML",!1,x)};return d?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading templates: ",d]}),e.jsx(u,{onClick:f,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Templates"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email templates"})]}),e.jsxs(oe,{open:j,onOpenChange:p,children:[e.jsx(de,{asChild:!0,children:e.jsxs(u,{disabled:a,children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Create Template"]})}),e.jsxs(me,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(ue,{children:"Create New Email Template"}),e.jsx(xe,{children:"Create a new email template for your campaigns."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"template-title",children:"Template Title"}),e.jsx(ce,{id:"template-title",value:A.title,onChange:i=>N({...A,title:i.target.value}),placeholder:"Enter template title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"template-subject",children:"Subject Line"}),e.jsx(ce,{id:"template-subject",value:A.subject,onChange:i=>N({...A,subject:i.target.value}),placeholder:"Enter email subject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Email Body"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:()=>b("name"),children:["Add ","{{ name }}"]}),e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:()=>b("email"),children:["Add ","{{ email }}"]}),e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:()=>b("company"),children:["Add ","{{ company }}"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("bold"),className:"h-8 w-8 p-0",title:"Bold",children:e.jsx(Dt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("italic"),className:"h-8 w-8 p-0",title:"Italic",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("underline"),className:"h-8 w-8 p-0",title:"Underline",children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h1>");const i=window.getSelection();if(i&&i.rangeCount>0){const x=i.getRangeAt(0).commonAncestorContainer.parentElement;x&&x.tagName==="H1"&&(x.style.fontSize="2em",x.style.fontWeight="bold",x.style.marginBottom="0.5em")}},className:"h-8 px-2",title:"Heading 1",children:e.jsx(Lt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h2>");const i=window.getSelection();if(i&&i.rangeCount>0){const x=i.getRangeAt(0).commonAncestorContainer.parentElement;x&&x.tagName==="H2"&&(x.style.fontSize="1.5em",x.style.fontWeight="bold",x.style.marginBottom="0.4em")}},className:"h-8 px-2",title:"Heading 2",children:e.jsx(Bt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyLeft"),className:"h-8 w-8 p-0",title:"Align Left",children:e.jsx(At,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyCenter"),className:"h-8 w-8 p-0",title:"Align Center",children:e.jsx(Mt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyRight"),className:"h-8 w-8 p-0",title:"Align Right",children:e.jsx(Rt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertUnorderedList"),className:"h-8 w-8 p-0",title:"Bullet List",children:e.jsx(zt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertOrderedList"),className:"h-8 w-8 p-0",title:"Numbered List",children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=async S=>{var M;const x=(M=S.target.files)==null?void 0:M[0];if(x)try{const $=new FormData;$.append("file",x);const X=await fetch("/api/store-file",{method:"POST",body:$});if(X.ok){const re=(await X.json()).url;document.execCommand("insertImage",!1,re)}else alert("Failed to upload image")}catch($){console.error("Upload error:",$),alert("Error uploading image")}},i.click()},className:"h-8 w-8 p-0",title:"Insert Image",children:e.jsx(Ft,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const i=prompt("Enter link URL:");i&&document.execCommand("createLink",!1,i)},className:"h-8 w-8 p-0",title:"Insert Link",children:e.jsx($t,{className:"h-4 w-4"})})]}),e.jsx("div",{contentEditable:!0,className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif"},onInput:i=>{const S=i.currentTarget.innerHTML;N({...A,body:S})},dangerouslySetInnerHTML:{__html:A.body||"<p>Write your email content here...</p><p>Use the toolbar above to format your text, add images, and create beautiful emails!</p>"},suppressContentEditableWarning:!0})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Use variables like ","{{ name }}",", ","{{ email }}",", ","{{ company }}"," for personalization. They will be replaced with actual values when sending."]})]})]}),e.jsxs($e,{children:[e.jsx(u,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(u,{onClick:R,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Create Template"]})})]})]})]})]}),a?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Q,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading templates..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>e.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ce,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(Se,{className:"text-lg",children:i.title}),e.jsxs(_e,{className:"mt-1",children:["Created: ",v(i.created_at)]})]})})}),e.jsx(ke,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Subject:"}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:i.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Content Preview:"}),e.jsx("div",{className:"text-sm text-gray-600 line-clamp-3",dangerouslySetInnerHTML:{__html:i.body.replace(/<[^>]*>/g,"").substring(0,100)+"..."}})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:v(i.updated_at)})]})]})}),e.jsxs(at,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(oe,{children:[e.jsx(de,{asChild:!0,children:e.jsx(u,{variant:"outline",size:"sm",onClick:()=>F(i),children:e.jsx(st,{className:"h-3 w-3"})})}),e.jsxs(me,{className:"max-w-2xl",children:[e.jsxs(he,{children:[e.jsx(ue,{children:B==null?void 0:B.title}),e.jsx(xe,{children:"Template Preview"})]}),B&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:B.subject})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Email Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:B.body}})]})]})]})]}),e.jsxs(oe,{children:[e.jsx(de,{asChild:!0,children:e.jsx(u,{variant:"outline",size:"sm",onClick:()=>y({...i}),children:e.jsx(Za,{className:"h-3 w-3"})})}),e.jsxs(me,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(ue,{children:"Edit Template"}),e.jsx(xe,{children:"Make changes to your email template."})]}),m&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Template Title"}),e.jsx(ce,{value:m.title,onChange:S=>y({...m,title:S.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Subject Line"}),e.jsx(ce,{value:m.subject,onChange:S=>y({...m,subject:S.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Email Body"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:()=>b("name",!0),children:["Add ","{{ name }}"]}),e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:()=>b("email",!0),children:["Add ","{{ email }}"]}),e.jsxs(u,{type:"button",variant:"outline",size:"sm",onClick:()=>b("company",!0),children:["Add ","{{ company }}"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("bold"),className:"h-8 w-8 p-0",title:"Bold",children:e.jsx(Dt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("italic"),className:"h-8 w-8 p-0",title:"Italic",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("underline"),className:"h-8 w-8 p-0",title:"Underline",children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h1>");const S=window.getSelection();if(S&&S.rangeCount>0){const M=S.getRangeAt(0).commonAncestorContainer.parentElement;M&&M.tagName==="H1"&&(M.style.fontSize="2em",M.style.fontWeight="bold",M.style.marginBottom="0.5em")}},className:"h-8 px-2",title:"Heading 1",children:e.jsx(Lt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h2>");const S=window.getSelection();if(S&&S.rangeCount>0){const M=S.getRangeAt(0).commonAncestorContainer.parentElement;M&&M.tagName==="H2"&&(M.style.fontSize="1.5em",M.style.fontWeight="bold",M.style.marginBottom="0.4em")}},className:"h-8 px-2",title:"Heading 2",children:e.jsx(Bt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyLeft"),className:"h-8 w-8 p-0",title:"Align Left",children:e.jsx(At,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyCenter"),className:"h-8 w-8 p-0",title:"Align Center",children:e.jsx(Mt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyRight"),className:"h-8 w-8 p-0",title:"Align Right",children:e.jsx(Rt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertUnorderedList"),className:"h-8 w-8 p-0",title:"Bullet List",children:e.jsx(zt,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertOrderedList"),className:"h-8 w-8 p-0",title:"Numbered List",children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const S=document.createElement("input");S.type="file",S.accept="image/*",S.onchange=async x=>{var $;const M=($=x.target.files)==null?void 0:$[0];if(M)try{const X=new FormData;X.append("file",M);const J=await fetch("/api/store-file",{method:"POST",body:X});if(J.ok){const ee=(await J.json()).url;document.execCommand("insertImage",!1,ee)}else alert("Failed to upload image")}catch(X){console.error("Upload error:",X),alert("Error uploading image")}},S.click()},className:"h-8 w-8 p-0",title:"Insert Image",children:e.jsx(Ft,{className:"h-4 w-4"})}),e.jsx(u,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const S=prompt("Enter link URL:");S&&document.execCommand("createLink",!1,S)},className:"h-8 w-8 p-0",title:"Insert Link",children:e.jsx($t,{className:"h-4 w-4"})})]}),e.jsx("div",{contentEditable:!0,className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif"},onInput:S=>{const x=S.currentTarget.innerHTML;y({...m,body:x})},dangerouslySetInnerHTML:{__html:m.body},suppressContentEditableWarning:!0})]})]})]})]}),e.jsxs($e,{children:[e.jsx(u,{variant:"outline",onClick:()=>y(null),children:"Cancel"}),e.jsx(u,{onClick:G,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>V(i),disabled:r,children:e.jsx(ss,{className:"h-3 w-3"})})]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>O(i.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:h,children:e.jsx(ns,{className:"h-3 w-3"})})]})]},i.id))}),s&&s.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:C,disabled:!s.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(i,S)=>{const x=S+1;return e.jsx(u,{variant:c===x?"default":"outline",size:"sm",onClick:()=>E(x),children:x},x)})}),e.jsx(u,{variant:"outline",size:"sm",onClick:I,disabled:!s.next_page_url,children:"Next"})]})}),t.length===0&&!a&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Be,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first email template."}),e.jsxs(u,{onClick:()=>p(!0),children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Create Template"]})]})]})]})}const Dn=Zt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Et({className:t,variant:s,...a}){return e.jsx("div",{className:z(Dn({variant:s}),t),...a})}function Xt(t,[s,a]){return Math.min(a,Math.max(s,t))}var Ln=[" ","Enter","ArrowUp","ArrowDown"],Bn=[" ","Enter"],Ve="Select",[nt,rt,Fn]=Js(Ve),[Re,Sr]=ha(Ve,[Fn,Qt]),lt=Qt(),[On,je]=Re(Ve),[$n,Hn]=Re(Ve),hs=t=>{const{__scopeSelect:s,children:a,open:r,defaultOpen:l,onOpenChange:h,value:d,defaultValue:c,onValueChange:o,dir:g,name:w,autoComplete:_,disabled:E,required:I,form:C}=t,f=lt(s),[j,p]=n.useState(null),[m,y]=n.useState(null),[B,F]=n.useState(!1),A=Ys(g),[N=!1,R]=It({prop:r,defaultProp:l,onChange:h}),[G,O]=It({prop:d,defaultProp:c,onChange:o}),V=n.useRef(null),v=j?C||!!j.closest("form"):!0,[b,i]=n.useState(new Set),S=Array.from(b).map(x=>x.props.value).join(";");return e.jsx(Zs,{...f,children:e.jsxs(On,{required:I,scope:s,trigger:j,onTriggerChange:p,valueNode:m,onValueNodeChange:y,valueNodeHasChildren:B,onValueNodeHasChildrenChange:F,contentId:bt(),value:G,onValueChange:O,open:N,onOpenChange:R,dir:A,triggerPointerDownPosRef:V,disabled:E,children:[e.jsx(nt.Provider,{scope:s,children:e.jsx($n,{scope:t.__scopeSelect,onNativeOptionAdd:n.useCallback(x=>{i(M=>new Set(M).add(x))},[]),onNativeOptionRemove:n.useCallback(x=>{i(M=>{const $=new Set(M);return $.delete(x),$})},[]),children:a})}),v?e.jsxs(Bs,{"aria-hidden":!0,required:I,tabIndex:-1,name:w,autoComplete:_,value:G,onChange:x=>O(x.target.value),disabled:E,form:C,children:[G===void 0?e.jsx("option",{value:""}):null,Array.from(b)]},S):null]})})};hs.displayName=Ve;var us="SelectTrigger",xs=n.forwardRef((t,s)=>{const{__scopeSelect:a,disabled:r=!1,...l}=t,h=lt(a),d=je(us,a),c=d.disabled||r,o=ie(s,d.onTriggerChange),g=rt(a),w=n.useRef("touch"),[_,E,I]=Fs(f=>{const j=g().filter(y=>!y.disabled),p=j.find(y=>y.value===d.value),m=Os(j,f,p);m!==void 0&&d.onValueChange(m.value)}),C=f=>{c||(d.onOpenChange(!0),I()),f&&(d.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(ea,{asChild:!0,...h,children:e.jsx(ne.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Ls(d.value)?"":void 0,...l,ref:o,onClick:Z(l.onClick,f=>{f.currentTarget.focus(),w.current!=="mouse"&&C(f)}),onPointerDown:Z(l.onPointerDown,f=>{w.current=f.pointerType;const j=f.target;j.hasPointerCapture(f.pointerId)&&j.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(C(f),f.preventDefault())}),onKeyDown:Z(l.onKeyDown,f=>{const j=_.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&E(f.key),!(j&&f.key===" ")&&Ln.includes(f.key)&&(C(),f.preventDefault())})})})});xs.displayName=us;var ps="SelectValue",gs=n.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:l,children:h,placeholder:d="",...c}=t,o=je(ps,a),{onValueNodeHasChildrenChange:g}=o,w=h!==void 0,_=ie(s,o.onValueNodeChange);return fe(()=>{g(w)},[g,w]),e.jsx(ne.span,{...c,ref:_,style:{pointerEvents:"none"},children:Ls(o.value)?e.jsx(e.Fragment,{children:d}):h})});gs.displayName=ps;var zn="SelectIcon",fs=n.forwardRef((t,s)=>{const{__scopeSelect:a,children:r,...l}=t;return e.jsx(ne.span,{"aria-hidden":!0,...l,ref:s,children:r||"▼"})});fs.displayName=zn;var Vn="SelectPortal",js=t=>e.jsx(ta,{asChild:!0,...t});js.displayName=Vn;var Pe="SelectContent",ys=n.forwardRef((t,s)=>{const a=je(Pe,t.__scopeSelect),[r,l]=n.useState();if(fe(()=>{l(new DocumentFragment)},[]),!a.open){const h=r;return h?es.createPortal(e.jsx(vs,{scope:t.__scopeSelect,children:e.jsx(nt.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),h):null}return e.jsx(Ns,{...t,ref:s})});ys.displayName=Pe;var le=10,[vs,ye]=Re(Pe),Un="SelectContentImpl",Ns=n.forwardRef((t,s)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:h,onPointerDownOutside:d,side:c,sideOffset:o,align:g,alignOffset:w,arrowPadding:_,collisionBoundary:E,collisionPadding:I,sticky:C,hideWhenDetached:f,avoidCollisions:j,...p}=t,m=je(Pe,a),[y,B]=n.useState(null),[F,A]=n.useState(null),N=ie(s,k=>B(k)),[R,G]=n.useState(null),[O,V]=n.useState(null),v=rt(a),[b,i]=n.useState(!1),S=n.useRef(!1);n.useEffect(()=>{if(y)return sa(y)},[y]),aa();const x=n.useCallback(k=>{const[D,...U]=v().map(q=>q.ref.current),[H]=U.slice(-1),W=document.activeElement;for(const q of k)if(q===W||(q==null||q.scrollIntoView({block:"nearest"}),q===D&&F&&(F.scrollTop=0),q===H&&F&&(F.scrollTop=F.scrollHeight),q==null||q.focus(),document.activeElement!==W))return},[v,F]),M=n.useCallback(()=>x([R,y]),[x,R,y]);n.useEffect(()=>{b&&M()},[b,M]);const{onOpenChange:$,triggerPointerDownPosRef:X}=m;n.useEffect(()=>{if(y){let k={x:0,y:0};const D=H=>{var W,q;k={x:Math.abs(Math.round(H.pageX)-(((W=X.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(H.pageY)-(((q=X.current)==null?void 0:q.y)??0))}},U=H=>{k.x<=10&&k.y<=10?H.preventDefault():y.contains(H.target)||$(!1),document.removeEventListener("pointermove",D),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",D),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",D),document.removeEventListener("pointerup",U,{capture:!0})}}},[y,$,X]),n.useEffect(()=>{const k=()=>$(!1);return window.addEventListener("blur",k),window.addEventListener("resize",k),()=>{window.removeEventListener("blur",k),window.removeEventListener("resize",k)}},[$]);const[J,re]=Fs(k=>{const D=v().filter(W=>!W.disabled),U=D.find(W=>W.ref.current===document.activeElement),H=Os(D,k,U);H&&setTimeout(()=>H.ref.current.focus())}),ee=n.useCallback((k,D,U)=>{const H=!S.current&&!U;(m.value!==void 0&&m.value===D||H)&&(G(k),H&&(S.current=!0))},[m.value]),pe=n.useCallback(()=>y==null?void 0:y.focus(),[y]),te=n.useCallback((k,D,U)=>{const H=!S.current&&!U;(m.value!==void 0&&m.value===D||H)&&V(k)},[m.value]),T=r==="popper"?pt:ws,P=T===pt?{side:c,sideOffset:o,align:g,alignOffset:w,arrowPadding:_,collisionBoundary:E,collisionPadding:I,sticky:C,hideWhenDetached:f,avoidCollisions:j}:{};return e.jsx(vs,{scope:a,content:y,viewport:F,onViewportChange:A,itemRefCallback:ee,selectedItem:R,onItemLeave:pe,itemTextRefCallback:te,focusSelectedItem:M,selectedItemText:O,position:r,isPositioned:b,searchRef:J,children:e.jsx(na,{as:Xs,allowPinchZoom:!0,children:e.jsx(ra,{asChild:!0,trapped:m.open,onMountAutoFocus:k=>{k.preventDefault()},onUnmountAutoFocus:Z(l,k=>{var D;(D=m.trigger)==null||D.focus({preventScroll:!0}),k.preventDefault()}),children:e.jsx(la,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:k=>k.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:e.jsx(T,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:k=>k.preventDefault(),...p,...P,onPlaced:()=>i(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...p.style},onKeyDown:Z(p.onKeyDown,k=>{const D=k.ctrlKey||k.altKey||k.metaKey;if(k.key==="Tab"&&k.preventDefault(),!D&&k.key.length===1&&re(k.key),["ArrowUp","ArrowDown","Home","End"].includes(k.key)){let H=v().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(k.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(k.key)){const W=k.target,q=H.indexOf(W);H=H.slice(q+1)}setTimeout(()=>x(H)),k.preventDefault()}})})})})})})});Ns.displayName=Un;var Wn="SelectItemAlignedPosition",ws=n.forwardRef((t,s)=>{const{__scopeSelect:a,onPlaced:r,...l}=t,h=je(Pe,a),d=ye(Pe,a),[c,o]=n.useState(null),[g,w]=n.useState(null),_=ie(s,N=>w(N)),E=rt(a),I=n.useRef(!1),C=n.useRef(!0),{viewport:f,selectedItem:j,selectedItemText:p,focusSelectedItem:m}=d,y=n.useCallback(()=>{if(h.trigger&&h.valueNode&&c&&g&&f&&j&&p){const N=h.trigger.getBoundingClientRect(),R=g.getBoundingClientRect(),G=h.valueNode.getBoundingClientRect(),O=p.getBoundingClientRect();if(h.dir!=="rtl"){const W=O.left-R.left,q=G.left-W,ve=N.left-q,Ne=N.width+ve,ct=Math.max(Ne,R.width),it=window.innerWidth-le,ot=Xt(q,[le,Math.max(le,it-ct)]);c.style.minWidth=Ne+"px",c.style.left=ot+"px"}else{const W=R.right-O.right,q=window.innerWidth-G.right-W,ve=window.innerWidth-N.right-q,Ne=N.width+ve,ct=Math.max(Ne,R.width),it=window.innerWidth-le,ot=Xt(q,[le,Math.max(le,it-ct)]);c.style.minWidth=Ne+"px",c.style.right=ot+"px"}const V=E(),v=window.innerHeight-le*2,b=f.scrollHeight,i=window.getComputedStyle(g),S=parseInt(i.borderTopWidth,10),x=parseInt(i.paddingTop,10),M=parseInt(i.borderBottomWidth,10),$=parseInt(i.paddingBottom,10),X=S+x+b+$+M,J=Math.min(j.offsetHeight*5,X),re=window.getComputedStyle(f),ee=parseInt(re.paddingTop,10),pe=parseInt(re.paddingBottom,10),te=N.top+N.height/2-le,T=v-te,P=j.offsetHeight/2,k=j.offsetTop+P,D=S+x+k,U=X-D;if(D<=te){const W=V.length>0&&j===V[V.length-1].ref.current;c.style.bottom="0px";const q=g.clientHeight-f.offsetTop-f.offsetHeight,ve=Math.max(T,P+(W?pe:0)+q+M),Ne=D+ve;c.style.height=Ne+"px"}else{const W=V.length>0&&j===V[0].ref.current;c.style.top="0px";const ve=Math.max(te,S+f.offsetTop+(W?ee:0)+P)+U;c.style.height=ve+"px",f.scrollTop=D-te+f.offsetTop}c.style.margin=`${le}px 0`,c.style.minHeight=J+"px",c.style.maxHeight=v+"px",r==null||r(),requestAnimationFrame(()=>I.current=!0)}},[E,h.trigger,h.valueNode,c,g,f,j,p,h.dir,r]);fe(()=>y(),[y]);const[B,F]=n.useState();fe(()=>{g&&F(window.getComputedStyle(g).zIndex)},[g]);const A=n.useCallback(N=>{N&&C.current===!0&&(y(),m==null||m(),C.current=!1)},[y,m]);return e.jsx(Kn,{scope:a,contentWrapper:c,shouldExpandOnScrollRef:I,onScrollButtonChange:A,children:e.jsx("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:B},children:e.jsx(ne.div,{...l,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});ws.displayName=Wn;var qn="SelectPopperPosition",pt=n.forwardRef((t,s)=>{const{__scopeSelect:a,align:r="start",collisionPadding:l=le,...h}=t,d=lt(a);return e.jsx(ca,{...d,...h,ref:s,align:r,collisionPadding:l,style:{boxSizing:"border-box",...h.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});pt.displayName=qn;var[Kn,Pt]=Re(Pe,{}),gt="SelectViewport",bs=n.forwardRef((t,s)=>{const{__scopeSelect:a,nonce:r,...l}=t,h=ye(gt,a),d=Pt(gt,a),c=ie(s,h.onViewportChange),o=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(nt.Slot,{scope:a,children:e.jsx(ne.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:Z(l.onScroll,g=>{const w=g.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:E}=d;if(E!=null&&E.current&&_){const I=Math.abs(o.current-w.scrollTop);if(I>0){const C=window.innerHeight-le*2,f=parseFloat(_.style.minHeight),j=parseFloat(_.style.height),p=Math.max(f,j);if(p<C){const m=p+I,y=Math.min(C,m),B=m-y;_.style.height=y+"px",_.style.bottom==="0px"&&(w.scrollTop=B>0?B:0,_.style.justifyContent="flex-end")}}}o.current=w.scrollTop})})})]})});bs.displayName=gt;var Cs="SelectGroup",[Gn,Xn]=Re(Cs),Yn=n.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,l=bt();return e.jsx(Gn,{scope:a,id:l,children:e.jsx(ne.div,{role:"group","aria-labelledby":l,...r,ref:s})})});Yn.displayName=Cs;var Ss="SelectLabel",_s=n.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,l=Xn(Ss,a);return e.jsx(ne.div,{id:l.id,...r,ref:s})});_s.displayName=Ss;var Ze="SelectItem",[Zn,ks]=Re(Ze),Ts=n.forwardRef((t,s)=>{const{__scopeSelect:a,value:r,disabled:l=!1,textValue:h,...d}=t,c=je(Ze,a),o=ye(Ze,a),g=c.value===r,[w,_]=n.useState(h??""),[E,I]=n.useState(!1),C=ie(s,m=>{var y;return(y=o.itemRefCallback)==null?void 0:y.call(o,m,r,l)}),f=bt(),j=n.useRef("touch"),p=()=>{l||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Zn,{scope:a,value:r,disabled:l,textId:f,isSelected:g,onItemTextChange:n.useCallback(m=>{_(y=>y||((m==null?void 0:m.textContent)??"").trim())},[]),children:e.jsx(nt.ItemSlot,{scope:a,value:r,disabled:l,textValue:w,children:e.jsx(ne.div,{role:"option","aria-labelledby":f,"data-highlighted":E?"":void 0,"aria-selected":g&&E,"data-state":g?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...d,ref:C,onFocus:Z(d.onFocus,()=>I(!0)),onBlur:Z(d.onBlur,()=>I(!1)),onClick:Z(d.onClick,()=>{j.current!=="mouse"&&p()}),onPointerUp:Z(d.onPointerUp,()=>{j.current==="mouse"&&p()}),onPointerDown:Z(d.onPointerDown,m=>{j.current=m.pointerType}),onPointerMove:Z(d.onPointerMove,m=>{var y;j.current=m.pointerType,l?(y=o.onItemLeave)==null||y.call(o):j.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(d.onPointerLeave,m=>{var y;m.currentTarget===document.activeElement&&((y=o.onItemLeave)==null||y.call(o))}),onKeyDown:Z(d.onKeyDown,m=>{var B;((B=o.searchRef)==null?void 0:B.current)!==""&&m.key===" "||(Bn.includes(m.key)&&p(),m.key===" "&&m.preventDefault())})})})})});Ts.displayName=Ze;var Le="SelectItemText",Es=n.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:l,...h}=t,d=je(Le,a),c=ye(Le,a),o=ks(Le,a),g=Hn(Le,a),[w,_]=n.useState(null),E=ie(s,p=>_(p),o.onItemTextChange,p=>{var m;return(m=c.itemTextRefCallback)==null?void 0:m.call(c,p,o.value,o.disabled)}),I=w==null?void 0:w.textContent,C=n.useMemo(()=>e.jsx("option",{value:o.value,disabled:o.disabled,children:I},o.value),[o.disabled,o.value,I]),{onNativeOptionAdd:f,onNativeOptionRemove:j}=g;return fe(()=>(f(C),()=>j(C)),[f,j,C]),e.jsxs(e.Fragment,{children:[e.jsx(ne.span,{id:o.textId,...h,ref:E}),o.isSelected&&d.valueNode&&!d.valueNodeHasChildren?es.createPortal(h.children,d.valueNode):null]})});Es.displayName=Le;var Ps="SelectItemIndicator",Is=n.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return ks(Ps,a).isSelected?e.jsx(ne.span,{"aria-hidden":!0,...r,ref:s}):null});Is.displayName=Ps;var ft="SelectScrollUpButton",Ms=n.forwardRef((t,s)=>{const a=ye(ft,t.__scopeSelect),r=Pt(ft,t.__scopeSelect),[l,h]=n.useState(!1),d=ie(s,r.onScrollButtonChange);return fe(()=>{if(a.viewport&&a.isPositioned){let c=function(){const g=o.scrollTop>0;h(g)};const o=a.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[a.viewport,a.isPositioned]),l?e.jsx(Rs,{...t,ref:d,onAutoScroll:()=>{const{viewport:c,selectedItem:o}=a;c&&o&&(c.scrollTop=c.scrollTop-o.offsetHeight)}}):null});Ms.displayName=ft;var jt="SelectScrollDownButton",As=n.forwardRef((t,s)=>{const a=ye(jt,t.__scopeSelect),r=Pt(jt,t.__scopeSelect),[l,h]=n.useState(!1),d=ie(s,r.onScrollButtonChange);return fe(()=>{if(a.viewport&&a.isPositioned){let c=function(){const g=o.scrollHeight-o.clientHeight,w=Math.ceil(o.scrollTop)<g;h(w)};const o=a.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[a.viewport,a.isPositioned]),l?e.jsx(Rs,{...t,ref:d,onAutoScroll:()=>{const{viewport:c,selectedItem:o}=a;c&&o&&(c.scrollTop=c.scrollTop+o.offsetHeight)}}):null});As.displayName=jt;var Rs=n.forwardRef((t,s)=>{const{__scopeSelect:a,onAutoScroll:r,...l}=t,h=ye("SelectScrollButton",a),d=n.useRef(null),c=rt(a),o=n.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return n.useEffect(()=>()=>o(),[o]),fe(()=>{var w;const g=c().find(_=>_.ref.current===document.activeElement);(w=g==null?void 0:g.ref.current)==null||w.scrollIntoView({block:"nearest"})},[c]),e.jsx(ne.div,{"aria-hidden":!0,...l,ref:s,style:{flexShrink:0,...l.style},onPointerDown:Z(l.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(r,50))}),onPointerMove:Z(l.onPointerMove,()=>{var g;(g=h.onItemLeave)==null||g.call(h),d.current===null&&(d.current=window.setInterval(r,50))}),onPointerLeave:Z(l.onPointerLeave,()=>{o()})})}),Jn="SelectSeparator",Ds=n.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return e.jsx(ne.div,{"aria-hidden":!0,...r,ref:s})});Ds.displayName=Jn;var yt="SelectArrow",Qn=n.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,l=lt(a),h=je(yt,a),d=ye(yt,a);return h.open&&d.position==="popper"?e.jsx(ia,{...l,...r,ref:s}):null});Qn.displayName=yt;function Ls(t){return t===""||t===void 0}var Bs=n.forwardRef((t,s)=>{const{value:a,...r}=t,l=n.useRef(null),h=ie(s,l),d=pa(a);return n.useEffect(()=>{const c=l.current,o=window.HTMLSelectElement.prototype,w=Object.getOwnPropertyDescriptor(o,"value").set;if(d!==a&&w){const _=new Event("change",{bubbles:!0});w.call(c,a),c.dispatchEvent(_)}},[d,a]),e.jsx(Qs,{asChild:!0,children:e.jsx("select",{...r,ref:h,defaultValue:a})})});Bs.displayName="BubbleSelect";function Fs(t){const s=ua(t),a=n.useRef(""),r=n.useRef(0),l=n.useCallback(d=>{const c=a.current+d;s(c),function o(g){a.current=g,window.clearTimeout(r.current),g!==""&&(r.current=window.setTimeout(()=>o(""),1e3))}(c)},[s]),h=n.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,l,h]}function Os(t,s,a){const l=s.length>1&&Array.from(s).every(g=>g===s[0])?s[0]:s,h=a?t.indexOf(a):-1;let d=er(t,Math.max(h,0));l.length===1&&(d=d.filter(g=>g!==a));const o=d.find(g=>g.textValue.toLowerCase().startsWith(l.toLowerCase()));return o!==a?o:void 0}function er(t,s){return t.map((a,r)=>t[(s+r)%t.length])}var tr=hs,$s=xs,sr=gs,ar=fs,nr=js,Hs=ys,rr=bs,zs=_s,Vs=Ts,lr=Es,cr=Is,Us=Ms,Ws=As,qs=Ds;const vt=tr,Nt=sr,Je=n.forwardRef(({className:t,children:s,...a},r)=>e.jsxs($s,{ref:r,className:z("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(ar,{asChild:!0,children:e.jsx(Ct,{className:"h-4 w-4 opacity-50"})})]}));Je.displayName=$s.displayName;const Ks=n.forwardRef(({className:t,...s},a)=>e.jsx(Us,{ref:a,className:z("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ts,{className:"h-4 w-4"})}));Ks.displayName=Us.displayName;const Gs=n.forwardRef(({className:t,...s},a)=>e.jsx(Ws,{ref:a,className:z("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ct,{className:"h-4 w-4"})}));Gs.displayName=Ws.displayName;const Qe=n.forwardRef(({className:t,children:s,position:a="popper",...r},l)=>e.jsx(nr,{children:e.jsxs(Hs,{ref:l,className:z("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(Ks,{}),e.jsx(rr,{className:z("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Gs,{})]})}));Qe.displayName=Hs.displayName;const ir=n.forwardRef(({className:t,...s},a)=>e.jsx(zs,{ref:a,className:z("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));ir.displayName=zs.displayName;const et=n.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(Vs,{ref:r,className:z("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(cr,{children:e.jsx(xa,{className:"h-4 w-4"})})}),e.jsx(lr,{children:s})]}));et.displayName=Vs.displayName;const or=n.forwardRef(({className:t,...s},a)=>e.jsx(qs,{ref:a,className:z("-mx-1 my-1 h-px bg-muted",t),...s}));or.displayName=qs.displayName;function dr(){const[t,s]=n.useState([]),[a,r]=n.useState(null),[l,h]=n.useState([]),[d,c]=n.useState([]),[o,g]=n.useState(!0),[w,_]=n.useState(!1),[E,I]=n.useState(null),[C,f]=n.useState(1),{toast:j}=Ae(),p=n.useCallback(async(A=1)=>{try{g(!0),I(null);const N=await xt.getCampaigns(A);s(N.data),r({current_page:N.current_page,first_page_url:N.first_page_url,from:N.from,last_page:N.last_page,last_page_url:N.last_page_url,links:N.links,next_page_url:N.next_page_url,path:N.path,per_page:N.per_page,prev_page_url:N.prev_page_url,to:N.to,total:N.total}),f(A)}catch(N){const R=N instanceof Error?N.message:"Failed to fetch campaigns";I(R),j({title:"Error",description:R,variant:"destructive"})}finally{g(!1)}},[j]);n.useEffect(()=>{(async()=>{try{const[N,R]=await Promise.all([Ie.getAllContacts(),ms.getAllTemplates()]);h(N),c(R)}catch(N){console.error("Failed to load contacts/templates:",N)}})()},[]),n.useEffect(()=>{p(1)},[p]);const m=async A=>{try{_(!0);const N=await xt.createCampaign(A);return N.success?(j({title:"Campaign Created",description:N.message||"Campaign has been created and is being processed."}),await p(C)):j({title:"Campaign Failed",description:N.message||"Failed to create campaign",variant:"destructive"}),N}catch(N){const R=N instanceof Error?N.message:"Failed to create campaign";throw j({title:"Campaign Error",description:R,variant:"destructive"}),N}finally{_(!1)}},y=A=>{A>=1&&a&&A<=a.last_page&&p(A)};return{campaigns:t,pagination:a,contacts:l,templates:d,loading:o,creating:w,error:E,currentPage:C,fetchCampaigns:p,createCampaign:m,goToPage:y,goToNextPage:()=>{a!=null&&a.next_page_url&&y(C+1)},goToPrevPage:()=>{a!=null&&a.prev_page_url&&y(C-1)},refetch:()=>p(C)}}function mr(){const{campaigns:t,pagination:s,contacts:a,templates:r,loading:l,creating:h,error:d,currentPage:c,createCampaign:o,goToPage:g,goToNextPage:w,goToPrevPage:_,refetch:E}=dr(),[I,C]=n.useState(!1),[f,j]=n.useState(null),[p,m]=n.useState([]),[y,B]=n.useState(!1),[F,A]=n.useState(""),[N,R]=n.useState(null),{toast:G}=Ae(),O=async()=>{if(!F||!f){G({title:"Error",description:"Please fill in campaign name and select a template.",variant:"destructive"});return}if(!y&&p.length===0){G({title:"Error",description:"Please select recipients or choose 'Send to All'.",variant:"destructive"});return}try{await o({template_id:f,name:F,contact_ids:y?[]:p}),A(""),j(null),m([]),B(!1),C(!1)}catch{}},V=(x,M)=>{m(M?[...p,x]:p.filter($=>$!==x))},v=x=>{m(x?a.map(M=>M.id):[])},b=x=>{switch(x.toLowerCase()){case"completed":case"sent":return e.jsx(tt,{className:"h-4 w-4 text-green-500"});case"processing":case"sending":return e.jsx(Q,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":case"error":return e.jsx(He,{className:"h-4 w-4 text-red-500"});case"pending":case"queued":return e.jsx(ka,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Na,{className:"h-4 w-4 text-gray-500"})}},i=x=>{switch(x.toLowerCase()){case"completed":case"sent":return"bg-green-500";case"processing":case"sending":return"bg-blue-500";case"failed":case"error":return"bg-red-500";case"pending":case"queued":return"bg-yellow-500";default:return"bg-gray-500"}},S=x=>new Date(x).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return d?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading campaigns: ",d]}),e.jsx(u,{onClick:E,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Campaigns"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email campaigns"})]}),e.jsxs(oe,{open:I,onOpenChange:C,children:[e.jsx(de,{asChild:!0,children:e.jsxs(u,{disabled:l,children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})}),e.jsxs(me,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(he,{children:[e.jsx(ue,{children:"Create New Email Campaign"}),e.jsx(xe,{children:"Create and send an email campaign to your subscribers."})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"campaign-name",children:"Campaign Name"}),e.jsx(ce,{id:"campaign-name",value:F,onChange:x=>A(x.target.value),placeholder:"Enter campaign name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"campaign-template",children:"Email Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(vt,{value:(f==null?void 0:f.toString())||"",onValueChange:x=>j(Number.parseInt(x)),children:[e.jsx(Je,{className:"flex-1",children:e.jsx(Nt,{placeholder:"Select template"})}),e.jsx(Qe,{children:r.map(x=>e.jsx(et,{value:x.id.toString(),children:x.title},x.id))})]}),f&&e.jsxs(oe,{children:[e.jsx(de,{asChild:!0,children:e.jsx(u,{variant:"outline",size:"sm",onClick:()=>R(r.find(x=>x.id===f)||null),children:e.jsx(st,{className:"h-4 w-4"})})}),e.jsxs(me,{className:"max-w-2xl",children:[e.jsxs(he,{children:[e.jsx(ue,{children:N==null?void 0:N.title}),e.jsx(xe,{children:"Template Preview"})]}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:N.subject})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:N.body}})]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(K,{children:"Select Recipients"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{id:"send-to-all",checked:y,onCheckedChange:x=>{B(x),x&&m([])}}),e.jsxs(K,{htmlFor:"send-to-all",className:"text-sm font-medium",children:["Send to All Users (",a.length," contacts)"]})]})})]}),!y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[p.length," of ",a.length," contacts selected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dt,{id:"select-all-contacts",checked:p.length===a.length,onCheckedChange:v}),e.jsx(K,{htmlFor:"select-all-contacts",className:"text-sm",children:"Select All"})]})]}),e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:e.jsx("div",{className:"p-4 space-y-3",children:a.map(x=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[e.jsx(dt,{id:`contact-${x.id}`,checked:p.includes(x.id),onCheckedChange:M=>V(x.id,M)}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:x.name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:x.email})]})})})]},x.id))})})]}),y&&e.jsxs(Te,{children:[e.jsx(ge,{className:"h-4 w-4"}),e.jsxs(Ee,{children:["This campaign will be sent to all ",a.length," contacts in your database."]})]})]})]}),e.jsxs($e,{children:[e.jsx(u,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(u,{onClick:O,disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Campaign"})]})]})]})]}),l?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Q,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading campaigns..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(x=>e.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Se,{className:"text-lg",children:x.name}),e.jsxs(_e,{className:"mt-1",children:["Template: ",x.template.title]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[b(x.status),e.jsx(Et,{className:`${i(x.status)} text-white`,children:x.status.charAt(0).toUpperCase()+x.status.slice(1)})]})]})}),e.jsx(ke,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Contacts:"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:x.total_contacts})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Emails Sent:"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:x.emails_sent})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Created:"}),e.jsx("p",{className:"text-sm text-gray-600",children:S(x.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:S(x.updated_at)})]})]})}),e.jsx(at,{children:e.jsxs("div",{className:"w-full text-center text-sm text-gray-500",children:["Campaign ID: ",x.id]})})]},x.id))}),s&&s.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:_,disabled:!s.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(x,M)=>{const $=M+1;return e.jsx(u,{variant:c===$?"default":"outline",size:"sm",onClick:()=>g($),children:$},$)})}),e.jsx(u,{variant:"outline",size:"sm",onClick:w,disabled:!s.next_page_url,children:"Next"})]})}),t.length===0&&!l&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Me,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first email campaign to get started."}),e.jsxs(u,{onClick:()=>C(!0),disabled:l,children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})]})]})]})}function hr(){const[t,s]=n.useState([]),[a,r]=n.useState(null),[l,h]=n.useState(!0),[d,c]=n.useState(!1),[o,g]=n.useState(null),[w,_]=n.useState(1),[E,I]=n.useState(""),[C,f]=n.useState(null),[j,p]=n.useState(!1),{toast:m}=Ae(),y=n.useCallback(async(v=1,b="")=>{try{h(!0),g(null);const i=await De.getBatches(v,b);s(i.data),r({current_page:i.current_page,first_page_url:i.first_page_url,from:i.from,last_page:i.last_page,last_page_url:i.last_page_url,links:i.links,next_page_url:i.next_page_url,path:i.path,per_page:i.per_page,prev_page_url:i.prev_page_url,to:i.to,total:i.total}),_(v)}catch(i){const S=i instanceof Error?i.message:"Failed to fetch batches";g(S),m({title:"Error",description:S,variant:"destructive"})}finally{h(!1)}},[m]),B=async(v,b)=>{try{c(!0);const i=await De.importBatch(v,b);return i.success?(m({title:"Import Successful",description:`Successfully imported batch "${b}" with ${i.imported_count||0} contacts${i.failed_count?`. ${i.failed_count} failed.`:""}`}),await y(1,E)):m({title:"Import Failed",description:i.message||"Failed to import batch",variant:"destructive"}),i}catch(i){const S=i instanceof Error?i.message:"Failed to import batch";throw m({title:"Import Error",description:S,variant:"destructive"}),i}finally{c(!1)}},F=async v=>{try{p(!0);const b=await De.getBatchDetail(v);return f(b),b}catch(b){const i=b instanceof Error?b.message:"Failed to fetch batch details";throw m({title:"Error",description:i,variant:"destructive"}),b}finally{p(!1)}},A=async v=>{try{await De.deleteBatch(v),m({title:"Success",description:"Batch deleted successfully"}),await y(w,E)}catch(b){const i=b instanceof Error?b.message:"Failed to delete batch";throw m({title:"Error",description:i,variant:"destructive"}),b}},N=v=>{v>=1&&a&&v<=a.last_page&&y(v,E)},R=()=>{a!=null&&a.next_page_url&&N(w+1)},G=()=>{a!=null&&a.prev_page_url&&N(w-1)},O=v=>{I(v),_(1),y(1,v)},V=()=>{I(""),y(1,"")};return n.useEffect(()=>{y(1,"")},[y]),{batches:t,pagination:a,loading:l,importing:d,error:o,currentPage:w,searchTerm:E,selectedBatchDetail:C,loadingBatchDetail:j,fetchBatches:y,importBatch:B,fetchBatchDetail:F,deleteBatch:A,goToPage:N,goToNextPage:R,goToPrevPage:G,handleSearch:O,clearSearch:V,refetch:()=>y(w,E),setSelectedBatchDetail:f}}function Yt(){var ee,pe,te;const{batches:t,pagination:s,loading:a,importing:r,error:l,currentPage:h,searchTerm:d,selectedBatchDetail:c,loadingBatchDetail:o,importBatch:g,fetchBatchDetail:w,deleteBatch:_,goToPage:E,goToNextPage:I,goToPrevPage:C,handleSearch:f,clearSearch:j,refetch:p}=hr(),[m,y]=n.useState(!1),[B,F]=n.useState(null),[A,N]=n.useState("users"),[R,G]=n.useState(""),[O,V]=n.useState(null),[v,b]=n.useState(null),i=n.useRef(null),S=T=>{var k,D;const P=(k=T.target.files)==null?void 0:k[0];if(P){const U=(D=P.name.split(".").pop())==null?void 0:D.toLowerCase();U==="csv"||U==="xlsx"||U==="xls"?(V(P),b(null)):(alert("Please select a CSV or Excel file"),V(null))}},x=async()=>{if(!O||!R.trim()){alert("Please select a file and enter a batch name");return}try{const T=await g(O,R.trim());b(T),T.success&&setTimeout(()=>{y(!1),M()},3e3)}catch{b({success:!1,message:"Failed to import batch. Please try again."})}},M=()=>{V(null),b(null),G(""),i.current&&(i.current.value="")},$=async T=>{F(T),await w(T.id)},X=async T=>{if(confirm("Are you sure you want to delete this batch? This action cannot be undone."))try{await _(T)}catch{}},J=T=>new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),re=T=>T>0?"bg-green-500":"bg-gray-500";return B&&c?e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(u,{variant:"outline",onClick:()=>{F(null)},children:"← Back to Batches"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c.name}),e.jsxs("p",{className:"text-gray-600",children:["Created on ",J(c.created_at)," • ",((ee=c.contacts)==null?void 0:ee.length)||0," ","users"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{variant:A==="users"?"default":"outline",onClick:()=>N("users"),size:"sm",children:[e.jsx(ut,{className:"mr-2 h-4 w-4"}),"Users (",((pe=c.contacts)==null?void 0:pe.length)||0,")"]}),e.jsxs(u,{variant:A==="campaigns"?"default":"outline",onClick:()=>N("campaigns"),size:"sm",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Campaigns (",c.campaigns.length,")"]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:A==="users"?e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Batch Users"}),e.jsx("p",{className:"text-gray-600",children:"Users imported in this batch"})]}),o?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Q,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading contacts..."})]}):e.jsxs(Ke,{children:[e.jsx(Ge,{children:e.jsxs(we,{children:[e.jsx(se,{children:"Name"}),e.jsx(se,{children:"Email"}),e.jsx(se,{children:"Imported At"})]})}),e.jsx(Xe,{children:((te=c.contacts)==null?void 0:te.map(T=>e.jsxs(we,{children:[e.jsx(ae,{className:"font-medium",children:T.name||"N/A"}),e.jsx(ae,{children:T.email}),e.jsx(ae,{children:J(T.created_at)})]},T.id)))||[]})]}),(!c.contacts||c.contacts.length===0)&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ut,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contacts found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This batch doesn't have any contacts yet."})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Campaign History"}),e.jsx("p",{className:"text-gray-600",children:"Campaigns sent to this batch"})]}),e.jsxs(Ke,{children:[e.jsx(Ge,{children:e.jsxs(we,{children:[e.jsx(se,{children:"Campaign ID"}),e.jsx(se,{children:"Template"}),e.jsx(se,{children:"Subject"}),e.jsx(se,{children:"Sent At"})]})}),e.jsx(Xe,{children:c.campaigns.map(T=>e.jsxs(we,{children:[e.jsxs(ae,{className:"font-medium",children:["#",T.id]}),e.jsx(ae,{children:T.email_template.title}),e.jsx(ae,{children:T.email_template.subject}),e.jsx(ae,{children:J(T.created_at)})]},T.id))})]}),c.campaigns.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ge,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No campaigns sent"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No campaigns have been sent to this batch yet."})]})]})})]}):l?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading batches: ",l]}),e.jsx(u,{onClick:p,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Batches"}),e.jsx("p",{className:"text-gray-600",children:"Manage your user import batches and track campaigns"})]}),e.jsxs(oe,{open:m,onOpenChange:T=>{y(T),T||M()},children:[e.jsx(de,{asChild:!0,children:e.jsxs(u,{children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Import New Batch"]})}),e.jsxs(me,{className:"max-w-md",children:[e.jsxs(he,{children:[e.jsx(ue,{children:"Import User Batch"}),e.jsx(xe,{children:"Upload a CSV or Excel file and give your batch a name to organize your users."})]}),e.jsxs("div",{className:"space-y-4",children:[!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"batch-name",children:"Batch Name"}),e.jsx(ce,{id:"batch-name",value:R,onChange:T=>G(T.target.value),placeholder:"e.g., Q1 2024 Customers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{htmlFor:"file-upload",children:"Select File"}),e.jsx("input",{id:"file-upload",type:"file",ref:i,onChange:S,accept:".csv,.xlsx,.xls",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),O&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:O.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(O.size/1024).toFixed(1)," KB)"]})]})}),e.jsxs(Te,{children:[e.jsx(He,{className:"h-4 w-4"}),e.jsx(Ee,{children:'Make sure your file has columns named "name" and "email". The first row should contain headers.'})]})]}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm",children:['Creating batch "',R,'"...']})]}),e.jsx(kt,{value:void 0,className:"w-full"})]}),v&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Te,{className:v.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[v.success?e.jsx(tt,{className:"h-4 w-4 text-green-600"}):e.jsx(He,{className:"h-4 w-4 text-red-600"}),e.jsx(Ee,{className:v.success?"text-green-800":"text-red-800",children:v.message})]}),v.success&&e.jsxs("div",{className:"text-center p-4 bg-green-100 rounded",children:[e.jsx("div",{className:"font-semibold text-green-800 text-lg",children:v.imported_count||0}),e.jsxs("div",{className:"text-green-600",children:['Users imported to "',R,'"']})]})]})]}),e.jsxs($e,{children:[!v&&e.jsxs(e.Fragment,{children:[e.jsx(u,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(u,{onClick:x,disabled:!O||!R.trim()||r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Import Batch"]})})]}),v&&e.jsx(u,{onClick:()=>y(!1),className:"w-full",children:"Close"})]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(as,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(ce,{placeholder:"Search batches...",value:d,onChange:T=>f(T.target.value),className:"pl-8"}),d&&e.jsx(u,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-6 w-6 p-0",onClick:j,children:e.jsx(Jt,{className:"h-3 w-3"})})]})}),a?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Q,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading batches..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(T=>e.jsxs(be,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ce,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(Se,{className:"text-lg flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-cyan-500"}),T.name]}),e.jsxs(_e,{className:"mt-1",children:["Created: ",J(T.created_at)]})]}),e.jsx(Et,{className:`${re(T.contacts_count)} text-white`,children:T.contacts_count>0?"Active":"Empty"})]})}),e.jsx(ke,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:T.contacts_count}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Users"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.campaigns.length}),e.jsx("div",{className:"text-sm text-green-800",children:"Campaigns Sent"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:J(T.updated_at)})]})]})}),e.jsxs(at,{className:"flex justify-between",children:[e.jsxs(u,{variant:"outline",size:"sm",onClick:()=>$(T),children:[e.jsx(st,{className:"h-3 w-3 mr-1"}),"View Details"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(u,{size:"sm",disabled:T.contacts_count===0,children:[e.jsx(Me,{className:"h-3 w-3 mr-1"}),"Send Campaign"]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>X(T.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ns,{className:"h-3 w-3"})})]})]})]},T.id))}),s&&s.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(u,{variant:"outline",size:"sm",onClick:C,disabled:!s.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(T,P)=>{const k=P+1;return e.jsx(u,{variant:h===k?"default":"outline",size:"sm",onClick:()=>E(k),children:k},k)})}),e.jsx(u,{variant:"outline",size:"sm",onClick:I,disabled:!s.next_page_url,children:"Next"})]})}),t.length===0&&!a&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(ze,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No batches found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:d?"No batches match your search criteria.":"Import your first user batch to get started."}),e.jsxs(u,{onClick:()=>y(!0),children:[e.jsx(Fe,{className:"mr-2 h-4 w-4"}),"Import New Batch"]})]})]})]})}function ur(){const[t,s]=n.useState([]),[a,r]=n.useState([]),[l,h]=n.useState(!0),[d,c]=n.useState(!1),[o,g]=n.useState(null),{toast:w}=Ae(),_=n.useCallback(async()=>{try{h(!0),g(null);const[I,C]=await Promise.all([De.getBatches(1,""),ms.getAllTemplates()]);s(I.data),r(C)}catch(I){const C=I instanceof Error?I.message:"Failed to fetch data";g(C),w({title:"Error",description:C,variant:"destructive"})}finally{h(!1)}},[w]),E=async(I,C)=>{try{c(!0);const f={template_id:C},j=await xt.sendEmailToBatch(I,f);return j.success?w({title:"Campaign Sent",description:j.message||"Email campaign has been sent to the batch successfully."}):w({title:"Campaign Failed",description:j.message||"Failed to send campaign to batch",variant:"destructive"}),j}catch(f){const j=f instanceof Error?f.message:"Failed to send campaign";throw w({title:"Campaign Error",description:j,variant:"destructive"}),f}finally{c(!1)}};return n.useEffect(()=>{_()},[_]),{batches:t,templates:a,loading:l,sending:d,error:o,sendEmailToBatch:E,refetch:_}}function xr(){const{batches:t,templates:s,loading:a,sending:r,error:l,sendEmailToBatch:h,refetch:d}=ur(),[c,o]=n.useState(null),[g,w]=n.useState(null),[_,E]=n.useState(null),I=async()=>{if(!c||!g){alert("Please select both a batch and an email template");return}try{await h(c,g),o(null),w(null)}catch{}},C=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),f=t.find(p=>p.id===c),j=s.find(p=>p.id===g);return l?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading data: ",l]}),e.jsxs(u,{onClick:d,children:[e.jsx(qa,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})}):a?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(Q,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading batches and templates..."})]})}):e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Send Mail to Batch"}),e.jsx("p",{className:"text-gray-600",children:"Select a batch and email template to send a campaign"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(be,{children:[e.jsxs(Ce,{children:[e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-5 w-5 text-cyan-500"}),"Campaign Setup"]}),e.jsx(_e,{children:"Configure your email campaign settings"})]}),e.jsxs(ke,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Select Batch"}),e.jsxs(vt,{value:(c==null?void 0:c.toString())||"",onValueChange:p=>o(Number(p)),children:[e.jsx(Je,{children:e.jsx(Nt,{placeholder:"Choose a batch"})}),e.jsx(Qe,{children:t.map(p=>e.jsx(et,{value:p.id.toString(),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:p.name}),e.jsxs(Et,{variant:"secondary",className:"ml-2",children:[p.contacts_count||0," users"]})]})},p.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(K,{children:"Email Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(vt,{value:(g==null?void 0:g.toString())||"",onValueChange:p=>w(Number(p)),children:[e.jsx(Je,{className:"flex-1",children:e.jsx(Nt,{placeholder:"Choose a template"})}),e.jsx(Qe,{children:s.map(p=>e.jsx(et,{value:p.id.toString(),children:p.title},p.id))})]}),g&&e.jsxs(oe,{children:[e.jsx(de,{asChild:!0,children:e.jsx(u,{variant:"outline",size:"sm",onClick:()=>E(j||null),children:e.jsx(st,{className:"h-4 w-4"})})}),e.jsxs(me,{className:"max-w-2xl",children:[e.jsxs(he,{children:[e.jsx(ue,{children:_==null?void 0:_.title}),e.jsx(xe,{children:"Template Preview"})]}),_&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(K,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:_.subject})]}),e.jsxs("div",{children:[e.jsx(K,{children:"Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:_.body}})]})]})]})]})]})]}),f&&j&&e.jsxs(Te,{children:[e.jsx(tt,{className:"h-4 w-4"}),e.jsxs(Ee,{children:['Ready to send "',j.title,'" to ',f.contacts_count||0,' users in "',f.name,'" batch.']})]}),e.jsx(u,{onClick:I,disabled:!c||!g||r,className:"w-full",children:r?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Campaign..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"Send Campaign"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(be,{children:[e.jsxs(Ce,{children:[e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(ze,{className:"h-5 w-5 text-cyan-500"}),"Available Batches"]}),e.jsx(_e,{children:"Select from your imported user batches"})]}),e.jsx(ke,{children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ze,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No batches available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Import some user batches first."})]}):t.map(p=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${c===p.id?"border-cyan-500 bg-cyan-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o(p.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:p.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",C(p.created_at)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-cyan-600",children:p.contacts_count||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"users"})]})]})},p.id))})})]}),e.jsxs(be,{children:[e.jsxs(Ce,{children:[e.jsxs(Se,{className:"flex items-center gap-2",children:[e.jsx(ge,{className:"h-5 w-5 text-cyan-500"}),"Email Templates"]}),e.jsx(_e,{children:"Choose from your created templates"})]}),e.jsx(ke,{children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ge,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No templates available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create some email templates first."})]}):s.map(p=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${g===p.id?"border-cyan-500 bg-cyan-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>w(p.id),children:[e.jsx("h4",{className:"font-medium",children:p.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:p.subject})]},p.id))})})]})]})]})]})})}function _r(){const[t,s]=n.useState("batches"),a=()=>{switch(t){case"users":return e.jsx(Mn,{});case"templates":return e.jsx(Rn,{});case"campaigns":return e.jsx(mr,{});case"batches":return e.jsx(Yt,{});case"send-to-batch":return e.jsx(xr,{});default:return e.jsx(Yt,{})}};return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsxs("div",{className:"w-64 bg-cyan-500 text-white flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-cyan-400",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Ra,{className:"h-5 w-5"}),e.jsx("h1",{className:"text-lg font-semibold",children:"Email Automation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(oa,{className:"h-10 w-10",children:[e.jsx(da,{src:"/placeholder.svg?height=40&width=40"}),e.jsx(ma,{children:"JD"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"John Doe"}),e.jsx("div",{className:"text-sm text-cyan-200",children:"john.doe@example.com"})]})]})]}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs(u,{variant:t==="batches"?"secondary":"ghost",className:`w-full justify-start ${t==="batches"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("batches"),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"}),"User Batches"]})}),e.jsx("li",{children:e.jsxs(u,{variant:t==="users"?"secondary":"ghost",className:`w-full justify-start ${t==="users"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("users"),children:[e.jsx(ut,{className:"mr-2 h-4 w-4"}),"All Users"]})}),e.jsx("li",{children:e.jsxs(u,{variant:t==="templates"?"secondary":"ghost",className:`w-full justify-start ${t==="templates"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("templates"),children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Email Templates"]})}),e.jsx("li",{children:e.jsxs(u,{variant:t==="send-to-batch"?"secondary":"ghost",className:`w-full justify-start ${t==="send-to-batch"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("send-to-batch"),children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"Send Mail to Batch"]})}),e.jsx("li",{children:e.jsxs(u,{variant:t==="campaigns"?"secondary":"ghost",className:`w-full justify-start ${t==="campaigns"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("campaigns"),children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Campaign History"]})}),e.jsx("li",{children:e.jsxs(u,{variant:"ghost",className:"w-full justify-start text-white hover:bg-cyan-400",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Welcome Email"]})}),e.jsx("li",{children:e.jsxs(u,{variant:"ghost",className:"w-full justify-start text-white hover:bg-cyan-400",children:[e.jsx(ge,{className:"mr-2 h-4 w-4"}),"Follow Up Email"]})}),e.jsx("li",{children:e.jsxs(u,{variant:"ghost",className:"w-full justify-start text-white hover:bg-cyan-400",children:[e.jsx(sn,{className:"mr-2 h-4 w-4"}),"Unsubscribe"]})})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:a()})]})}export{_r as default};
