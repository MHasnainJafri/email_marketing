import{r,j as e,a as Et,U as Ve}from"./app-CHR0SXqx.js";import{a as O,c as q,b as ns,B as x,u as fe,S as sa}from"./button-DBwICrNp.js";import{X as os,c as is,u as aa,R as ra,a as Pt,b as na,V as oa,A as ia,P as la,h as ca,d as da,e as ma,F as ha,D as ua,C as pa,f as xa,g as ga,i as fa,j as ya}from"./index-Bdbyww35.js";import{I as me,P as re,r as ls}from"./index-CpVY-yRb.js";import{D as he,a as ye,b as ue,c as pe,d as xe,e as ge,f as $e}from"./dialog-B_0ndspF.js";import{L as Y}from"./label-C9E-MPFx.js";import{L as J}from"./loader-circle-B-heB7K9.js";import{u as zt,c as va,a as we,b as Z,d as ja,C as ba}from"./index-D4T4N4q_.js";import{u as Na,C as vt}from"./checkbox-CA2GFpcS.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Ot=O("AlignCenter",wa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],$t=O("AlignLeft",Ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Ht=O("AlignRight",Sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Vt=O("Bold",_a);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ta=O("Calendar",ka);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],It=O("ChevronDown",Ea);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cs=O("ChevronUp",Pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Xe=O("CircleAlert",Ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ht=O("CircleCheckBig",Ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ra=O("Clock",Aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ds=O("Copy",Da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ut=O("Eye",La);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],at=O("FileText",Ba);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],Ut=O("Heading1",Fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Wt=O("Heading2",za);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],$a=O("House",Oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],qt=O("Image",Ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Yt=O("Italic",Va);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Kt=O("Link",Ua);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],Xt=O("ListOrdered",Wa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Gt=O("List",qa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ve=O("Mail",Ya);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Ge=O("Package",Ka);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qe=O("Plus",Xa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Za=O("Printer",Ga);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qa=O("RefreshCw",Ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Zt=O("Save",er);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],ms=O("Search",tr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],je=O("Send",sr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],rr=O("SquarePen",ar);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],hs=O("Trash2",nr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Jt=O("Underline",or);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ye=O("Upload",ir);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],cr=O("UserX",lr);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Nt=O("Users",dr),rt=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:t,className:q("w-full caption-bottom text-sm",a),...s})}));rt.displayName="Table";const nt=r.forwardRef(({className:a,...s},t)=>e.jsx("thead",{ref:t,className:q("[&_tr]:border-b",a),...s}));nt.displayName="TableHeader";const ot=r.forwardRef(({className:a,...s},t)=>e.jsx("tbody",{ref:t,className:q("[&_tr:last-child]:border-0",a),...s}));ot.displayName="TableBody";const mr=r.forwardRef(({className:a,...s},t)=>e.jsx("tfoot",{ref:t,className:q("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s}));mr.displayName="TableFooter";const Te=r.forwardRef(({className:a,...s},t)=>e.jsx("tr",{ref:t,className:q("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s}));Te.displayName="TableRow";const se=r.forwardRef(({className:a,...s},t)=>e.jsx("th",{ref:t,className:q("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s}));se.displayName="TableHead";const ae=r.forwardRef(({className:a,...s},t)=>e.jsx("td",{ref:t,className:q("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s}));ae.displayName="TableCell";const hr=r.forwardRef(({className:a,...s},t)=>e.jsx("caption",{ref:t,className:q("mt-4 text-sm text-muted-foreground",a),...s}));hr.displayName="TableCaption";function ur(a,s=[]){let t=[];function n(m,d){const i=r.createContext(d),c=t.length;t=[...t,d];const h=v=>{var u;const{scope:E,children:P,...N}=v,f=((u=E==null?void 0:E[a])==null?void 0:u[c])||i,y=r.useMemo(()=>N,Object.values(N));return e.jsx(f.Provider,{value:y,children:P})};h.displayName=m+"Provider";function j(v,E){var f;const P=((f=E==null?void 0:E[a])==null?void 0:f[c])||i,N=r.useContext(P);if(N)return N;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${m}\``)}return[h,j]}const o=()=>{const m=t.map(d=>r.createContext(d));return function(i){const c=(i==null?void 0:i[a])||m;return r.useMemo(()=>({[`__scope${a}`]:{...i,[a]:c}}),[i,c])}};return o.scopeName=a,[n,pr(o,...s)]}function pr(...a){const s=a[0];if(a.length===1)return s;const t=()=>{const n=a.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(m){const d=n.reduce((i,{useScope:c,scopeName:h})=>{const v=c(m)[`__scope${h}`];return{...i,...v}},{});return r.useMemo(()=>({[`__scope${s.scopeName}`]:d}),[d])}};return t.scopeName=s.scopeName,t}function Qt(a,s){if(typeof a=="function")return a(s);a!=null&&(a.current=s)}function xr(...a){return s=>{let t=!1;const n=a.map(o=>{const m=Qt(o,s);return!t&&typeof m=="function"&&(t=!0),m});if(t)return()=>{for(let o=0;o<n.length;o++){const m=n[o];typeof m=="function"?m():Qt(a[o],null)}}}}function gr(a){const s=fr(a),t=r.forwardRef((n,o)=>{const{children:m,...d}=n,i=r.Children.toArray(m),c=i.find(vr);if(c){const h=c.props.children,j=i.map(v=>v===c?r.Children.count(h)>1?r.Children.only(null):r.isValidElement(h)?h.props.children:null:v);return e.jsx(s,{...d,ref:o,children:r.isValidElement(h)?r.cloneElement(h,void 0,j):null})}return e.jsx(s,{...d,ref:o,children:m})});return t.displayName=`${a}.Slot`,t}function fr(a){const s=r.forwardRef((t,n)=>{const{children:o,...m}=t;if(r.isValidElement(o)){const d=br(o),i=jr(m,o.props);return o.type!==r.Fragment&&(i.ref=n?xr(n,d):d),r.cloneElement(o,i)}return r.Children.count(o)>1?r.Children.only(null):null});return s.displayName=`${a}.SlotClone`,s}var yr=Symbol("radix.slottable");function vr(a){return r.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===yr}function jr(a,s){const t={...s};for(const n in s){const o=a[n],m=s[n];/^on[A-Z]/.test(n)?o&&m?t[n]=(...i)=>{const c=m(...i);return o(...i),c}:o&&(t[n]=o):n==="style"?t[n]={...o,...m}:n==="className"&&(t[n]=[o,m].filter(Boolean).join(" "))}return{...a,...t}}function br(a){var n,o;let s=(n=Object.getOwnPropertyDescriptor(a.props,"ref"))==null?void 0:n.get,t=s&&"isReactWarning"in s&&s.isReactWarning;return t?a.ref:(s=(o=Object.getOwnPropertyDescriptor(a,"ref"))==null?void 0:o.get,t=s&&"isReactWarning"in s&&s.isReactWarning,t?a.props.ref:a.props.ref||a.ref)}var Nr=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],us=Nr.reduce((a,s)=>{const t=gr(`Primitive.${s}`),n=r.forwardRef((o,m)=>{const{asChild:d,...i}=o,c=d?t:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(c,{...i,ref:m})});return n.displayName=`Primitive.${s}`,{...a,[s]:n}},{}),Mt="Progress",At=100,[wr,zn]=ur(Mt),[Cr,Sr]=wr(Mt),ps=r.forwardRef((a,s)=>{const{__scopeProgress:t,value:n=null,max:o,getValueLabel:m=_r,...d}=a;(o||o===0)&&!es(o)&&console.error(kr(`${o}`,"Progress"));const i=es(o)?o:At;n!==null&&!ts(n,i)&&console.error(Tr(`${n}`,"Progress"));const c=ts(n,i)?n:null,h=it(c)?m(c,i):void 0;return e.jsx(Cr,{scope:t,value:c,max:i,children:e.jsx(us.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":it(c)?c:void 0,"aria-valuetext":h,role:"progressbar","data-state":fs(c,i),"data-value":c??void 0,"data-max":i,...d,ref:s})})});ps.displayName=Mt;var xs="ProgressIndicator",gs=r.forwardRef((a,s)=>{const{__scopeProgress:t,...n}=a,o=Sr(xs,t);return e.jsx(us.div,{"data-state":fs(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...n,ref:s})});gs.displayName=xs;function _r(a,s){return`${Math.round(a/s*100)}%`}function fs(a,s){return a==null?"indeterminate":a===s?"complete":"loading"}function it(a){return typeof a=="number"}function es(a){return it(a)&&!isNaN(a)&&a>0}function ts(a,s){return it(a)&&!isNaN(a)&&a<=s&&a>=0}function kr(a,s){return`Invalid prop \`max\` of value \`${a}\` supplied to \`${s}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${At}\`.`}function Tr(a,s){return`Invalid prop \`value\` of value \`${a}\` supplied to \`${s}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${At} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ys=ps,Er=gs;const Rt=r.forwardRef(({className:a,value:s,...t},n)=>e.jsx(ys,{ref:n,className:q("relative h-4 w-full overflow-hidden rounded-full bg-secondary",a),...t,children:e.jsx(Er,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));Rt.displayName=ys.displayName;const Pr=ns("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),be=r.forwardRef(({className:a,variant:s,...t},n)=>e.jsx("div",{ref:n,role:"alert",className:q(Pr({variant:s}),a),...t}));be.displayName="Alert";const Ir=r.forwardRef(({className:a,...s},t)=>e.jsx("h5",{ref:t,className:q("mb-1 font-medium leading-none tracking-tight",a),...s}));Ir.displayName="AlertTitle";const Ne=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:q("text-sm [&_p]:leading-relaxed",a),...s}));Ne.displayName="AlertDescription";const Dt="/api",G=Et.create({baseURL:Dt,headers:{Accept:"application/json","Content-Type":"application/json"}}),Oe={getContacts:async(a=1,s="")=>{const t=new URLSearchParams({page:a.toString()});return s.trim()&&t.append("search",s.trim()),(await G.get(`/contacts?${t.toString()}`)).data},getAllContacts:async()=>(await G.get("/contacts?per_page=1000")).data.data||[],importContacts:async a=>{const s=new FormData;return s.append("file",a),(await Et.post(`${Dt}/contacts/import`,s,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data},createContact:async a=>(await G.post("/contacts",a)).data,updateContact:async(a,s)=>(await G.put(`/contacts/${a}`,s)).data,deleteContact:async a=>(await G.delete(`/contacts/${a}`)).data},Ue={getBatches:async(a=1,s="")=>{const t=new URLSearchParams({page:a.toString()});return s.trim()&&t.append("search",s.trim()),(await G.get(`/batches?${t.toString()}`)).data},getBatchDetail:async a=>(await G.get(`/batches/${a}`)).data,importBatch:async(a,s)=>{const t=new FormData;return t.append("file",a),t.append("batch_name",s),(await Et.post(`${Dt}/contacts/import`,t,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data},getBatchContacts:async a=>(await G.get(`/batches/${a}/contacts`)).data,deleteBatch:async a=>(await G.delete(`/batches/${a}`)).data},Ee={getTemplates:async(a=1)=>(await G.get(`/templates?page=${a}`)).data,getAllTemplates:async()=>(await G.get("/templates?per_page=1000")).data.data||[],createTemplate:async a=>(await G.post("/templates",a)).data,updateTemplate:async(a,s)=>(await G.put(`/templates/${a}`,s)).data,deleteTemplate:async a=>(await G.delete(`/templates/${a}`)).data,getTemplate:async a=>(await G.get(`/templates/${a}`)).data},lt={getCampaigns:async(a=1)=>(await G.get(`/campaigns?page=${a}`)).data,createCampaign:async a=>(await G.post("/send-email",a)).data,sendEmailToBatch:async(a,s)=>(await G.post(`/send-email/batch/${a}`,s)).data},Mr=1,Ar=1e6;let jt=0;function Rr(){return jt=(jt+1)%Number.MAX_SAFE_INTEGER,jt.toString()}const bt=new Map,ss=a=>{if(bt.has(a))return;const s=setTimeout(()=>{bt.delete(a),Ke({type:"REMOVE_TOAST",toastId:a})},Ar);bt.set(a,s)},Dr=(a,s)=>{switch(s.type){case"ADD_TOAST":return{...a,toasts:[s.toast,...a.toasts].slice(0,Mr)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(t=>t.id===s.toast.id?{...t,...s.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=s;return t?ss(t):a.toasts.forEach(n=>{ss(n.id)}),{...a,toasts:a.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return s.toastId===void 0?{...a,toasts:[]}:{...a,toasts:a.toasts.filter(t=>t.id!==s.toastId)}}},tt=[];let st={toasts:[]};function Ke(a){st=Dr(st,a),tt.forEach(s=>{s(st)})}function Lr({...a}){const s=Rr(),t=o=>Ke({type:"UPDATE_TOAST",toast:{...o,id:s}}),n=()=>Ke({type:"DISMISS_TOAST",toastId:s});return Ke({type:"ADD_TOAST",toast:{...a,id:s,open:!0,onOpenChange:o=>{o||n()}}}),{id:s,dismiss:n,update:t}}function Le(){const[a,s]=r.useState(st);return r.useEffect(()=>(tt.push(s),()=>{const t=tt.indexOf(s);t>-1&&tt.splice(t,1)}),[a]),{...a,toast:Lr,dismiss:t=>Ke({type:"DISMISS_TOAST",toastId:t})}}function Br(){const[a,s]=r.useState([]),[t,n]=r.useState(null),[o,m]=r.useState(!0),[d,i]=r.useState(!1),[c,h]=r.useState(null),[j,v]=r.useState(1),[E,P]=r.useState(""),[N,f]=r.useState(""),{toast:y}=Le(),u=r.useRef();r.useEffect(()=>(u.current&&clearTimeout(u.current),u.current=setTimeout(()=>{f(E)},500),()=>{u.current&&clearTimeout(u.current)}),[E]);const p=r.useCallback(async(w=1,S="")=>{try{m(!0),h(null);const l=await Oe.getContacts(w,S);s(l.data),n({current_page:l.current_page,first_page_url:l.first_page_url,from:l.from,last_page:l.last_page,last_page_url:l.last_page_url,links:l.links,next_page_url:l.next_page_url,path:l.path,per_page:l.per_page,prev_page_url:l.prev_page_url,to:l.to,total:l.total}),v(w)}catch(l){const _=l instanceof Error?l.message:"Failed to fetch contacts";h(_),y({title:"Error",description:_,variant:"destructive"})}finally{m(!1)}},[y]),b=async w=>{try{i(!0);const S=await Oe.importContacts(w);return S.success?(y({title:"Import Successful",description:`Successfully imported ${S.imported_count||0} contacts${S.failed_count?`. ${S.failed_count} failed.`:""}`}),await p(1,N)):y({title:"Import Failed",description:S.message||"Failed to import contacts",variant:"destructive"}),S}catch(S){const l=S instanceof Error?S.message:"Failed to import contacts";throw y({title:"Import Error",description:l,variant:"destructive"}),S}finally{i(!1)}};r.useEffect(()=>{v(1),p(1,N)},[N,p]),r.useEffect(()=>{p(1,"")},[]);const z=async w=>{try{await Oe.createContact(w),y({title:"Success",description:"Contact created successfully"}),await p(j,N)}catch(S){const l=S instanceof Error?S.message:"Failed to create contact";throw y({title:"Error",description:l,variant:"destructive"}),S}},$=async(w,S)=>{try{await Oe.updateContact(w,S),y({title:"Success",description:"Contact updated successfully"}),await p(j,N)}catch(l){const _=l instanceof Error?l.message:"Failed to update contact";throw y({title:"Error",description:_,variant:"destructive"}),l}},R=async w=>{try{await Oe.deleteContact(w),y({title:"Success",description:"Contact deleted successfully"}),await p(j,N)}catch(S){const l=S instanceof Error?S.message:"Failed to delete contact";throw y({title:"Error",description:l,variant:"destructive"}),S}},C=w=>{w>=1&&t&&w<=t.last_page&&p(w,N)};return{contacts:a,pagination:t,loading:o,importing:d,error:c,currentPage:j,searchTerm:E,debouncedSearchTerm:N,fetchContacts:p,importContacts:b,createContact:z,updateContact:$,deleteContact:R,goToPage:C,goToNextPage:()=>{t!=null&&t.next_page_url&&C(j+1)},goToPrevPage:()=>{t!=null&&t.prev_page_url&&C(j-1)},handleSearch:w=>{P(w)},clearSearch:()=>{P(""),f("")},refetch:()=>p(j,N)}}function Fr(){const{contacts:a,pagination:s,loading:t,importing:n,error:o,currentPage:m,searchTerm:d,debouncedSearchTerm:i,importContacts:c,createContact:h,goToPage:j,goToNextPage:v,goToPrevPage:E,handleSearch:P,clearSearch:N,refetch:f}=Br(),[y,u]=r.useState(null),[p,b]=r.useState("asc"),[z,$]=r.useState(!1),[R,C]=r.useState(!1),[D,B]=r.useState({name:"",email:""}),[T,F]=r.useState(null),[w,S]=r.useState(null),l=r.useRef(null),{toast:_}=Le(),g=[...a].sort((A,I)=>{if(!y)return 0;const L=A[y],K=I[y];return L===null&&K===null?0:L===null?p==="asc"?1:-1:K===null||L<K?p==="asc"?-1:1:L>K?p==="asc"?1:-1:0}),M=A=>{y===A?b(I=>I==="asc"?"desc":"asc"):(u(A),b("asc"))},H=A=>{var L,K;const I=(L=A.target.files)==null?void 0:L[0];if(I){const V=(K=I.name.split(".").pop())==null?void 0:K.toLowerCase();V==="csv"||V==="xlsx"||V==="xls"?(F(I),S(null)):(_({title:"Invalid file format",description:"Please upload a CSV or Excel file (.csv, .xlsx, .xls).",variant:"destructive"}),F(null))}},X=async()=>{if(!T){_({title:"No file selected",description:"Please select a file to import.",variant:"destructive"});return}try{const A=await c(T);S(A),A.success&&setTimeout(()=>{C(!1),F(null),S(null)},3e3)}catch{S({success:!1,message:"Failed to import contacts. Please try again."})}},Q=()=>{F(null),S(null),l.current&&(l.current.value="")},ne=()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Search:"}),e.jsxs("div",{className:"relative",children:[e.jsx(ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Search users...",value:d,onChange:A=>P(A.target.value),className:"pl-8 w-64"}),d&&e.jsx(x,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-6 w-6 p-0",onClick:N,children:e.jsx(os,{className:"h-3 w-3"})})]}),i&&e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:['Searching: "',i,'"']})]}),oe=A=>{_({title:`Export ${A}`,description:`User data exported as ${A} format.`})},_e=async()=>{if(!D.name||!D.email){_({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{await h(D),B({name:"",email:""}),$(!1)}catch{}},ie=A=>new Date(A).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),ee=({field:A})=>y!==A?null:p==="asc"?e.jsx(cs,{className:"h-4 w-4"}):e.jsx(It,{className:"h-4 w-4"});return o?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading contacts: ",o]}),e.jsx(x,{onClick:f,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Users"}),e.jsx("p",{className:"text-gray-600",children:"Manage your email subscribers"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(he,{open:z,onOpenChange:$,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(x,{variant:"outline",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Add Contact"]})}),e.jsxs(ue,{children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Add New Contact"}),e.jsx(ge,{children:"Add a new contact to your email list."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"contact-name",children:"Name"}),e.jsx(me,{id:"contact-name",value:D.name,onChange:A=>B({...D,name:A.target.value}),placeholder:"Enter contact name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"contact-email",children:"Email"}),e.jsx(me,{id:"contact-email",type:"email",value:D.email,onChange:A=>B({...D,email:A.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(x,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(x,{onClick:_e,children:"Add Contact"})]})]})]})]}),e.jsxs(he,{open:R,onOpenChange:A=>{C(A),A||Q()},children:[e.jsx(ye,{asChild:!0,children:e.jsxs(x,{className:"bg-gray-600 hover:bg-gray-700",children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Import Excel"]})}),e.jsxs(ue,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Import Contacts"}),e.jsx(ge,{children:"Upload a CSV or Excel file to import contacts. The file should contain columns for Name and Email."})]}),e.jsxs("div",{className:"space-y-4",children:[!w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"file-upload",children:"Select File"}),e.jsx("input",{id:"file-upload",type:"file",ref:l,onChange:H,accept:".csv,.xlsx,.xls",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),T&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:T.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(T.size/1024).toFixed(1)," KB)"]})]})}),e.jsxs(be,{children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx(Ne,{children:'Make sure your file has columns named "name" and "email". The first row should contain headers.'})]})]}),n&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Importing contacts..."})]}),e.jsx(Rt,{value:void 0,className:"w-full"})]}),w&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(be,{className:w.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[w.success?e.jsx(ht,{className:"h-4 w-4 text-green-600"}):e.jsx(Xe,{className:"h-4 w-4 text-red-600"}),e.jsx(Ne,{className:w.success?"text-green-800":"text-red-800",children:w.message})]}),w.success&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-green-100 rounded",children:[e.jsx("div",{className:"font-semibold text-green-800",children:w.imported_count||0}),e.jsx("div",{className:"text-green-600",children:"Imported"})]}),w.failed_count&&w.failed_count>0&&e.jsxs("div",{className:"text-center p-2 bg-red-100 rounded",children:[e.jsx("div",{className:"font-semibold text-red-800",children:w.failed_count}),e.jsx("div",{className:"text-red-600",children:"Failed"})]})]}),w.errors&&w.errors.length>0&&e.jsxs("div",{className:"max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Errors:"}),e.jsx("ul",{className:"text-xs text-red-600 space-y-1",children:w.errors.map((A,I)=>e.jsxs("li",{children:["â€¢ ",A]},I))})]})]})]}),e.jsxs($e,{children:[!w&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(x,{onClick:X,disabled:!T||n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Import"]})})]}),w&&e.jsx(x,{onClick:()=>C(!1),className:"w-full",children:"Close"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Data"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>oe("copy"),children:[e.jsx(ds,{className:"mr-1 h-3 w-3"}),"Copy"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>oe("CSV"),children:[e.jsx(at,{className:"mr-1 h-3 w-3"}),"CSV"]}),e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>oe("print"),children:[e.jsx(Za,{className:"mr-1 h-3 w-3"}),"Print"]})]}),e.jsx(ne,{})]})]}),e.jsx("div",{className:"overflow-x-auto",children:t?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading contacts..."})]}):e.jsxs(rt,{children:[e.jsx(nt,{children:e.jsxs(Te,{children:[e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",e.jsx(ee,{field:"name"})]})}),e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("email"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Email",e.jsx(ee,{field:"email"})]})}),e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("created_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Created At",e.jsx(ee,{field:"created_at"})]})}),e.jsx(se,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("updated_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Updated At",e.jsx(ee,{field:"updated_at"})]})})]})}),e.jsx(ot,{children:g.map(A=>e.jsxs(Te,{children:[e.jsx(ae,{className:"font-medium",children:A.name||"N/A"}),e.jsx(ae,{children:A.email}),e.jsx(ae,{children:ie(A.created_at)}),e.jsx(ae,{children:ie(A.updated_at)})]},A.id))})]})}),e.jsxs("div",{className:"p-4 border-t flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:s&&e.jsxs(e.Fragment,{children:["Showing ",s.from," to ",s.to," of ",s.total," entries (Page"," ",s.current_page," of ",s.last_page,")"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:E,disabled:!(s!=null&&s.prev_page_url),children:"Previous"}),s&&s.last_page>1&&e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(A,I)=>{const L=I+1;return e.jsx(x,{variant:m===L?"default":"outline",size:"sm",onClick:()=>j(L),children:L},L)})}),e.jsx(x,{variant:"outline",size:"sm",onClick:v,disabled:!(s!=null&&s.next_page_url),children:"Next"})]})]})]})]})}const Pe=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:q("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s}));Pe.displayName="Card";const Ie=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:q("flex flex-col space-y-1.5 p-6",a),...s}));Ie.displayName="CardHeader";const Me=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:q("text-2xl font-semibold leading-none tracking-tight",a),...s}));Me.displayName="CardTitle";const Ae=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:q("text-sm text-muted-foreground",a),...s}));Ae.displayName="CardDescription";const Re=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:q("p-6 pt-0",a),...s}));Re.displayName="CardContent";const pt=r.forwardRef(({className:a,...s},t)=>e.jsx("div",{ref:t,className:q("flex items-center p-6 pt-0",a),...s}));pt.displayName="CardFooter";function zr(){const[a,s]=r.useState([]),[t,n]=r.useState(null),[o,m]=r.useState(!0),[d,i]=r.useState(!1),[c,h]=r.useState(!1),[j,v]=r.useState(!1),[E,P]=r.useState(null),[N,f]=r.useState(1),{toast:y}=Le(),u=r.useCallback(async(B=1)=>{try{m(!0),P(null);const T=await Ee.getTemplates(B);s(T.data),n({current_page:T.current_page,first_page_url:T.first_page_url,from:T.from,last_page:T.last_page,last_page_url:T.last_page_url,links:T.links,next_page_url:T.next_page_url,path:T.path,per_page:T.per_page,prev_page_url:T.prev_page_url,to:T.to,total:T.total}),f(B)}catch(T){const F=T instanceof Error?T.message:"Failed to fetch templates";P(F),y({title:"Error",description:F,variant:"destructive"})}finally{m(!1)}},[y]),p=async B=>{try{i(!0);const T=await Ee.createTemplate(B);return y({title:"Success",description:"Template created successfully"}),await u(N),T}catch(T){const F=T instanceof Error?T.message:"Failed to create template";throw y({title:"Error",description:F,variant:"destructive"}),T}finally{i(!1)}},b=async(B,T)=>{try{h(!0),await Ee.updateTemplate(B,T),y({title:"Success",description:"Template updated successfully"}),await u(N)}catch(F){const w=F instanceof Error?F.message:"Failed to update template";throw y({title:"Error",description:w,variant:"destructive"}),F}finally{h(!1)}},z=async B=>{try{v(!0),await Ee.deleteTemplate(B),y({title:"Success",description:"Template deleted successfully"}),await u(N)}catch(T){const F=T instanceof Error?T.message:"Failed to delete template";throw y({title:"Error",description:F,variant:"destructive"}),T}finally{v(!1)}},$=async B=>{try{const T={title:`${B.title} (Copy)`,subject:B.subject,body:B.body};await p(T)}catch(T){throw T}},R=B=>{B>=1&&t&&B<=t.last_page&&u(B)},C=()=>{t!=null&&t.next_page_url&&R(N+1)},D=()=>{t!=null&&t.prev_page_url&&R(N-1)};return r.useEffect(()=>{u(1)},[u]),{templates:a,pagination:t,loading:o,creating:d,updating:c,deleting:j,error:E,currentPage:N,fetchTemplates:u,createTemplate:p,updateTemplate:b,deleteTemplate:z,duplicateTemplate:$,goToPage:R,goToNextPage:C,goToPrevPage:D,refetch:()=>u(N)}}function Or(){const{templates:a,pagination:s,loading:t,creating:n,updating:o,deleting:m,error:d,currentPage:i,createTemplate:c,updateTemplate:h,deleteTemplate:j,duplicateTemplate:v,goToPage:E,goToNextPage:P,goToPrevPage:N,refetch:f}=zr(),[y,u]=r.useState(!1),[p,b]=r.useState(null),[z,$]=r.useState(null),[R,C]=r.useState({title:"",subject:"",body:""}),D=async()=>{if(!R.title||!R.subject||!R.body){alert("Please fill in all fields");return}try{await c(R),C({title:"",subject:"",body:""}),u(!1)}catch{}},B=async()=>{if(p)try{await h(p.id,{title:p.title,subject:p.subject,body:p.body}),b(null)}catch{}},T=async l=>{if(confirm("Are you sure you want to delete this template?"))try{await j(l)}catch{}},F=async l=>{try{await v(l)}catch{}},w=l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),S=(l,_=!1)=>{const g=`<span style="background-color: #e0f2fe; padding: 2px 4px; border-radius: 3px; font-weight: bold;">{{${l}}}</span>`;document.execCommand("insertHTML",!1,g)};return d?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading templates: ",d]}),e.jsx(x,{onClick:f,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Templates"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email templates"})]}),e.jsxs(he,{open:y,onOpenChange:u,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(x,{disabled:t,children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Create Template"]})}),e.jsxs(ue,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Create New Email Template"}),e.jsx(ge,{children:"Create a new email template for your campaigns."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"template-title",children:"Template Title"}),e.jsx(me,{id:"template-title",value:R.title,onChange:l=>C({...R,title:l.target.value}),placeholder:"Enter template title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"template-subject",children:"Subject Line"}),e.jsx(me,{id:"template-subject",value:R.subject,onChange:l=>C({...R,subject:l.target.value}),placeholder:"Enter email subject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Email Body"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>S("name"),children:["Add ","{{ name }}"]}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>S("email"),children:["Add ","{{ email }}"]}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>S("company"),children:["Add ","{{ company }}"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("bold"),className:"h-8 w-8 p-0",title:"Bold",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("italic"),className:"h-8 w-8 p-0",title:"Italic",children:e.jsx(Yt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("underline"),className:"h-8 w-8 p-0",title:"Underline",children:e.jsx(Jt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h1>");const l=window.getSelection();if(l&&l.rangeCount>0){const g=l.getRangeAt(0).commonAncestorContainer.parentElement;g&&g.tagName==="H1"&&(g.style.fontSize="2em",g.style.fontWeight="bold",g.style.marginBottom="0.5em")}},className:"h-8 px-2",title:"Heading 1",children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h2>");const l=window.getSelection();if(l&&l.rangeCount>0){const g=l.getRangeAt(0).commonAncestorContainer.parentElement;g&&g.tagName==="H2"&&(g.style.fontSize="1.5em",g.style.fontWeight="bold",g.style.marginBottom="0.4em")}},className:"h-8 px-2",title:"Heading 2",children:e.jsx(Wt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyLeft"),className:"h-8 w-8 p-0",title:"Align Left",children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyCenter"),className:"h-8 w-8 p-0",title:"Align Center",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyRight"),className:"h-8 w-8 p-0",title:"Align Right",children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertUnorderedList"),className:"h-8 w-8 p-0",title:"Bullet List",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertOrderedList"),className:"h-8 w-8 p-0",title:"Numbered List",children:e.jsx(Xt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const l=document.createElement("input");l.type="file",l.accept="image/*",l.onchange=async _=>{var M;const g=(M=_.target.files)==null?void 0:M[0];if(g)try{const H=new FormData;H.append("file",g);const X=await fetch("/api/store-file",{method:"POST",body:H});if(X.ok){const ne=(await X.json()).url;document.execCommand("insertImage",!1,ne)}else alert("Failed to upload image")}catch(H){console.error("Upload error:",H),alert("Error uploading image")}},l.click()},className:"h-8 w-8 p-0",title:"Insert Image",children:e.jsx(qt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const l=prompt("Enter link URL:");l&&document.execCommand("createLink",!1,l)},className:"h-8 w-8 p-0",title:"Insert Link",children:e.jsx(Kt,{className:"h-4 w-4"})})]}),e.jsx("div",{contentEditable:!0,className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif"},onInput:l=>{const _=l.currentTarget.innerHTML;C({...R,body:_})},dangerouslySetInnerHTML:{__html:R.body||"<p>Write your email content here...</p><p>Use the toolbar above to format your text, add images, and create beautiful emails!</p>"},suppressContentEditableWarning:!0})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Use variables like ","{{ name }}",", ","{{ email }}",", ","{{ company }}"," for personalization. They will be replaced with actual values when sending."]})]})]}),e.jsxs($e,{children:[e.jsx(x,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(x,{onClick:D,disabled:n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Create Template"]})})]})]})]})]}),t?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading templates..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(l=>e.jsxs(Pe,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ie,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(Me,{className:"text-lg",children:l.title}),e.jsxs(Ae,{className:"mt-1",children:["Created: ",w(l.created_at)]})]})})}),e.jsx(Re,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Subject:"}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:l.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Content Preview:"}),e.jsx("div",{className:"text-sm text-gray-600 line-clamp-3",dangerouslySetInnerHTML:{__html:l.body.replace(/<[^>]*>/g,"").substring(0,100)+"..."}})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:w(l.updated_at)})]})]})}),e.jsxs(pt,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(he,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>$(l),children:e.jsx(ut,{className:"h-3 w-3"})})}),e.jsxs(ue,{className:"max-w-2xl",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:z==null?void 0:z.title}),e.jsx(ge,{children:"Template Preview"})]}),z&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:z.subject})]}),e.jsxs("div",{children:[e.jsx(Y,{children:"Email Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:z.body}})]})]})]})]}),e.jsxs(he,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>b({...l}),children:e.jsx(rr,{className:"h-3 w-3"})})}),e.jsxs(ue,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Edit Template"}),e.jsx(ge,{children:"Make changes to your email template."})]}),p&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Template Title"}),e.jsx(me,{value:p.title,onChange:_=>b({...p,title:_.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Subject Line"}),e.jsx(me,{value:p.subject,onChange:_=>b({...p,subject:_.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Email Body"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>S("name",!0),children:["Add ","{{ name }}"]}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>S("email",!0),children:["Add ","{{ email }}"]}),e.jsxs(x,{type:"button",variant:"outline",size:"sm",onClick:()=>S("company",!0),children:["Add ","{{ company }}"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("bold"),className:"h-8 w-8 p-0",title:"Bold",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("italic"),className:"h-8 w-8 p-0",title:"Italic",children:e.jsx(Yt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("underline"),className:"h-8 w-8 p-0",title:"Underline",children:e.jsx(Jt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h1>");const _=window.getSelection();if(_&&_.rangeCount>0){const M=_.getRangeAt(0).commonAncestorContainer.parentElement;M&&M.tagName==="H1"&&(M.style.fontSize="2em",M.style.fontWeight="bold",M.style.marginBottom="0.5em")}},className:"h-8 px-2",title:"Heading 1",children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h2>");const _=window.getSelection();if(_&&_.rangeCount>0){const M=_.getRangeAt(0).commonAncestorContainer.parentElement;M&&M.tagName==="H2"&&(M.style.fontSize="1.5em",M.style.fontWeight="bold",M.style.marginBottom="0.4em")}},className:"h-8 px-2",title:"Heading 2",children:e.jsx(Wt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyLeft"),className:"h-8 w-8 p-0",title:"Align Left",children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyCenter"),className:"h-8 w-8 p-0",title:"Align Center",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyRight"),className:"h-8 w-8 p-0",title:"Align Right",children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertUnorderedList"),className:"h-8 w-8 p-0",title:"Bullet List",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertOrderedList"),className:"h-8 w-8 p-0",title:"Numbered List",children:e.jsx(Xt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const _=document.createElement("input");_.type="file",_.accept="image/*",_.onchange=async g=>{var H;const M=(H=g.target.files)==null?void 0:H[0];if(M)try{const X=new FormData;X.append("file",M);const Q=await fetch("/api/store-file",{method:"POST",body:X});if(Q.ok){const oe=(await Q.json()).url;document.execCommand("insertImage",!1,oe)}else alert("Failed to upload image")}catch(X){console.error("Upload error:",X),alert("Error uploading image")}},_.click()},className:"h-8 w-8 p-0",title:"Insert Image",children:e.jsx(qt,{className:"h-4 w-4"})}),e.jsx(x,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const _=prompt("Enter link URL:");_&&document.execCommand("createLink",!1,_)},className:"h-8 w-8 p-0",title:"Insert Link",children:e.jsx(Kt,{className:"h-4 w-4"})})]}),e.jsx("div",{contentEditable:!0,className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif"},onInput:_=>{const g=_.currentTarget.innerHTML;b({...p,body:g})},dangerouslySetInnerHTML:{__html:p.body},suppressContentEditableWarning:!0})]})]})]})]}),e.jsxs($e,{children:[e.jsx(x,{variant:"outline",onClick:()=>b(null),children:"Cancel"}),e.jsx(x,{onClick:B,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zt,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>F(l),disabled:n,children:e.jsx(ds,{className:"h-3 w-3"})})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>T(l.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:m,children:e.jsx(hs,{className:"h-3 w-3"})})]})]},l.id))}),s&&s.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:N,disabled:!s.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(l,_)=>{const g=_+1;return e.jsx(x,{variant:i===g?"default":"outline",size:"sm",onClick:()=>E(g),children:g},g)})}),e.jsx(x,{variant:"outline",size:"sm",onClick:P,disabled:!s.next_page_url,children:"Next"})]})}),a.length===0&&!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(qe,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first email template."}),e.jsxs(x,{onClick:()=>u(!0),children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Create Template"]})]})]})]})}const $r=ns("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Lt({className:a,variant:s,...t}){return e.jsx("div",{className:q($r({variant:s}),a),...t})}function as(a,[s,t]){return Math.min(t,Math.max(s,a))}var Hr=[" ","Enter","ArrowUp","ArrowDown"],Vr=[" ","Enter"],et="Select",[xt,gt,Ur]=na(et),[He,On]=va(et,[Ur,is]),ft=is(),[Wr,Ce]=He(et),[qr,Yr]=He(et),vs=a=>{const{__scopeSelect:s,children:t,open:n,defaultOpen:o,onOpenChange:m,value:d,defaultValue:i,onValueChange:c,dir:h,name:j,autoComplete:v,disabled:E,required:P,form:N}=a,f=ft(s),[y,u]=r.useState(null),[p,b]=r.useState(null),[z,$]=r.useState(!1),R=aa(h),[C=!1,D]=zt({prop:n,defaultProp:o,onChange:m}),[B,T]=zt({prop:d,defaultProp:i,onChange:c}),F=r.useRef(null),w=y?N||!!y.closest("form"):!0,[S,l]=r.useState(new Set),_=Array.from(S).map(g=>g.props.value).join(";");return e.jsx(ra,{...f,children:e.jsxs(Wr,{required:P,scope:s,trigger:y,onTriggerChange:u,valueNode:p,onValueNodeChange:b,valueNodeHasChildren:z,onValueNodeHasChildrenChange:$,contentId:Pt(),value:B,onValueChange:T,open:C,onOpenChange:D,dir:R,triggerPointerDownPosRef:F,disabled:E,children:[e.jsx(xt.Provider,{scope:s,children:e.jsx(qr,{scope:a.__scopeSelect,onNativeOptionAdd:r.useCallback(g=>{l(M=>new Set(M).add(g))},[]),onNativeOptionRemove:r.useCallback(g=>{l(M=>{const H=new Set(M);return H.delete(g),H})},[]),children:t})}),w?e.jsxs(Us,{"aria-hidden":!0,required:P,tabIndex:-1,name:j,autoComplete:v,value:B,onChange:g=>T(g.target.value),disabled:E,form:N,children:[B===void 0?e.jsx("option",{value:""}):null,Array.from(S)]},_):null]})})};vs.displayName=et;var js="SelectTrigger",bs=r.forwardRef((a,s)=>{const{__scopeSelect:t,disabled:n=!1,...o}=a,m=ft(t),d=Ce(js,t),i=d.disabled||n,c=fe(s,d.onTriggerChange),h=gt(t),j=r.useRef("touch"),[v,E,P]=Ws(f=>{const y=h().filter(b=>!b.disabled),u=y.find(b=>b.value===d.value),p=qs(y,f,u);p!==void 0&&d.onValueChange(p.value)}),N=f=>{i||(d.onOpenChange(!0),P()),f&&(d.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(ia,{asChild:!0,...m,children:e.jsx(re.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":Vs(d.value)?"":void 0,...o,ref:c,onClick:Z(o.onClick,f=>{f.currentTarget.focus(),j.current!=="mouse"&&N(f)}),onPointerDown:Z(o.onPointerDown,f=>{j.current=f.pointerType;const y=f.target;y.hasPointerCapture(f.pointerId)&&y.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(N(f),f.preventDefault())}),onKeyDown:Z(o.onKeyDown,f=>{const y=v.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&E(f.key),!(y&&f.key===" ")&&Hr.includes(f.key)&&(N(),f.preventDefault())})})})});bs.displayName=js;var Ns="SelectValue",ws=r.forwardRef((a,s)=>{const{__scopeSelect:t,className:n,style:o,children:m,placeholder:d="",...i}=a,c=Ce(Ns,t),{onValueNodeHasChildrenChange:h}=c,j=m!==void 0,v=fe(s,c.onValueNodeChange);return we(()=>{h(j)},[h,j]),e.jsx(re.span,{...i,ref:v,style:{pointerEvents:"none"},children:Vs(c.value)?e.jsx(e.Fragment,{children:d}):m})});ws.displayName=Ns;var Kr="SelectIcon",Cs=r.forwardRef((a,s)=>{const{__scopeSelect:t,children:n,...o}=a;return e.jsx(re.span,{"aria-hidden":!0,...o,ref:s,children:n||"â–¼"})});Cs.displayName=Kr;var Xr="SelectPortal",Ss=a=>e.jsx(la,{asChild:!0,...a});Ss.displayName=Xr;var De="SelectContent",_s=r.forwardRef((a,s)=>{const t=Ce(De,a.__scopeSelect),[n,o]=r.useState();if(we(()=>{o(new DocumentFragment)},[]),!t.open){const m=n;return m?ls.createPortal(e.jsx(ks,{scope:a.__scopeSelect,children:e.jsx(xt.Slot,{scope:a.__scopeSelect,children:e.jsx("div",{children:a.children})})}),m):null}return e.jsx(Ts,{...a,ref:s})});_s.displayName=De;var le=10,[ks,Se]=He(De),Gr="SelectContentImpl",Ts=r.forwardRef((a,s)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:m,onPointerDownOutside:d,side:i,sideOffset:c,align:h,alignOffset:j,arrowPadding:v,collisionBoundary:E,collisionPadding:P,sticky:N,hideWhenDetached:f,avoidCollisions:y,...u}=a,p=Ce(De,t),[b,z]=r.useState(null),[$,R]=r.useState(null),C=fe(s,I=>z(I)),[D,B]=r.useState(null),[T,F]=r.useState(null),w=gt(t),[S,l]=r.useState(!1),_=r.useRef(!1);r.useEffect(()=>{if(b)return ca(b)},[b]),da();const g=r.useCallback(I=>{const[L,...K]=w().map(U=>U.ref.current),[V]=K.slice(-1),W=document.activeElement;for(const U of I)if(U===W||(U==null||U.scrollIntoView({block:"nearest"}),U===L&&$&&($.scrollTop=0),U===V&&$&&($.scrollTop=$.scrollHeight),U==null||U.focus(),document.activeElement!==W))return},[w,$]),M=r.useCallback(()=>g([D,b]),[g,D,b]);r.useEffect(()=>{S&&M()},[S,M]);const{onOpenChange:H,triggerPointerDownPosRef:X}=p;r.useEffect(()=>{if(b){let I={x:0,y:0};const L=V=>{var W,U;I={x:Math.abs(Math.round(V.pageX)-(((W=X.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(V.pageY)-(((U=X.current)==null?void 0:U.y)??0))}},K=V=>{I.x<=10&&I.y<=10?V.preventDefault():b.contains(V.target)||H(!1),document.removeEventListener("pointermove",L),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",L),document.addEventListener("pointerup",K,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",K,{capture:!0})}}},[b,H,X]),r.useEffect(()=>{const I=()=>H(!1);return window.addEventListener("blur",I),window.addEventListener("resize",I),()=>{window.removeEventListener("blur",I),window.removeEventListener("resize",I)}},[H]);const[Q,ne]=Ws(I=>{const L=w().filter(W=>!W.disabled),K=L.find(W=>W.ref.current===document.activeElement),V=qs(L,I,K);V&&setTimeout(()=>V.ref.current.focus())}),oe=r.useCallback((I,L,K)=>{const V=!_.current&&!K;(p.value!==void 0&&p.value===L||V)&&(B(I),V&&(_.current=!0))},[p.value]),_e=r.useCallback(()=>b==null?void 0:b.focus(),[b]),ie=r.useCallback((I,L,K)=>{const V=!_.current&&!K;(p.value!==void 0&&p.value===L||V)&&F(I)},[p.value]),ee=n==="popper"?wt:Es,A=ee===wt?{side:i,sideOffset:c,align:h,alignOffset:j,arrowPadding:v,collisionBoundary:E,collisionPadding:P,sticky:N,hideWhenDetached:f,avoidCollisions:y}:{};return e.jsx(ks,{scope:t,content:b,viewport:$,onViewportChange:R,itemRefCallback:oe,selectedItem:D,onItemLeave:_e,itemTextRefCallback:ie,focusSelectedItem:M,selectedItemText:T,position:n,isPositioned:S,searchRef:Q,children:e.jsx(ma,{as:sa,allowPinchZoom:!0,children:e.jsx(ha,{asChild:!0,trapped:p.open,onMountAutoFocus:I=>{I.preventDefault()},onUnmountAutoFocus:Z(o,I=>{var L;(L=p.trigger)==null||L.focus({preventScroll:!0}),I.preventDefault()}),children:e.jsx(ua,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:m,onPointerDownOutside:d,onFocusOutside:I=>I.preventDefault(),onDismiss:()=>p.onOpenChange(!1),children:e.jsx(ee,{role:"listbox",id:p.contentId,"data-state":p.open?"open":"closed",dir:p.dir,onContextMenu:I=>I.preventDefault(),...u,...A,onPlaced:()=>l(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...u.style},onKeyDown:Z(u.onKeyDown,I=>{const L=I.ctrlKey||I.altKey||I.metaKey;if(I.key==="Tab"&&I.preventDefault(),!L&&I.key.length===1&&ne(I.key),["ArrowUp","ArrowDown","Home","End"].includes(I.key)){let V=w().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(I.key)&&(V=V.slice().reverse()),["ArrowUp","ArrowDown"].includes(I.key)){const W=I.target,U=V.indexOf(W);V=V.slice(U+1)}setTimeout(()=>g(V)),I.preventDefault()}})})})})})})});Ts.displayName=Gr;var Zr="SelectItemAlignedPosition",Es=r.forwardRef((a,s)=>{const{__scopeSelect:t,onPlaced:n,...o}=a,m=Ce(De,t),d=Se(De,t),[i,c]=r.useState(null),[h,j]=r.useState(null),v=fe(s,C=>j(C)),E=gt(t),P=r.useRef(!1),N=r.useRef(!0),{viewport:f,selectedItem:y,selectedItemText:u,focusSelectedItem:p}=d,b=r.useCallback(()=>{if(m.trigger&&m.valueNode&&i&&h&&f&&y&&u){const C=m.trigger.getBoundingClientRect(),D=h.getBoundingClientRect(),B=m.valueNode.getBoundingClientRect(),T=u.getBoundingClientRect();if(m.dir!=="rtl"){const W=T.left-D.left,U=B.left-W,ce=C.left-U,de=C.width+ce,Be=Math.max(de,D.width),Fe=window.innerWidth-le,k=as(U,[le,Math.max(le,Fe-Be)]);i.style.minWidth=de+"px",i.style.left=k+"px"}else{const W=D.right-T.right,U=window.innerWidth-B.right-W,ce=window.innerWidth-C.right-U,de=C.width+ce,Be=Math.max(de,D.width),Fe=window.innerWidth-le,k=as(U,[le,Math.max(le,Fe-Be)]);i.style.minWidth=de+"px",i.style.right=k+"px"}const F=E(),w=window.innerHeight-le*2,S=f.scrollHeight,l=window.getComputedStyle(h),_=parseInt(l.borderTopWidth,10),g=parseInt(l.paddingTop,10),M=parseInt(l.borderBottomWidth,10),H=parseInt(l.paddingBottom,10),X=_+g+S+H+M,Q=Math.min(y.offsetHeight*5,X),ne=window.getComputedStyle(f),oe=parseInt(ne.paddingTop,10),_e=parseInt(ne.paddingBottom,10),ie=C.top+C.height/2-le,ee=w-ie,A=y.offsetHeight/2,I=y.offsetTop+A,L=_+g+I,K=X-L;if(L<=ie){const W=F.length>0&&y===F[F.length-1].ref.current;i.style.bottom="0px";const U=h.clientHeight-f.offsetTop-f.offsetHeight,ce=Math.max(ee,A+(W?_e:0)+U+M),de=L+ce;i.style.height=de+"px"}else{const W=F.length>0&&y===F[0].ref.current;i.style.top="0px";const ce=Math.max(ie,_+f.offsetTop+(W?oe:0)+A)+K;i.style.height=ce+"px",f.scrollTop=L-ie+f.offsetTop}i.style.margin=`${le}px 0`,i.style.minHeight=Q+"px",i.style.maxHeight=w+"px",n==null||n(),requestAnimationFrame(()=>P.current=!0)}},[E,m.trigger,m.valueNode,i,h,f,y,u,m.dir,n]);we(()=>b(),[b]);const[z,$]=r.useState();we(()=>{h&&$(window.getComputedStyle(h).zIndex)},[h]);const R=r.useCallback(C=>{C&&N.current===!0&&(b(),p==null||p(),N.current=!1)},[b,p]);return e.jsx(Qr,{scope:t,contentWrapper:i,shouldExpandOnScrollRef:P,onScrollButtonChange:R,children:e.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:z},children:e.jsx(re.div,{...o,ref:v,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});Es.displayName=Zr;var Jr="SelectPopperPosition",wt=r.forwardRef((a,s)=>{const{__scopeSelect:t,align:n="start",collisionPadding:o=le,...m}=a,d=ft(t);return e.jsx(pa,{...d,...m,ref:s,align:n,collisionPadding:o,style:{boxSizing:"border-box",...m.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wt.displayName=Jr;var[Qr,Bt]=He(De,{}),Ct="SelectViewport",Ps=r.forwardRef((a,s)=>{const{__scopeSelect:t,nonce:n,...o}=a,m=Se(Ct,t),d=Bt(Ct,t),i=fe(s,m.onViewportChange),c=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(xt.Slot,{scope:t,children:e.jsx(re.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Z(o.onScroll,h=>{const j=h.currentTarget,{contentWrapper:v,shouldExpandOnScrollRef:E}=d;if(E!=null&&E.current&&v){const P=Math.abs(c.current-j.scrollTop);if(P>0){const N=window.innerHeight-le*2,f=parseFloat(v.style.minHeight),y=parseFloat(v.style.height),u=Math.max(f,y);if(u<N){const p=u+P,b=Math.min(N,p),z=p-b;v.style.height=b+"px",v.style.bottom==="0px"&&(j.scrollTop=z>0?z:0,v.style.justifyContent="flex-end")}}}c.current=j.scrollTop})})})]})});Ps.displayName=Ct;var Is="SelectGroup",[en,tn]=He(Is),sn=r.forwardRef((a,s)=>{const{__scopeSelect:t,...n}=a,o=Pt();return e.jsx(en,{scope:t,id:o,children:e.jsx(re.div,{role:"group","aria-labelledby":o,...n,ref:s})})});sn.displayName=Is;var Ms="SelectLabel",As=r.forwardRef((a,s)=>{const{__scopeSelect:t,...n}=a,o=tn(Ms,t);return e.jsx(re.div,{id:o.id,...n,ref:s})});As.displayName=Ms;var ct="SelectItem",[an,Rs]=He(ct),Ds=r.forwardRef((a,s)=>{const{__scopeSelect:t,value:n,disabled:o=!1,textValue:m,...d}=a,i=Ce(ct,t),c=Se(ct,t),h=i.value===n,[j,v]=r.useState(m??""),[E,P]=r.useState(!1),N=fe(s,p=>{var b;return(b=c.itemRefCallback)==null?void 0:b.call(c,p,n,o)}),f=Pt(),y=r.useRef("touch"),u=()=>{o||(i.onValueChange(n),i.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(an,{scope:t,value:n,disabled:o,textId:f,isSelected:h,onItemTextChange:r.useCallback(p=>{v(b=>b||((p==null?void 0:p.textContent)??"").trim())},[]),children:e.jsx(xt.ItemSlot,{scope:t,value:n,disabled:o,textValue:j,children:e.jsx(re.div,{role:"option","aria-labelledby":f,"data-highlighted":E?"":void 0,"aria-selected":h&&E,"data-state":h?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...d,ref:N,onFocus:Z(d.onFocus,()=>P(!0)),onBlur:Z(d.onBlur,()=>P(!1)),onClick:Z(d.onClick,()=>{y.current!=="mouse"&&u()}),onPointerUp:Z(d.onPointerUp,()=>{y.current==="mouse"&&u()}),onPointerDown:Z(d.onPointerDown,p=>{y.current=p.pointerType}),onPointerMove:Z(d.onPointerMove,p=>{var b;y.current=p.pointerType,o?(b=c.onItemLeave)==null||b.call(c):y.current==="mouse"&&p.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(d.onPointerLeave,p=>{var b;p.currentTarget===document.activeElement&&((b=c.onItemLeave)==null||b.call(c))}),onKeyDown:Z(d.onKeyDown,p=>{var z;((z=c.searchRef)==null?void 0:z.current)!==""&&p.key===" "||(Vr.includes(p.key)&&u(),p.key===" "&&p.preventDefault())})})})})});Ds.displayName=ct;var We="SelectItemText",Ls=r.forwardRef((a,s)=>{const{__scopeSelect:t,className:n,style:o,...m}=a,d=Ce(We,t),i=Se(We,t),c=Rs(We,t),h=Yr(We,t),[j,v]=r.useState(null),E=fe(s,u=>v(u),c.onItemTextChange,u=>{var p;return(p=i.itemTextRefCallback)==null?void 0:p.call(i,u,c.value,c.disabled)}),P=j==null?void 0:j.textContent,N=r.useMemo(()=>e.jsx("option",{value:c.value,disabled:c.disabled,children:P},c.value),[c.disabled,c.value,P]),{onNativeOptionAdd:f,onNativeOptionRemove:y}=h;return we(()=>(f(N),()=>y(N)),[f,y,N]),e.jsxs(e.Fragment,{children:[e.jsx(re.span,{id:c.textId,...m,ref:E}),c.isSelected&&d.valueNode&&!d.valueNodeHasChildren?ls.createPortal(m.children,d.valueNode):null]})});Ls.displayName=We;var Bs="SelectItemIndicator",Fs=r.forwardRef((a,s)=>{const{__scopeSelect:t,...n}=a;return Rs(Bs,t).isSelected?e.jsx(re.span,{"aria-hidden":!0,...n,ref:s}):null});Fs.displayName=Bs;var St="SelectScrollUpButton",zs=r.forwardRef((a,s)=>{const t=Se(St,a.__scopeSelect),n=Bt(St,a.__scopeSelect),[o,m]=r.useState(!1),d=fe(s,n.onScrollButtonChange);return we(()=>{if(t.viewport&&t.isPositioned){let i=function(){const h=c.scrollTop>0;m(h)};const c=t.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),o?e.jsx($s,{...a,ref:d,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=t;i&&c&&(i.scrollTop=i.scrollTop-c.offsetHeight)}}):null});zs.displayName=St;var _t="SelectScrollDownButton",Os=r.forwardRef((a,s)=>{const t=Se(_t,a.__scopeSelect),n=Bt(_t,a.__scopeSelect),[o,m]=r.useState(!1),d=fe(s,n.onScrollButtonChange);return we(()=>{if(t.viewport&&t.isPositioned){let i=function(){const h=c.scrollHeight-c.clientHeight,j=Math.ceil(c.scrollTop)<h;m(j)};const c=t.viewport;return i(),c.addEventListener("scroll",i),()=>c.removeEventListener("scroll",i)}},[t.viewport,t.isPositioned]),o?e.jsx($s,{...a,ref:d,onAutoScroll:()=>{const{viewport:i,selectedItem:c}=t;i&&c&&(i.scrollTop=i.scrollTop+c.offsetHeight)}}):null});Os.displayName=_t;var $s=r.forwardRef((a,s)=>{const{__scopeSelect:t,onAutoScroll:n,...o}=a,m=Se("SelectScrollButton",t),d=r.useRef(null),i=gt(t),c=r.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return r.useEffect(()=>()=>c(),[c]),we(()=>{var j;const h=i().find(v=>v.ref.current===document.activeElement);(j=h==null?void 0:h.ref.current)==null||j.scrollIntoView({block:"nearest"})},[i]),e.jsx(re.div,{"aria-hidden":!0,...o,ref:s,style:{flexShrink:0,...o.style},onPointerDown:Z(o.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(n,50))}),onPointerMove:Z(o.onPointerMove,()=>{var h;(h=m.onItemLeave)==null||h.call(m),d.current===null&&(d.current=window.setInterval(n,50))}),onPointerLeave:Z(o.onPointerLeave,()=>{c()})})}),rn="SelectSeparator",Hs=r.forwardRef((a,s)=>{const{__scopeSelect:t,...n}=a;return e.jsx(re.div,{"aria-hidden":!0,...n,ref:s})});Hs.displayName=rn;var kt="SelectArrow",nn=r.forwardRef((a,s)=>{const{__scopeSelect:t,...n}=a,o=ft(t),m=Ce(kt,t),d=Se(kt,t);return m.open&&d.position==="popper"?e.jsx(xa,{...o,...n,ref:s}):null});nn.displayName=kt;function Vs(a){return a===""||a===void 0}var Us=r.forwardRef((a,s)=>{const{value:t,...n}=a,o=r.useRef(null),m=fe(s,o),d=Na(t);return r.useEffect(()=>{const i=o.current,c=window.HTMLSelectElement.prototype,j=Object.getOwnPropertyDescriptor(c,"value").set;if(d!==t&&j){const v=new Event("change",{bubbles:!0});j.call(i,t),i.dispatchEvent(v)}},[d,t]),e.jsx(oa,{asChild:!0,children:e.jsx("select",{...n,ref:m,defaultValue:t})})});Us.displayName="BubbleSelect";function Ws(a){const s=ja(a),t=r.useRef(""),n=r.useRef(0),o=r.useCallback(d=>{const i=t.current+d;s(i),function c(h){t.current=h,window.clearTimeout(n.current),h!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(i)},[s]),m=r.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,o,m]}function qs(a,s,t){const o=s.length>1&&Array.from(s).every(h=>h===s[0])?s[0]:s,m=t?a.indexOf(t):-1;let d=on(a,Math.max(m,0));o.length===1&&(d=d.filter(h=>h!==t));const c=d.find(h=>h.textValue.toLowerCase().startsWith(o.toLowerCase()));return c!==t?c:void 0}function on(a,s){return a.map((t,n)=>a[(s+n)%a.length])}var ln=vs,Ys=bs,cn=ws,dn=Cs,mn=Ss,Ks=_s,hn=Ps,Xs=As,Gs=Ds,un=Ls,pn=Fs,Zs=zs,Js=Os,Qs=Hs;const dt=ln,mt=cn,Ze=r.forwardRef(({className:a,children:s,...t},n)=>e.jsxs(Ys,{ref:n,className:q("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...t,children:[s,e.jsx(dn,{asChild:!0,children:e.jsx(It,{className:"h-4 w-4 opacity-50"})})]}));Ze.displayName=Ys.displayName;const ea=r.forwardRef(({className:a,...s},t)=>e.jsx(Zs,{ref:t,className:q("flex cursor-default items-center justify-center py-1",a),...s,children:e.jsx(cs,{className:"h-4 w-4"})}));ea.displayName=Zs.displayName;const ta=r.forwardRef(({className:a,...s},t)=>e.jsx(Js,{ref:t,className:q("flex cursor-default items-center justify-center py-1",a),...s,children:e.jsx(It,{className:"h-4 w-4"})}));ta.displayName=Js.displayName;const Je=r.forwardRef(({className:a,children:s,position:t="popper",...n},o)=>e.jsx(mn,{children:e.jsxs(Ks,{ref:o,className:q("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:t,...n,children:[e.jsx(ea,{}),e.jsx(hn,{className:q("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(ta,{})]})}));Je.displayName=Ks.displayName;const xn=r.forwardRef(({className:a,...s},t)=>e.jsx(Xs,{ref:t,className:q("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s}));xn.displayName=Xs.displayName;const Qe=r.forwardRef(({className:a,children:s,...t},n)=>e.jsxs(Gs,{ref:n,className:q("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...t,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(pn,{children:e.jsx(ba,{className:"h-4 w-4"})})}),e.jsx(un,{children:s})]}));Qe.displayName=Gs.displayName;const gn=r.forwardRef(({className:a,...s},t)=>e.jsx(Qs,{ref:t,className:q("-mx-1 my-1 h-px bg-muted",a),...s}));gn.displayName=Qs.displayName;function fn(){const[a,s]=r.useState([]),[t,n]=r.useState(null),[o,m]=r.useState([]),[d,i]=r.useState([]),[c,h]=r.useState(!0),[j,v]=r.useState(!1),[E,P]=r.useState(null),[N,f]=r.useState(1),{toast:y}=Le(),u=r.useCallback(async(R=1)=>{try{h(!0),P(null);const C=await lt.getCampaigns(R);s(C.data),n({current_page:C.current_page,first_page_url:C.first_page_url,from:C.from,last_page:C.last_page,last_page_url:C.last_page_url,links:C.links,next_page_url:C.next_page_url,path:C.path,per_page:C.per_page,prev_page_url:C.prev_page_url,to:C.to,total:C.total}),f(R)}catch(C){const D=C instanceof Error?C.message:"Failed to fetch campaigns";P(D),y({title:"Error",description:D,variant:"destructive"})}finally{h(!1)}},[y]);r.useEffect(()=>{(async()=>{try{const[C,D]=await Promise.all([Oe.getAllContacts(),Ee.getAllTemplates()]);m(C),i(D)}catch(C){console.error("Failed to load contacts/templates:",C)}})()},[]),r.useEffect(()=>{u(1)},[u]);const p=async R=>{try{v(!0);const C=await lt.createCampaign(R);return C.success?(y({title:"Campaign Created",description:C.message||"Campaign has been created and is being processed."}),await u(N)):y({title:"Campaign Failed",description:C.message||"Failed to create campaign",variant:"destructive"}),C}catch(C){const D=C instanceof Error?C.message:"Failed to create campaign";throw y({title:"Campaign Error",description:D,variant:"destructive"}),C}finally{v(!1)}},b=R=>{R>=1&&t&&R<=t.last_page&&u(R)};return{campaigns:a,pagination:t,contacts:o,templates:d,loading:c,creating:j,error:E,currentPage:N,fetchCampaigns:u,createCampaign:p,goToPage:b,goToNextPage:()=>{t!=null&&t.next_page_url&&b(N+1)},goToPrevPage:()=>{t!=null&&t.prev_page_url&&b(N-1)},refetch:()=>u(N)}}function yn(){const{campaigns:a,pagination:s,contacts:t,templates:n,loading:o,creating:m,error:d,currentPage:i,createCampaign:c,goToPage:h,goToNextPage:j,goToPrevPage:v,refetch:E}=fn(),[P,N]=r.useState(!1),[f,y]=r.useState(null),[u,p]=r.useState([]),[b,z]=r.useState(!1),[$,R]=r.useState(""),[C,D]=r.useState(null),{toast:B}=Le(),T=async()=>{if(!$||!f){B({title:"Error",description:"Please fill in campaign name and select a template.",variant:"destructive"});return}if(!b&&u.length===0){B({title:"Error",description:"Please select recipients or choose 'Send to All'.",variant:"destructive"});return}try{await c({template_id:f,name:$,contact_ids:b?[]:u}),R(""),y(null),p([]),z(!1),N(!1)}catch{}},F=(g,M)=>{p(M?[...u,g]:u.filter(H=>H!==g))},w=g=>{p(g?t.map(M=>M.id):[])},S=g=>{switch(g.toLowerCase()){case"completed":case"sent":return e.jsx(ht,{className:"h-4 w-4 text-green-500"});case"processing":case"sending":return e.jsx(J,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":case"error":return e.jsx(Xe,{className:"h-4 w-4 text-red-500"});case"pending":case"queued":return e.jsx(Ra,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(Ta,{className:"h-4 w-4 text-gray-500"})}},l=g=>{switch(g.toLowerCase()){case"completed":case"sent":return"bg-green-500";case"processing":case"sending":return"bg-blue-500";case"failed":case"error":return"bg-red-500";case"pending":case"queued":return"bg-yellow-500";default:return"bg-gray-500"}},_=g=>new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return d?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading campaigns: ",d]}),e.jsx(x,{onClick:E,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Campaigns"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email campaigns"})]}),e.jsxs(he,{open:P,onOpenChange:N,children:[e.jsx(ye,{asChild:!0,children:e.jsxs(x,{disabled:o,children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})}),e.jsxs(ue,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Create New Email Campaign"}),e.jsx(ge,{children:"Create and send an email campaign to your subscribers."})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"campaign-name",children:"Campaign Name"}),e.jsx(me,{id:"campaign-name",value:$,onChange:g=>R(g.target.value),placeholder:"Enter campaign name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"campaign-template",children:"Email Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(dt,{value:(f==null?void 0:f.toString())||"",onValueChange:g=>y(Number.parseInt(g)),children:[e.jsx(Ze,{className:"flex-1",children:e.jsx(mt,{placeholder:"Select template"})}),e.jsx(Je,{children:n.map(g=>e.jsx(Qe,{value:g.id.toString(),children:g.title},g.id))})]}),f&&e.jsxs(he,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>D(n.find(g=>g.id===f)||null),children:e.jsx(ut,{className:"h-4 w-4"})})}),e.jsxs(ue,{className:"max-w-2xl",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:C==null?void 0:C.title}),e.jsx(ge,{children:"Template Preview"})]}),C&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:C.subject})]}),e.jsxs("div",{children:[e.jsx(Y,{children:"Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:C.body}})]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{children:"Select Recipients"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vt,{id:"send-to-all",checked:b,onCheckedChange:g=>{z(g),g&&p([])}}),e.jsxs(Y,{htmlFor:"send-to-all",className:"text-sm font-medium",children:["Send to All Users (",t.length," contacts)"]})]})})]}),!b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[u.length," of ",t.length," contacts selected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(vt,{id:"select-all-contacts",checked:u.length===t.length,onCheckedChange:w}),e.jsx(Y,{htmlFor:"select-all-contacts",className:"text-sm",children:"Select All"})]})]}),e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:e.jsx("div",{className:"p-4 space-y-3",children:t.map(g=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[e.jsx(vt,{id:`contact-${g.id}`,checked:u.includes(g.id),onCheckedChange:M=>F(g.id,M)}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:g.name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:g.email})]})})})]},g.id))})})]}),b&&e.jsxs(be,{children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsxs(Ne,{children:["This campaign will be sent to all ",t.length," contacts in your database."]})]})]})]}),e.jsxs($e,{children:[e.jsx(x,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsx(x,{onClick:T,disabled:m,children:m?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Campaign"})]})]})]})]}),o?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading campaigns..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(g=>e.jsxs(Pe,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ie,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Me,{className:"text-lg",children:g.name}),e.jsxs(Ae,{className:"mt-1",children:["Template: ",g.template.title]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[S(g.status),e.jsx(Lt,{className:`${l(g.status)} text-white`,children:g.status.charAt(0).toUpperCase()+g.status.slice(1)})]})]})}),e.jsx(Re,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Contacts:"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:g.total_contacts})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Emails Sent:"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:g.emails_sent})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Created:"}),e.jsx("p",{className:"text-sm text-gray-600",children:_(g.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:_(g.updated_at)})]})]})}),e.jsx(pt,{children:e.jsxs("div",{className:"w-full text-center text-sm text-gray-500",children:["Campaign ID: ",g.id]})})]},g.id))}),s&&s.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:v,disabled:!s.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(g,M)=>{const H=M+1;return e.jsx(x,{variant:i===H?"default":"outline",size:"sm",onClick:()=>h(H),children:H},H)})}),e.jsx(x,{variant:"outline",size:"sm",onClick:j,disabled:!s.next_page_url,children:"Next"})]})}),a.length===0&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(je,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first email campaign to get started."}),e.jsxs(x,{onClick:()=>N(!0),disabled:o,children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})]})]})]})}function vn(){const[a,s]=r.useState([]),[t,n]=r.useState(null),[o,m]=r.useState(!0),[d,i]=r.useState(!1),[c,h]=r.useState(null),[j,v]=r.useState(1),[E,P]=r.useState(""),[N,f]=r.useState(null),[y,u]=r.useState(!1),{toast:p}=Le(),b=r.useCallback(async(w=1,S="")=>{try{m(!0),h(null);const l=await Ue.getBatches(w,S);s(l.data),n({current_page:l.current_page,first_page_url:l.first_page_url,from:l.from,last_page:l.last_page,last_page_url:l.last_page_url,links:l.links,next_page_url:l.next_page_url,path:l.path,per_page:l.per_page,prev_page_url:l.prev_page_url,to:l.to,total:l.total}),v(w)}catch(l){const _=l instanceof Error?l.message:"Failed to fetch batches";h(_),p({title:"Error",description:_,variant:"destructive"})}finally{m(!1)}},[p]),z=async(w,S)=>{try{i(!0);const l=await Ue.importBatch(w,S);return l.success?(p({title:"Import Successful",description:`Successfully imported batch "${S}" with ${l.imported_count||0} contacts${l.failed_count?`. ${l.failed_count} failed.`:""}`}),await b(1,E)):p({title:"Import Failed",description:l.message||"Failed to import batch",variant:"destructive"}),l}catch(l){const _=l instanceof Error?l.message:"Failed to import batch";throw p({title:"Import Error",description:_,variant:"destructive"}),l}finally{i(!1)}},$=async w=>{try{u(!0);const S=await Ue.getBatchDetail(w);return f(S),S}catch(S){const l=S instanceof Error?S.message:"Failed to fetch batch details";throw p({title:"Error",description:l,variant:"destructive"}),S}finally{u(!1)}},R=async w=>{try{await Ue.deleteBatch(w),p({title:"Success",description:"Batch deleted successfully"}),await b(j,E)}catch(S){const l=S instanceof Error?S.message:"Failed to delete batch";throw p({title:"Error",description:l,variant:"destructive"}),S}},C=w=>{w>=1&&t&&w<=t.last_page&&b(w,E)},D=()=>{t!=null&&t.next_page_url&&C(j+1)},B=()=>{t!=null&&t.prev_page_url&&C(j-1)},T=w=>{P(w),v(1),b(1,w)},F=()=>{P(""),b(1,"")};return r.useEffect(()=>{b(1,"")},[b]),{batches:a,pagination:t,loading:o,importing:d,error:c,currentPage:j,searchTerm:E,selectedBatchDetail:N,loadingBatchDetail:y,fetchBatches:b,importBatch:z,fetchBatchDetail:$,deleteBatch:R,goToPage:C,goToNextPage:D,goToPrevPage:B,handleSearch:T,clearSearch:F,refetch:()=>b(j,E),setSelectedBatchDetail:f}}function jn(a){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",s.appendChild(t),t.styleSheet?t.styleSheet.cssText=a:t.appendChild(document.createTextNode(a))}Array(12).fill(0);let Tt=1;class bn{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const t=this.subscribers.indexOf(s);this.subscribers.splice(t,1)}),this.publish=s=>{this.subscribers.forEach(t=>t(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var t;const{message:n,...o}=s,m=typeof(s==null?void 0:s.id)=="number"||((t=s.id)==null?void 0:t.length)>0?s.id:Tt++,d=this.toasts.find(c=>c.id===m),i=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(m)&&this.dismissedToasts.delete(m),d?this.toasts=this.toasts.map(c=>c.id===m?(this.publish({...c,...s,id:m,title:n}),{...c,...s,id:m,dismissible:i,title:n}):c):this.addToast({title:n,...o,dismissible:i,id:m}),m},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(t=>t({id:s,dismiss:!0})))):this.toasts.forEach(t=>{this.subscribers.forEach(n=>n({id:t.id,dismiss:!0}))}),s),this.message=(s,t)=>this.create({...t,message:s}),this.error=(s,t)=>this.create({...t,message:s,type:"error"}),this.success=(s,t)=>this.create({...t,type:"success",message:s}),this.info=(s,t)=>this.create({...t,type:"info",message:s}),this.warning=(s,t)=>this.create({...t,type:"warning",message:s}),this.loading=(s,t)=>this.create({...t,type:"loading",message:s}),this.promise=(s,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:s,type:"loading",message:t.loading,description:typeof t.description!="function"?t.description:void 0}));const o=Promise.resolve(s instanceof Function?s():s);let m=n!==void 0,d;const i=o.then(async h=>{if(d=["resolve",h],Ve.isValidElement(h))m=!1,this.create({id:n,type:"default",message:h});else if(wn(h)&&!h.ok){m=!1;const v=typeof t.error=="function"?await t.error(`HTTP error! status: ${h.status}`):t.error,E=typeof t.description=="function"?await t.description(`HTTP error! status: ${h.status}`):t.description,N=typeof v=="object"&&!Ve.isValidElement(v)?v:{message:v};this.create({id:n,type:"error",description:E,...N})}else if(h instanceof Error){m=!1;const v=typeof t.error=="function"?await t.error(h):t.error,E=typeof t.description=="function"?await t.description(h):t.description,N=typeof v=="object"&&!Ve.isValidElement(v)?v:{message:v};this.create({id:n,type:"error",description:E,...N})}else if(t.success!==void 0){m=!1;const v=typeof t.success=="function"?await t.success(h):t.success,E=typeof t.description=="function"?await t.description(h):t.description,N=typeof v=="object"&&!Ve.isValidElement(v)?v:{message:v};this.create({id:n,type:"success",description:E,...N})}}).catch(async h=>{if(d=["reject",h],t.error!==void 0){m=!1;const j=typeof t.error=="function"?await t.error(h):t.error,v=typeof t.description=="function"?await t.description(h):t.description,P=typeof j=="object"&&!Ve.isValidElement(j)?j:{message:j};this.create({id:n,type:"error",description:v,...P})}}).finally(()=>{m&&(this.dismiss(n),n=void 0),t.finally==null||t.finally.call(t)}),c=()=>new Promise((h,j)=>i.then(()=>d[0]==="reject"?j(d[1]):h(d[1])).catch(j));return typeof n!="string"&&typeof n!="number"?{unwrap:c}:Object.assign(n,{unwrap:c})},this.custom=(s,t)=>{const n=(t==null?void 0:t.id)||Tt++;return this.create({jsx:s(n),id:n,...t}),n},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const te=new bn,Nn=(a,s)=>{const t=(s==null?void 0:s.id)||Tt++;return te.addToast({title:a,...s,id:t}),t},wn=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",Cn=Nn,Sn=()=>te.toasts,_n=()=>te.getActiveToasts(),kn=Object.assign(Cn,{success:te.success,info:te.info,warning:te.warning,error:te.error,custom:te.custom,message:te.message,promise:te.promise,dismiss:te.dismiss,loading:te.loading},{getHistory:Sn,getToasts:_n});jn("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function rs(){var U,ce,de,Be,Fe;const{batches:a,pagination:s,loading:t,importing:n,error:o,currentPage:m,searchTerm:d,selectedBatchDetail:i,loadingBatchDetail:c,importBatch:h,fetchBatchDetail:j,deleteBatch:v,goToPage:E,goToNextPage:P,goToPrevPage:N,handleSearch:f,clearSearch:y,refetch:u}=vn(),[p,b]=r.useState(!1),[z,$]=r.useState(null),[R,C]=r.useState("users"),[D,B]=r.useState(""),[T,F]=r.useState(null),[w,S]=r.useState(null),l=r.useRef(null),[_,g]=r.useState(!1),[M,H]=r.useState(null),[X,Q]=r.useState(!1),[ne,oe]=r.useState([]),_e=k=>{var ke,Ft;const ze=(ke=k.target.files)==null?void 0:ke[0];if(ze){const yt=(Ft=ze.name.split(".").pop())==null?void 0:Ft.toLowerCase();yt==="csv"||yt==="xlsx"||yt==="xls"?(F(ze),S(null)):(alert("Please select a CSV or Excel file"),F(null))}},ie=async()=>{if(!T||!D.trim()){alert("Please select a file and enter a batch name");return}try{const k=await h(T,D.trim());S(k),k.success&&setTimeout(()=>{b(!1),ee()},3e3)}catch{S({success:!1,message:"Failed to import batch. Please try again."})}},ee=()=>{F(null),S(null),B(""),l.current&&(l.current.value="")},A=async k=>{$(k),await j(k.id)},I=async k=>{if(confirm("Are you sure you want to delete this batch? This action cannot be undone."))try{await v(k)}catch{}},L=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),K=k=>k>0?"bg-green-500":"bg-gray-500",V=async()=>{try{const k=await Ee.getAllTemplates();oe(k)}catch(k){console.error("Failed to load templates:",k)}},W=async()=>{if(!M||!z){alert("Please select a template");return}try{Q(!0);const k=await lt.sendEmailToBatch(z.id,{template_id:M});k.success&&(kn({title:"Campaign Sent",description:k.message||"Campaign has been sent successfully."}),g(!1),H(null),await j(z.id))}catch{}finally{Q(!1)}};return r.useEffect(()=>{_&&V()},[_]),z&&i?e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{variant:"outline",onClick:()=>{$(null)},children:"â† Back to Batches"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i.name}),e.jsxs("p",{className:"text-gray-600",children:["Created on ",L(i.created_at)," â€¢ ",((U=i.contacts)==null?void 0:U.length)||0," ","users"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{variant:R==="users"?"default":"outline",onClick:()=>C("users"),size:"sm",children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Users (",((ce=i.contacts)==null?void 0:ce.length)||0,")"]}),e.jsxs(x,{variant:R==="campaigns"?"default":"outline",onClick:()=>C("campaigns"),size:"sm",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Campaigns (",i.campaigns.length,")"]}),e.jsxs(x,{onClick:()=>g(!0),disabled:!i.contacts||i.contacts.length===0,children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Send Campaign"]})]})]}),e.jsx(he,{open:_,onOpenChange:g,children:e.jsxs(ue,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Send Campaign to Batch"}),e.jsxs(ge,{children:["Send an email campaign to all ",((de=i.contacts)==null?void 0:de.length)||0,' users in "',i.name,'" batch.']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Select Email Template"}),e.jsxs(dt,{value:(M==null?void 0:M.toString())||"",onValueChange:k=>H(Number(k)),children:[e.jsx(Ze,{children:e.jsx(mt,{placeholder:"Choose a template"})}),e.jsx(Je,{children:ne.map(k=>e.jsx(Qe,{value:k.id.toString(),children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.title}),e.jsx("div",{className:"text-sm text-gray-500",children:k.subject})]})},k.id))})]})]}),M&&e.jsxs(be,{children:[e.jsx(ve,{className:"h-4 w-4"}),e.jsxs(Ne,{children:["This campaign will be sent to ",((Be=i.contacts)==null?void 0:Be.length)||0," users in this batch."]})]})]}),e.jsxs($e,{children:[e.jsx(x,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(x,{onClick:W,disabled:!M||X,children:X?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Send Campaign"]})})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:R==="users"?e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Batch Users"}),e.jsx("p",{className:"text-gray-600",children:"Users imported in this batch"})]}),c?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading contacts..."})]}):e.jsxs(rt,{children:[e.jsx(nt,{children:e.jsxs(Te,{children:[e.jsx(se,{children:"Name"}),e.jsx(se,{children:"Email"}),e.jsx(se,{children:"Imported At"})]})}),e.jsx(ot,{children:((Fe=i.contacts)==null?void 0:Fe.map(k=>e.jsxs(Te,{children:[e.jsx(ae,{className:"font-medium",children:k.name||"N/A"}),e.jsx(ae,{children:k.email}),e.jsx(ae,{children:L(k.created_at)})]},k.id)))||[]})]}),(!i.contacts||i.contacts.length===0)&&!c&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contacts found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This batch doesn't have any contacts yet."})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Campaign History"}),e.jsx("p",{className:"text-gray-600",children:"Campaigns sent to this batch"})]}),e.jsxs(rt,{children:[e.jsx(nt,{children:e.jsxs(Te,{children:[e.jsx(se,{children:"Campaign ID"}),e.jsx(se,{children:"Template"}),e.jsx(se,{children:"Subject"}),e.jsx(se,{children:"Sent At"})]})}),e.jsx(ot,{children:i.campaigns.map(k=>e.jsxs(Te,{children:[e.jsxs(ae,{className:"font-medium",children:["#",k.id]}),e.jsx(ae,{children:k.email_template.title}),e.jsx(ae,{children:k.email_template.subject}),e.jsx(ae,{children:L(k.created_at)})]},k.id))})]}),i.campaigns.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ve,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No campaigns sent"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No campaigns have been sent to this batch yet."})]})]})})]}):o?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading batches: ",o]}),e.jsx(x,{onClick:u,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Batches"}),e.jsx("p",{className:"text-gray-600",children:"Manage your user import batches and track campaigns"})]}),e.jsxs(he,{open:p,onOpenChange:k=>{b(k),k||ee()},children:[e.jsx(ye,{asChild:!0,children:e.jsxs(x,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Import New Batch"]})}),e.jsxs(ue,{className:"max-w-md",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:"Import User Batch"}),e.jsx(ge,{children:"Upload a CSV or Excel file and give your batch a name to organize your users."})]}),e.jsxs("div",{className:"space-y-4",children:[!w&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"batch-name",children:"Batch Name"}),e.jsx(me,{id:"batch-name",value:D,onChange:k=>B(k.target.value),placeholder:"e.g., Q1 2024 Customers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"file-upload",children:"Select File"}),e.jsx("input",{id:"file-upload",type:"file",ref:l,onChange:_e,accept:".csv,.xlsx,.xls",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),T&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(at,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:T.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(T.size/1024).toFixed(1)," KB)"]})]})}),e.jsxs(be,{children:[e.jsx(Xe,{className:"h-4 w-4"}),e.jsx(Ne,{children:'Make sure your file has columns named "name" and "email". The first row should contain headers.'})]})]}),n&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm",children:['Creating batch "',D,'"...']})]}),e.jsx(Rt,{value:void 0,className:"w-full"})]}),w&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(be,{className:w.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[w.success?e.jsx(ht,{className:"h-4 w-4 text-green-600"}):e.jsx(Xe,{className:"h-4 w-4 text-red-600"}),e.jsx(Ne,{className:w.success?"text-green-800":"text-red-800",children:w.message})]}),w.success&&e.jsxs("div",{className:"text-center p-4 bg-green-100 rounded",children:[e.jsx("div",{className:"font-semibold text-green-800 text-lg",children:w.imported_count||0}),e.jsxs("div",{className:"text-green-600",children:['Users imported to "',D,'"']})]})]})]}),e.jsxs($e,{children:[!w&&e.jsxs(e.Fragment,{children:[e.jsx(x,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(x,{onClick:ie,disabled:!T||!D.trim()||n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Import Batch"]})})]}),w&&e.jsx(x,{onClick:()=>b(!1),className:"w-full",children:"Close"})]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(ms,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(me,{placeholder:"Search batches...",value:d,onChange:k=>f(k.target.value),className:"pl-8"}),d&&e.jsx(x,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-6 w-6 p-0",onClick:y,children:e.jsx(os,{className:"h-3 w-3"})})]})}),t?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading batches..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map(k=>e.jsxs(Pe,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Ie,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(Me,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5 text-cyan-500"}),k.name]}),e.jsxs(Ae,{className:"mt-1",children:["Created: ",L(k.created_at)]})]}),e.jsx(Lt,{className:`${K(k.contacts_count)} text-white`,children:k.contacts_count>0?"Active":"Empty"})]})}),e.jsx(Re,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k.contacts_count}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Users"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.campaigns.length}),e.jsx("div",{className:"text-sm text-green-800",children:"Campaigns Sent"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:L(k.updated_at)})]})]})}),e.jsxs(pt,{className:"flex justify-between",children:[e.jsxs(x,{variant:"outline",size:"sm",onClick:()=>A(k),children:[e.jsx(ut,{className:"h-3 w-3 mr-1"}),"View Details"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{size:"sm",disabled:k.contacts_count===0,children:[e.jsx(je,{className:"h-3 w-3 mr-1"}),"Send Campaign"]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>I(k.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(hs,{className:"h-3 w-3"})})]})]})]},k.id))}),s&&s.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{variant:"outline",size:"sm",onClick:N,disabled:!s.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,s.last_page)},(k,ze)=>{const ke=ze+1;return e.jsx(x,{variant:m===ke?"default":"outline",size:"sm",onClick:()=>E(ke),children:ke},ke)})}),e.jsx(x,{variant:"outline",size:"sm",onClick:P,disabled:!s.next_page_url,children:"Next"})]})}),a.length===0&&!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ge,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No batches found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:d?"No batches match your search criteria.":"Import your first user batch to get started."}),e.jsxs(x,{onClick:()=>b(!0),children:[e.jsx(Ye,{className:"mr-2 h-4 w-4"}),"Import New Batch"]})]})]})]})}function Tn(){const[a,s]=r.useState([]),[t,n]=r.useState([]),[o,m]=r.useState(!0),[d,i]=r.useState(!1),[c,h]=r.useState(null),{toast:j}=Le(),v=r.useCallback(async()=>{try{m(!0),h(null);const[P,N]=await Promise.all([Ue.getBatches(1,""),Ee.getAllTemplates()]);s(P.data),n(N)}catch(P){const N=P instanceof Error?P.message:"Failed to fetch data";h(N),j({title:"Error",description:N,variant:"destructive"})}finally{m(!1)}},[j]),E=async(P,N)=>{try{i(!0);const f={template_id:N},y=await lt.sendEmailToBatch(P,f);return y.success?j({title:"Campaign Sent",description:y.message||"Email campaign has been sent to the batch successfully."}):j({title:"Campaign Failed",description:y.message||"Failed to send campaign to batch",variant:"destructive"}),y}catch(f){const y=f instanceof Error?f.message:"Failed to send campaign";throw j({title:"Campaign Error",description:y,variant:"destructive"}),f}finally{i(!1)}};return r.useEffect(()=>{v()},[v]),{batches:a,templates:t,loading:o,sending:d,error:c,sendEmailToBatch:E,refetch:v}}function En(){const{batches:a,templates:s,loading:t,sending:n,error:o,sendEmailToBatch:m,refetch:d}=Tn(),[i,c]=r.useState(null),[h,j]=r.useState(null),[v,E]=r.useState(null),P=async()=>{if(!i||!h){alert("Please select both a batch and an email template");return}try{await m(i,h),c(null),j(null)}catch{}},N=u=>new Date(u).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),f=a.find(u=>u.id===i),y=s.find(u=>u.id===h);return o?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading data: ",o]}),e.jsxs(x,{onClick:d,children:[e.jsx(Qa,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})}):t?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading batches and templates..."})]})}):e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Send Mail to Batch"}),e.jsx("p",{className:"text-gray-600",children:"Select a batch and email template to send a campaign"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Pe,{children:[e.jsxs(Ie,{children:[e.jsxs(Me,{className:"flex items-center gap-2",children:[e.jsx(je,{className:"h-5 w-5 text-cyan-500"}),"Campaign Setup"]}),e.jsx(Ae,{children:"Configure your email campaign settings"})]}),e.jsxs(Re,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Select Batch"}),e.jsxs(dt,{value:(i==null?void 0:i.toString())||"",onValueChange:u=>c(Number(u)),children:[e.jsx(Ze,{children:e.jsx(mt,{placeholder:"Choose a batch"})}),e.jsx(Je,{children:a.map(u=>e.jsx(Qe,{value:u.id.toString(),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:u.name}),e.jsxs(Lt,{variant:"secondary",className:"ml-2",children:[u.contacts_count||0," users"]})]})},u.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Email Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(dt,{value:(h==null?void 0:h.toString())||"",onValueChange:u=>j(Number(u)),children:[e.jsx(Ze,{className:"flex-1",children:e.jsx(mt,{placeholder:"Choose a template"})}),e.jsx(Je,{children:s.map(u=>e.jsx(Qe,{value:u.id.toString(),children:u.title},u.id))})]}),h&&e.jsxs(he,{children:[e.jsx(ye,{asChild:!0,children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>E(y||null),children:e.jsx(ut,{className:"h-4 w-4"})})}),e.jsxs(ue,{className:"max-w-2xl",children:[e.jsxs(pe,{children:[e.jsx(xe,{children:v==null?void 0:v.title}),e.jsx(ge,{children:"Template Preview"})]}),v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:v.subject})]}),e.jsxs("div",{children:[e.jsx(Y,{children:"Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:v.body}})]})]})]})]})]})]}),f&&y&&e.jsxs(be,{children:[e.jsx(ht,{className:"h-4 w-4"}),e.jsxs(Ne,{children:['Ready to send "',y.title,'" to ',f.contacts_count||0,' users in "',f.name,'" batch.']})]}),e.jsx(x,{onClick:P,disabled:!i||!h||n,className:"w-full",children:n?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Campaign..."]}):e.jsxs(e.Fragment,{children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Send Campaign"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Pe,{children:[e.jsxs(Ie,{children:[e.jsxs(Me,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"h-5 w-5 text-cyan-500"}),"Available Batches"]}),e.jsx(Ae,{children:"Select from your imported user batches"})]}),e.jsx(Re,{children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ge,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No batches available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Import some user batches first."})]}):a.map(u=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${i===u.id?"border-cyan-500 bg-cyan-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>c(u.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:u.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",N(u.created_at)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-cyan-600",children:u.contacts_count||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"users"})]})]})},u.id))})})]}),e.jsxs(Pe,{children:[e.jsxs(Ie,{children:[e.jsxs(Me,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"h-5 w-5 text-cyan-500"}),"Email Templates"]}),e.jsx(Ae,{children:"Choose from your created templates"})]}),e.jsx(Re,{children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ve,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No templates available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create some email templates first."})]}):s.map(u=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${h===u.id?"border-cyan-500 bg-cyan-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>j(u.id),children:[e.jsx("h4",{className:"font-medium",children:u.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:u.subject})]},u.id))})})]})]})]})]})})}function $n(){const[a,s]=r.useState("batches"),t=()=>{switch(a){case"users":return e.jsx(Fr,{});case"templates":return e.jsx(Or,{});case"campaigns":return e.jsx(yn,{});case"batches":return e.jsx(rs,{});case"send-to-batch":return e.jsx(En,{});default:return e.jsx(rs,{})}};return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsxs("div",{className:"w-64 bg-cyan-500 text-white flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-cyan-400",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx($a,{className:"h-5 w-5"}),e.jsx("h1",{className:"text-lg font-semibold",children:"Email Automation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ga,{className:"h-10 w-10",children:[e.jsx(fa,{src:"/placeholder.svg?height=40&width=40"}),e.jsx(ya,{children:"JD"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"John Doe"}),e.jsx("div",{className:"text-sm text-cyan-200",children:"john.doe@example.com"})]})]})]}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs(x,{variant:a==="batches"?"secondary":"ghost",className:`w-full justify-start ${a==="batches"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("batches"),children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"User Batches"]})}),e.jsx("li",{children:e.jsxs(x,{variant:a==="users"?"secondary":"ghost",className:`w-full justify-start ${a==="users"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("users"),children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"All Users"]})}),e.jsx("li",{children:e.jsxs(x,{variant:a==="templates"?"secondary":"ghost",className:`w-full justify-start ${a==="templates"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("templates"),children:[e.jsx(at,{className:"mr-2 h-4 w-4"}),"Email Templates"]})}),e.jsx("li",{children:e.jsxs(x,{variant:a==="send-to-batch"?"secondary":"ghost",className:`w-full justify-start ${a==="send-to-batch"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("send-to-batch"),children:[e.jsx(je,{className:"mr-2 h-4 w-4"}),"Send Mail to Batch"]})}),e.jsx("li",{children:e.jsxs(x,{variant:a==="campaigns"?"secondary":"ghost",className:`w-full justify-start ${a==="campaigns"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>s("campaigns"),children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Campaign History"]})}),e.jsx("li",{children:e.jsxs(x,{variant:"ghost",className:"w-full justify-start text-white hover:bg-cyan-400",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Welcome Email"]})}),e.jsx("li",{children:e.jsxs(x,{variant:"ghost",className:"w-full justify-start text-white hover:bg-cyan-400",children:[e.jsx(ve,{className:"mr-2 h-4 w-4"}),"Follow Up Email"]})}),e.jsx("li",{children:e.jsxs(x,{variant:"ghost",className:"w-full justify-start text-white hover:bg-cyan-400",children:[e.jsx(cr,{className:"mr-2 h-4 w-4"}),"Unsubscribe"]})})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:t()})]})}export{$n as default};
