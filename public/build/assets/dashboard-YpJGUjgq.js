import{r,j as e,a as _t,K as Is}from"./app-KR2wAJsr.js";import{a as $,c as H,b as Tt,B as E,u as se,S as Rs}from"./button-COOBNj4Z.js";import{X as Ms,c as kt,u as As,R as Ds,a as tt,b as Ls,V as Os,A as Fs,P as $s,h as Hs,d as Vs,e as Us,F as Bs,D as zs,C as Ws,f as qs,g as Ks,i as Gs,j as Ys}from"./index-CZXQYWXK.js";import{I as le,P as Q,r as Pt}from"./index-CKwQ_eEP.js";import{D as me,a as he,b as xe,c as fe,d as ge,e as ve,f as Re}from"./dialog-D3SShoK8.js";import{L as Y}from"./label-Bm8XbjFt.js";import{L as oe}from"./loader-circle-CGL-oVx7.js";import{u as pt,c as Xs,a as ie,b as X,d as Zs,C as Js}from"./index-DBxoO_qD.js";import{u as Qs,C as Be}from"./checkbox-DEusc-p0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],ta=$("AlignCenter",ea);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],aa=$("AlignLeft",sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],na=$("AlignRight",ra);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],mt=$("Bold",la);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ia=$("Calendar",oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],st=$("ChevronDown",ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Et=$("ChevronUp",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],qe=$("CircleAlert",ua);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],It=$("CircleCheckBig",pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],ha=$("Clock",ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Rt=$("Copy",xa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Mt=$("Eye",fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ke=$("FileText",ga);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ya=$("House",va);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ht=$("Image",ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],xt=$("Italic",Na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],Ca=$("ListOrdered",wa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Sa=$("List",ba);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Ta=$("Mail",_a);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Te=$("Plus",ka);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Ea=$("Printer",Pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],Ra=$("Search",Ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Ge=$("Send",Ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Da=$("SquarePen",Aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Oa=$("Trash2",La);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],ft=$("Underline",Fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],gt=$("Upload",$a);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Va=$("Users",Ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],vt=$("Video",Ua),At=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:H("w-full caption-bottom text-sm",t),...a})}));At.displayName="Table";const Dt=r.forwardRef(({className:t,...a},s)=>e.jsx("thead",{ref:s,className:H("[&_tr]:border-b",t),...a}));Dt.displayName="TableHeader";const Lt=r.forwardRef(({className:t,...a},s)=>e.jsx("tbody",{ref:s,className:H("[&_tr:last-child]:border-0",t),...a}));Lt.displayName="TableBody";const Ba=r.forwardRef(({className:t,...a},s)=>e.jsx("tfoot",{ref:s,className:H("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a}));Ba.displayName="TableFooter";const Ye=r.forwardRef(({className:t,...a},s)=>e.jsx("tr",{ref:s,className:H("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a}));Ye.displayName="TableRow";const be=r.forwardRef(({className:t,...a},s)=>e.jsx("th",{ref:s,className:H("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a}));be.displayName="TableHead";const Se=r.forwardRef(({className:t,...a},s)=>e.jsx("td",{ref:s,className:H("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a}));Se.displayName="TableCell";const za=r.forwardRef(({className:t,...a},s)=>e.jsx("caption",{ref:s,className:H("mt-4 text-sm text-muted-foreground",t),...a}));za.displayName="TableCaption";function Wa(t,a=[]){let s=[];function n(p,c){const i=r.createContext(c),o=s.length;s=[...s,c];const f=S=>{var w;const{scope:I,children:R,...C}=S,m=((w=I==null?void 0:I[t])==null?void 0:w[o])||i,g=r.useMemo(()=>C,Object.values(C));return e.jsx(m.Provider,{value:g,children:R})};f.displayName=p+"Provider";function N(S,I){var m;const R=((m=I==null?void 0:I[t])==null?void 0:m[o])||i,C=r.useContext(R);if(C)return C;if(c!==void 0)return c;throw new Error(`\`${S}\` must be used within \`${p}\``)}return[f,N]}const l=()=>{const p=s.map(c=>r.createContext(c));return function(i){const o=(i==null?void 0:i[t])||p;return r.useMemo(()=>({[`__scope${t}`]:{...i,[t]:o}}),[i,o])}};return l.scopeName=t,[n,qa(l,...a)]}function qa(...t){const a=t[0];if(t.length===1)return a;const s=()=>{const n=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(p){const c=n.reduce((i,{useScope:o,scopeName:f})=>{const S=o(p)[`__scope${f}`];return{...i,...S}},{});return r.useMemo(()=>({[`__scope${a.scopeName}`]:c}),[c])}};return s.scopeName=a.scopeName,s}function yt(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function Ka(...t){return a=>{let s=!1;const n=t.map(l=>{const p=yt(l,a);return!s&&typeof p=="function"&&(s=!0),p});if(s)return()=>{for(let l=0;l<n.length;l++){const p=n[l];typeof p=="function"?p():yt(t[l],null)}}}}function Ga(t){const a=Ya(t),s=r.forwardRef((n,l)=>{const{children:p,...c}=n,i=r.Children.toArray(p),o=i.find(Za);if(o){const f=o.props.children,N=i.map(S=>S===o?r.Children.count(f)>1?r.Children.only(null):r.isValidElement(f)?f.props.children:null:S);return e.jsx(a,{...c,ref:l,children:r.isValidElement(f)?r.cloneElement(f,void 0,N):null})}return e.jsx(a,{...c,ref:l,children:p})});return s.displayName=`${t}.Slot`,s}function Ya(t){const a=r.forwardRef((s,n)=>{const{children:l,...p}=s;if(r.isValidElement(l)){const c=Qa(l),i=Ja(p,l.props);return l.type!==r.Fragment&&(i.ref=n?Ka(n,c):c),r.cloneElement(l,i)}return r.Children.count(l)>1?r.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var Xa=Symbol("radix.slottable");function Za(t){return r.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===Xa}function Ja(t,a){const s={...a};for(const n in a){const l=t[n],p=a[n];/^on[A-Z]/.test(n)?l&&p?s[n]=(...i)=>{const o=p(...i);return l(...i),o}:l&&(s[n]=l):n==="style"?s[n]={...l,...p}:n==="className"&&(s[n]=[l,p].filter(Boolean).join(" "))}return{...t,...s}}function Qa(t){var n,l;let a=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,s=a&&"isReactWarning"in a&&a.isReactWarning;return s?t.ref:(a=(l=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:l.get,s=a&&"isReactWarning"in a&&a.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var er=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ot=er.reduce((t,a)=>{const s=Ga(`Primitive.${a}`),n=r.forwardRef((l,p)=>{const{asChild:c,...i}=l,o=c?s:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...i,ref:p})});return n.displayName=`Primitive.${a}`,{...t,[a]:n}},{}),at="Progress",rt=100,[tr,on]=Wa(at),[sr,ar]=tr(at),Ft=r.forwardRef((t,a)=>{const{__scopeProgress:s,value:n=null,max:l,getValueLabel:p=rr,...c}=t;(l||l===0)&&!jt(l)&&console.error(nr(`${l}`,"Progress"));const i=jt(l)?l:rt;n!==null&&!Nt(n,i)&&console.error(lr(`${n}`,"Progress"));const o=Nt(n,i)?n:null,f=Me(o)?p(o,i):void 0;return e.jsx(sr,{scope:s,value:o,max:i,children:e.jsx(Ot.div,{"aria-valuemax":i,"aria-valuemin":0,"aria-valuenow":Me(o)?o:void 0,"aria-valuetext":f,role:"progressbar","data-state":Vt(o,i),"data-value":o??void 0,"data-max":i,...c,ref:a})})});Ft.displayName=at;var $t="ProgressIndicator",Ht=r.forwardRef((t,a)=>{const{__scopeProgress:s,...n}=t,l=ar($t,s);return e.jsx(Ot.div,{"data-state":Vt(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...n,ref:a})});Ht.displayName=$t;function rr(t,a){return`${Math.round(t/a*100)}%`}function Vt(t,a){return t==null?"indeterminate":t===a?"complete":"loading"}function Me(t){return typeof t=="number"}function jt(t){return Me(t)&&!isNaN(t)&&t>0}function Nt(t,a){return Me(t)&&!isNaN(t)&&t<=a&&t>=0}function nr(t,a){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${rt}\`.`}function lr(t,a){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${rt} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Ut=Ft,or=Ht;const Bt=r.forwardRef(({className:t,value:a,...s},n)=>e.jsx(Ut,{ref:n,className:H("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:e.jsx(or,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));Bt.displayName=Ut.displayName;const ir=Tt("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Ae=r.forwardRef(({className:t,variant:a,...s},n)=>e.jsx("div",{ref:n,role:"alert",className:H(ir({variant:a}),t),...s}));Ae.displayName="Alert";const cr=r.forwardRef(({className:t,...a},s)=>e.jsx("h5",{ref:s,className:H("mb-1 font-medium leading-none tracking-tight",t),...a}));cr.displayName="AlertTitle";const De=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:H("text-sm [&_p]:leading-relaxed",t),...a}));De.displayName="AlertDescription";const zt="/api",Z=_t.create({baseURL:zt,headers:{Accept:"application/json","Content-Type":"application/json"}}),je={getContacts:async(t=1,a="")=>{const s=new URLSearchParams({page:t.toString()});return a.trim()&&s.append("search",a.trim()),(await Z.get(`/contacts?${s.toString()}`)).data},getAllContacts:async()=>(await Z.get("/contacts?per_page=1000")).data.data||[],importContacts:async t=>{const a=new FormData;return a.append("file",t),(await _t.post(`${zt}/contacts/import`,a,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data},createContact:async t=>(await Z.post("/contacts",t)).data,updateContact:async(t,a)=>(await Z.put(`/contacts/${t}`,a)).data,deleteContact:async t=>(await Z.delete(`/contacts/${t}`)).data},Ne={getTemplates:async(t=1)=>(await Z.get(`/templates?page=${t}`)).data,getAllTemplates:async()=>(await Z.get("/templates?per_page=1000")).data.data||[],createTemplate:async t=>(await Z.post("/templates",t)).data,updateTemplate:async(t,a)=>(await Z.put(`/templates/${t}`,a)).data,deleteTemplate:async t=>(await Z.delete(`/templates/${t}`)).data,getTemplate:async t=>(await Z.get(`/templates/${t}`)).data},wt={getCampaigns:async(t=1)=>(await Z.get(`/campaigns?page=${t}`)).data,createCampaign:async t=>(await Z.post("/send-email",t)).data},dr=1,ur=1e6;let ze=0;function pr(){return ze=(ze+1)%Number.MAX_SAFE_INTEGER,ze.toString()}const We=new Map,Ct=t=>{if(We.has(t))return;const a=setTimeout(()=>{We.delete(t),ke({type:"REMOVE_TOAST",toastId:t})},ur);We.set(t,a)},mr=(t,a)=>{switch(a.type){case"ADD_TOAST":return{...t,toasts:[a.toast,...t.toasts].slice(0,dr)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===a.toast.id?{...s,...a.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=a;return s?Ct(s):t.toasts.forEach(n=>{Ct(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===s||s===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return a.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==a.toastId)}}},Ee=[];let Ie={toasts:[]};function ke(t){Ie=mr(Ie,t),Ee.forEach(a=>{a(Ie)})}function hr({...t}){const a=pr(),s=l=>ke({type:"UPDATE_TOAST",toast:{...l,id:a}}),n=()=>ke({type:"DISMISS_TOAST",toastId:a});return ke({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:l=>{l||n()}}}),{id:a,dismiss:n,update:s}}function we(){const[t,a]=r.useState(Ie);return r.useEffect(()=>(Ee.push(a),()=>{const s=Ee.indexOf(a);s>-1&&Ee.splice(s,1)}),[t]),{...t,toast:hr,dismiss:s=>ke({type:"DISMISS_TOAST",toastId:s})}}function xr(){const[t,a]=r.useState([]),[s,n]=r.useState(null),[l,p]=r.useState(!0),[c,i]=r.useState(!1),[o,f]=r.useState(null),[N,S]=r.useState(1),[I,R]=r.useState(""),[C,m]=r.useState(""),{toast:g}=we(),w=r.useRef();r.useEffect(()=>(w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{m(I)},500),()=>{w.current&&clearTimeout(w.current)}),[I]);const x=r.useCallback(async(_=1,T="")=>{try{p(!0),f(null);const k=await je.getContacts(_,T);a(k.data),n({current_page:k.current_page,first_page_url:k.first_page_url,from:k.from,last_page:k.last_page,last_page_url:k.last_page_url,links:k.links,next_page_url:k.next_page_url,path:k.path,per_page:k.per_page,prev_page_url:k.prev_page_url,to:k.to,total:k.total}),S(_)}catch(k){const B=k instanceof Error?k.message:"Failed to fetch contacts";f(B),g({title:"Error",description:B,variant:"destructive"})}finally{p(!1)}},[g]),h=async _=>{try{i(!0);const T=await je.importContacts(_);return T.success?(g({title:"Import Successful",description:`Successfully imported ${T.imported_count||0} contacts${T.failed_count?`. ${T.failed_count} failed.`:""}`}),await x(1,C)):g({title:"Import Failed",description:T.message||"Failed to import contacts",variant:"destructive"}),T}catch(T){const k=T instanceof Error?T.message:"Failed to import contacts";throw g({title:"Import Error",description:k,variant:"destructive"}),T}finally{i(!1)}};r.useEffect(()=>{S(1),x(1,C)},[C,x]),r.useEffect(()=>{x(1,"")},[]);const b=async _=>{try{await je.createContact(_),g({title:"Success",description:"Contact created successfully"}),await x(N,C)}catch(T){const k=T instanceof Error?T.message:"Failed to create contact";throw g({title:"Error",description:k,variant:"destructive"}),T}},M=async(_,T)=>{try{await je.updateContact(_,T),g({title:"Success",description:"Contact updated successfully"}),await x(N,C)}catch(k){const B=k instanceof Error?k.message:"Failed to update contact";throw g({title:"Error",description:B,variant:"destructive"}),k}},F=async _=>{try{await je.deleteContact(_),g({title:"Success",description:"Contact deleted successfully"}),await x(N,C)}catch(T){const k=T instanceof Error?T.message:"Failed to delete contact";throw g({title:"Error",description:k,variant:"destructive"}),T}},v=_=>{_>=1&&s&&_<=s.last_page&&x(_,C)};return{contacts:t,pagination:s,loading:l,importing:c,error:o,currentPage:N,searchTerm:I,debouncedSearchTerm:C,fetchContacts:x,importContacts:h,createContact:b,updateContact:M,deleteContact:F,goToPage:v,goToNextPage:()=>{s!=null&&s.next_page_url&&v(N+1)},goToPrevPage:()=>{s!=null&&s.prev_page_url&&v(N-1)},handleSearch:_=>{R(_)},clearSearch:()=>{R(""),m("")},refetch:()=>x(N,C)}}function bt(){const{contacts:t,pagination:a,loading:s,importing:n,error:l,currentPage:p,searchTerm:c,debouncedSearchTerm:i,importContacts:o,createContact:f,goToPage:N,goToNextPage:S,goToPrevPage:I,handleSearch:R,clearSearch:C,refetch:m}=xr(),[g,w]=r.useState(null),[x,h]=r.useState("asc"),[b,M]=r.useState(!1),[F,v]=r.useState(!1),[L,G]=r.useState({name:"",email:""}),[z,K]=r.useState(null),[_,T]=r.useState(null),k=r.useRef(null),{toast:B}=we(),y=[...t].sort((d,u)=>{if(!g)return 0;const j=d[g],A=u[g];return j===null&&A===null?0:j===null?x==="asc"?1:-1:A===null||j<A?x==="asc"?-1:1:j>A?x==="asc"?1:-1:0}),V=d=>{g===d?h(u=>u==="asc"?"desc":"asc"):(w(d),h("asc"))},W=d=>{var j,A;const u=(j=d.target.files)==null?void 0:j[0];if(u){const P=(A=u.name.split(".").pop())==null?void 0:A.toLowerCase();P==="csv"||P==="xlsx"||P==="xls"?(K(u),T(null)):(B({title:"Invalid file format",description:"Please upload a CSV or Excel file (.csv, .xlsx, .xls).",variant:"destructive"}),K(null))}},J=async()=>{if(!z){B({title:"No file selected",description:"Please select a file to import.",variant:"destructive"});return}try{const d=await o(z);T(d),d.success&&setTimeout(()=>{v(!1),K(null),T(null)},3e3)}catch{T({success:!1,message:"Failed to import contacts. Please try again."})}},re=()=>{K(null),T(null),k.current&&(k.current.value="")},ae=()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Search:"}),e.jsxs("div",{className:"relative",children:[e.jsx(Ra,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(le,{placeholder:"Search users...",value:c,onChange:d=>R(d.target.value),className:"pl-8 w-64"}),c&&e.jsx(E,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-6 w-6 p-0",onClick:C,children:e.jsx(Ms,{className:"h-3 w-3"})})]}),i&&e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:['Searching: "',i,'"']})]}),te=d=>{B({title:`Export ${d}`,description:`User data exported as ${d} format.`})},ne=async()=>{if(!L.name||!L.email){B({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{await f(L),G({name:"",email:""}),M(!1)}catch{}},q=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),U=({field:d})=>g!==d?null:x==="asc"?e.jsx(Et,{className:"h-4 w-4"}):e.jsx(st,{className:"h-4 w-4"});return l?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading contacts: ",l]}),e.jsx(E,{onClick:m,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Users"}),e.jsx("p",{className:"text-gray-600",children:"Manage your email subscribers"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{open:b,onOpenChange:M,children:[e.jsx(he,{asChild:!0,children:e.jsxs(E,{variant:"outline",children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Add Contact"]})}),e.jsxs(xe,{children:[e.jsxs(fe,{children:[e.jsx(ge,{children:"Add New Contact"}),e.jsx(ve,{children:"Add a new contact to your email list."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"contact-name",children:"Name"}),e.jsx(le,{id:"contact-name",value:L.name,onChange:d=>G({...L,name:d.target.value}),placeholder:"Enter contact name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"contact-email",children:"Email"}),e.jsx(le,{id:"contact-email",type:"email",value:L.email,onChange:d=>G({...L,email:d.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(E,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(E,{onClick:ne,children:"Add Contact"})]})]})]})]}),e.jsxs(me,{open:F,onOpenChange:d=>{v(d),d||re()},children:[e.jsx(he,{asChild:!0,children:e.jsxs(E,{className:"bg-gray-600 hover:bg-gray-700",children:[e.jsx(gt,{className:"mr-2 h-4 w-4"}),"Import Excel"]})}),e.jsxs(xe,{className:"max-w-md",children:[e.jsxs(fe,{children:[e.jsx(ge,{children:"Import Contacts"}),e.jsx(ve,{children:"Upload a CSV or Excel file to import contacts. The file should contain columns for Name and Email."})]}),e.jsxs("div",{className:"space-y-4",children:[!_&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"file-upload",children:"Select File"}),e.jsx("input",{id:"file-upload",type:"file",ref:k,onChange:W,accept:".csv,.xlsx,.xls",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),z&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:z.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(z.size/1024).toFixed(1)," KB)"]})]})}),e.jsxs(Ae,{children:[e.jsx(qe,{className:"h-4 w-4"}),e.jsx(De,{children:'Make sure your file has columns named "name" and "email". The first row should contain headers.'})]})]}),n&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Importing contacts..."})]}),e.jsx(Bt,{value:void 0,className:"w-full"})]}),_&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Ae,{className:_.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[_.success?e.jsx(It,{className:"h-4 w-4 text-green-600"}):e.jsx(qe,{className:"h-4 w-4 text-red-600"}),e.jsx(De,{className:_.success?"text-green-800":"text-red-800",children:_.message})]}),_.success&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-green-100 rounded",children:[e.jsx("div",{className:"font-semibold text-green-800",children:_.imported_count||0}),e.jsx("div",{className:"text-green-600",children:"Imported"})]}),_.failed_count&&_.failed_count>0&&e.jsxs("div",{className:"text-center p-2 bg-red-100 rounded",children:[e.jsx("div",{className:"font-semibold text-red-800",children:_.failed_count}),e.jsx("div",{className:"text-red-600",children:"Failed"})]})]}),_.errors&&_.errors.length>0&&e.jsxs("div",{className:"max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Errors:"}),e.jsx("ul",{className:"text-xs text-red-600 space-y-1",children:_.errors.map((d,u)=>e.jsxs("li",{children:["• ",d]},u))})]})]})]}),e.jsxs(Re,{children:[!_&&e.jsxs(e.Fragment,{children:[e.jsx(E,{variant:"outline",onClick:()=>v(!1),children:"Cancel"}),e.jsx(E,{onClick:J,disabled:!z||n,children:n?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"mr-2 h-4 w-4"}),"Import"]})})]}),_&&e.jsx(E,{onClick:()=>v(!1),className:"w-full",children:"Close"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Data"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>te("copy"),children:[e.jsx(Rt,{className:"mr-1 h-3 w-3"}),"Copy"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>te("CSV"),children:[e.jsx(Ke,{className:"mr-1 h-3 w-3"}),"CSV"]}),e.jsxs(E,{variant:"outline",size:"sm",onClick:()=>te("print"),children:[e.jsx(Ea,{className:"mr-1 h-3 w-3"}),"Print"]})]}),e.jsx(ae,{})]})]}),e.jsx("div",{className:"overflow-x-auto",children:s?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(oe,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading contacts..."})]}):e.jsxs(At,{children:[e.jsx(Dt,{children:e.jsxs(Ye,{children:[e.jsx(be,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>V("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",e.jsx(U,{field:"name"})]})}),e.jsx(be,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>V("email"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Email",e.jsx(U,{field:"email"})]})}),e.jsx(be,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>V("created_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Created At",e.jsx(U,{field:"created_at"})]})}),e.jsx(be,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>V("updated_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Updated At",e.jsx(U,{field:"updated_at"})]})})]})}),e.jsx(Lt,{children:y.map(d=>e.jsxs(Ye,{children:[e.jsx(Se,{className:"font-medium",children:d.name||"N/A"}),e.jsx(Se,{children:d.email}),e.jsx(Se,{children:q(d.created_at)}),e.jsx(Se,{children:q(d.updated_at)})]},d.id))})]})}),e.jsxs("div",{className:"p-4 border-t flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a&&e.jsxs(e.Fragment,{children:["Showing ",a.from," to ",a.to," of ",a.total," entries (Page"," ",a.current_page," of ",a.last_page,")"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:I,disabled:!(a!=null&&a.prev_page_url),children:"Previous"}),a&&a.last_page>1&&e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,a.last_page)},(d,u)=>{const j=u+1;return e.jsx(E,{variant:p===j?"default":"outline",size:"sm",onClick:()=>N(j),children:j},j)})}),e.jsx(E,{variant:"outline",size:"sm",onClick:S,disabled:!(a!=null&&a.next_page_url),children:"Next"})]})]})]})]})}const nt=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:H("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a}));nt.displayName="Card";const lt=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:H("flex flex-col space-y-1.5 p-6",t),...a}));lt.displayName="CardHeader";const ot=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:H("text-2xl font-semibold leading-none tracking-tight",t),...a}));ot.displayName="CardTitle";const it=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:H("text-sm text-muted-foreground",t),...a}));it.displayName="CardDescription";const ct=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:H("p-6 pt-0",t),...a}));ct.displayName="CardContent";const dt=r.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:H("flex items-center p-6 pt-0",t),...a}));dt.displayName="CardFooter";function fr(){const[t,a]=r.useState([]),[s,n]=r.useState(null),[l,p]=r.useState(!0),[c,i]=r.useState(null),[o,f]=r.useState(1),{toast:N}=we(),S=r.useCallback(async(h=1)=>{try{p(!0),i(null);const b=await Ne.getTemplates(h);a(b.data),n({current_page:b.current_page,first_page_url:b.first_page_url,from:b.from,last_page:b.last_page,last_page_url:b.last_page_url,links:b.links,next_page_url:b.next_page_url,path:b.path,per_page:b.per_page,prev_page_url:b.prev_page_url,to:b.to,total:b.total}),f(h)}catch(b){const M=b instanceof Error?b.message:"Failed to fetch templates";i(M),N({title:"Error",description:M,variant:"destructive"})}finally{p(!1)}},[N]),I=async h=>{try{await Ne.createTemplate(h),N({title:"Success",description:"Template created successfully"}),await S(o)}catch(b){const M=b instanceof Error?b.message:"Failed to create template";throw N({title:"Error",description:M,variant:"destructive"}),b}},R=async(h,b)=>{try{await Ne.updateTemplate(h,b),N({title:"Success",description:"Template updated successfully"}),await S(o)}catch(M){const F=M instanceof Error?M.message:"Failed to update template";throw N({title:"Error",description:F,variant:"destructive"}),M}},C=async h=>{try{await Ne.deleteTemplate(h),N({title:"Success",description:"Template deleted successfully"}),await S(o)}catch(b){const M=b instanceof Error?b.message:"Failed to delete template";throw N({title:"Error",description:M,variant:"destructive"}),b}},m=async h=>{try{const b={title:`${h.title} (Copy)`,subject:h.subject,body:h.body};await Ne.createTemplate(b),N({title:"Success",description:"Template duplicated successfully"}),await S(o)}catch(b){const M=b instanceof Error?b.message:"Failed to duplicate template";throw N({title:"Error",description:M,variant:"destructive"}),b}},g=h=>{h>=1&&s&&h<=s.last_page&&S(h)},w=()=>{s!=null&&s.next_page_url&&g(o+1)},x=()=>{s!=null&&s.prev_page_url&&g(o-1)};return r.useEffect(()=>{S(1)},[S]),{templates:t,pagination:s,loading:l,error:c,currentPage:o,fetchTemplates:S,createTemplate:I,updateTemplate:R,deleteTemplate:C,duplicateTemplate:m,goToPage:g,goToNextPage:w,goToPrevPage:x,refetch:()=>S(o)}}function gr(){const{templates:t,pagination:a,loading:s,error:n,currentPage:l,createTemplate:p,updateTemplate:c,deleteTemplate:i,duplicateTemplate:o,goToPage:f,goToNextPage:N,goToPrevPage:S,refetch:I}=fr(),[R,C]=r.useState(!1),[m,g]=r.useState(null),[w,x]=r.useState(null),[h,b]=r.useState({title:"",subject:"",body:""}),[M,F]=r.useState(!1),v=r.useRef(null),L=r.useRef(null),G=r.useRef(null),z=r.useRef(null),K=r.useRef(null),_=r.useRef(null),{toast:T}=we();r.useEffect(()=>{v.current&&h.body===""&&(v.current.innerHTML=`
        <div style="font-family: Arial, sans-serif; line-height: 1.6; color: #333;">
          <p>Start writing your email template here...</p>
          <p>You can use variables like {{name}} and {{email}} for personalization.</p>
        </div>
      `)},[R]);const k=async()=>{var u;if(!h.title||!h.subject){T({title:"Error",description:"Please fill in template title and subject.",variant:"destructive"});return}const d=((u=v.current)==null?void 0:u.innerHTML)||"";if(!d.trim()||d==="<div><br></div>"){T({title:"Error",description:"Please add content to your email template.",variant:"destructive"});return}try{await p({title:h.title,subject:h.subject,body:d}),b({title:"",subject:"",body:""}),v.current&&(v.current.innerHTML=""),C(!1)}catch{}},B=async()=>{var u;if(!m)return;const d=((u=z.current)==null?void 0:u.innerHTML)||m.body;try{await c(m.id,{title:m.title,subject:m.subject,body:d}),g(null)}catch{}},y=async d=>{if(confirm("Are you sure you want to delete this template?"))try{await i(d)}catch{}},V=async d=>{try{await o(d)}catch{}},W=d=>new Date(d).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),J=d=>{const u=document.createElement("DIV");return u.innerHTML=d,u.textContent||u.innerText||""},re=async d=>{const u=new FormData;u.append("file",d);const j=await fetch("http://localhost:8000/api/store-file",{method:"POST",body:u,headers:{Accept:"application/json"}});if(!j.ok){const P=await j.text();throw new Error(`Upload failed: ${j.status} ${P}`)}return(await j.json()).file_url},ae=(d,u)=>{u.focus();const j=window.getSelection();if(j&&j.rangeCount>0){const A=j.getRangeAt(0);A.deleteContents();const P=document.createElement("div");P.innerHTML=d;const D=document.createDocumentFragment();for(;P.firstChild;)D.appendChild(P.firstChild);A.insertNode(D),A.collapse(!1),j.removeAllRanges(),j.addRange(A)}else u.innerHTML+=d},te=async(d,u=!1)=>{var A;const j=(A=d.target.files)==null?void 0:A[0];if(j){if(!j.type.startsWith("image/")){T({title:"Invalid file",description:"Please select an image file.",variant:"destructive"});return}try{F(!0);const D=`
        <div style="margin: 15px 0; text-align: center;">
          <img src="${await re(j)}" alt="Email image" style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        </div>
      `,O=u?z.current:v.current;O&&ae(D,O),T({title:"Image uploaded",description:"Image has been added to your template."})}catch(P){console.error("Upload error:",P),T({title:"Upload failed",description:P instanceof Error?P.message:"Failed to upload image. Please try again.",variant:"destructive"})}finally{F(!1),d.target.value=""}}},ne=async(d,u=!1)=>{var A;const j=(A=d.target.files)==null?void 0:A[0];if(j){if(!j.type.startsWith("video/")){T({title:"Invalid file",description:"Please select a video file.",variant:"destructive"});return}try{F(!0);const D=`
        <div style="margin: 15px 0; text-align: center;">
          <video controls style="max-width: 100%; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
            <source src="${await re(j)}" type="${j.type}">
            Your browser does not support the video tag.
          </video>
        </div>
      `,O=u?z.current:v.current;O&&ae(D,O),T({title:"Video uploaded",description:"Video has been added to your template."})}catch(P){console.error("Upload error:",P),T({title:"Upload failed",description:P instanceof Error?P.message:"Failed to upload video. Please try again.",variant:"destructive"})}finally{F(!1),d.target.value=""}}},q=(d,u)=>{document.execCommand(d,!1,u)},U=({onClick:d,children:u,title:j})=>e.jsx(E,{type:"button",variant:"ghost",size:"sm",onClick:d,title:j,className:"h-8 w-8 p-0",children:u});return n?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading templates: ",n]}),e.jsx(E,{onClick:I,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Templates"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email templates"})]}),e.jsxs(me,{open:R,onOpenChange:C,children:[e.jsx(he,{asChild:!0,children:e.jsxs(E,{children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Create Template"]})}),e.jsxs(xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(fe,{children:[e.jsx(ge,{children:"Create New Email Template"}),e.jsx(ve,{children:"Create a new email template for your campaigns."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"template-title",children:"Template Title"}),e.jsx(le,{id:"template-title",value:h.title,onChange:d=>b({...h,title:d.target.value}),placeholder:"Enter template title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"template-subject",children:"Subject Line"}),e.jsx(le,{id:"template-subject",value:h.subject,onChange:d=>b({...h,subject:d.target.value}),placeholder:"Enter email subject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Email Body (Rich Editor)"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(U,{onClick:()=>q("bold"),title:"Bold",children:e.jsx(mt,{className:"h-4 w-4"})}),e.jsx(U,{onClick:()=>q("italic"),title:"Italic",children:e.jsx(xt,{className:"h-4 w-4"})}),e.jsx(U,{onClick:()=>q("underline"),title:"Underline",children:e.jsx(ft,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(U,{onClick:()=>q("justifyLeft"),title:"Align Left",children:e.jsx(aa,{className:"h-4 w-4"})}),e.jsx(U,{onClick:()=>q("justifyCenter"),title:"Align Center",children:e.jsx(ta,{className:"h-4 w-4"})}),e.jsx(U,{onClick:()=>q("justifyRight"),title:"Align Right",children:e.jsx(na,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(U,{onClick:()=>q("insertUnorderedList"),title:"Bullet List",children:e.jsx(Sa,{className:"h-4 w-4"})}),e.jsx(U,{onClick:()=>q("insertOrderedList"),title:"Numbered List",children:e.jsx(Ca,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("input",{type:"file",ref:L,onChange:d=>te(d,!1),accept:"image/*",className:"hidden"}),e.jsx(U,{onClick:()=>{var d;return(d=L.current)==null?void 0:d.click()},title:"Insert Image",children:e.jsx(ht,{className:"h-4 w-4"})}),e.jsx("input",{type:"file",ref:G,onChange:d=>ne(d,!1),accept:"video/*",className:"hidden"}),e.jsx(U,{onClick:()=>{var d;return(d=G.current)==null?void 0:d.click()},title:"Insert Video",children:e.jsx(vt,{className:"h-4 w-4"})}),M&&e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx(oe,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Uploading..."})]})]}),e.jsx("div",{ref:v,contentEditable:!0,className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif"},suppressContentEditableWarning:!0})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Use the toolbar to format text and add media. Variables like ","{{name}}",", ","{{email}}"," will be replaced with actual values when sending."]})]})]}),e.jsxs(Re,{children:[e.jsx(E,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(E,{onClick:k,children:"Create Template"})]})]})]})]}),s?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(oe,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading templates..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(d=>e.jsxs(nt,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(lt,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(ot,{className:"text-lg",children:d.title}),e.jsxs(it,{className:"mt-1",children:["Created: ",W(d.created_at)]})]})})}),e.jsx(ct,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Subject:"}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:d.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Content Preview:"}),e.jsxs("p",{className:"text-sm text-gray-600 line-clamp-3",children:[J(d.body).substring(0,100),"..."]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:W(d.updated_at)})]})]})}),e.jsxs(dt,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{children:[e.jsx(he,{asChild:!0,children:e.jsx(E,{variant:"outline",size:"sm",onClick:()=>x(d),children:e.jsx(Mt,{className:"h-3 w-3"})})}),e.jsxs(xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(fe,{children:[e.jsx(ge,{children:w==null?void 0:w.title}),e.jsx(ve,{children:"Template Preview"})]}),w&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:w.subject})]}),e.jsxs("div",{children:[e.jsx(Y,{children:"Email Preview:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-96 overflow-y-auto",dangerouslySetInnerHTML:{__html:w.body}})]})]})]})]}),e.jsxs(me,{children:[e.jsx(he,{asChild:!0,children:e.jsx(E,{variant:"outline",size:"sm",onClick:()=>g(d),children:e.jsx(Da,{className:"h-3 w-3"})})}),e.jsxs(xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(fe,{children:[e.jsx(ge,{children:"Edit Template"}),e.jsx(ve,{children:"Make changes to your email template."})]}),m&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Template Title"}),e.jsx(le,{value:m.title,onChange:u=>g({...m,title:u.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Subject Line"}),e.jsx(le,{value:m.subject,onChange:u=>g({...m,subject:u.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{children:"Email Body (Rich Editor)"}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(U,{onClick:()=>q("bold"),title:"Bold",children:e.jsx(mt,{className:"h-4 w-4"})}),e.jsx(U,{onClick:()=>q("italic"),title:"Italic",children:e.jsx(xt,{className:"h-4 w-4"})}),e.jsx(U,{onClick:()=>q("underline"),title:"Underline",children:e.jsx(ft,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx("input",{type:"file",ref:K,onChange:u=>te(u,!0),accept:"image/*",className:"hidden"}),e.jsx(U,{onClick:()=>{var u;return(u=K.current)==null?void 0:u.click()},title:"Insert Image",children:e.jsx(ht,{className:"h-4 w-4"})}),e.jsx("input",{type:"file",ref:_,onChange:u=>ne(u,!0),accept:"video/*",className:"hidden"}),e.jsx(U,{onClick:()=>{var u;return(u=_.current)==null?void 0:u.click()},title:"Insert Video",children:e.jsx(vt,{className:"h-4 w-4"})})]}),e.jsx("div",{ref:z,contentEditable:!0,className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif"},dangerouslySetInnerHTML:{__html:m.body},suppressContentEditableWarning:!0})]})]})]}),e.jsxs(Re,{children:[e.jsx(E,{variant:"outline",onClick:()=>g(null),children:"Cancel"}),e.jsx(E,{onClick:B,children:"Save Changes"})]})]})]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>V(d),children:e.jsx(Rt,{className:"h-3 w-3"})})]}),e.jsx(E,{variant:"outline",size:"sm",onClick:()=>y(d.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(Oa,{className:"h-3 w-3"})})]})]},d.id))}),a&&a.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:S,disabled:!a.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,a.last_page)},(d,u)=>{const j=u+1;return e.jsx(E,{variant:l===j?"default":"outline",size:"sm",onClick:()=>f(j),children:j},j)})}),e.jsx(E,{variant:"outline",size:"sm",onClick:N,disabled:!a.next_page_url,children:"Next"})]})}),t.length===0&&!s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Te,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first email template."}),e.jsxs(E,{onClick:()=>C(!0),children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Create Template"]})]})]})]})}const vr=Tt("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function yr({className:t,variant:a,...s}){return e.jsx("div",{className:H(vr({variant:a}),t),...s})}function St(t,[a,s]){return Math.min(s,Math.max(a,t))}var jr=[" ","Enter","ArrowUp","ArrowDown"],Nr=[" ","Enter"],Pe="Select",[Oe,Fe,wr]=Ls(Pe),[Ce,cn]=Xs(Pe,[wr,kt]),$e=kt(),[Cr,ce]=Ce(Pe),[br,Sr]=Ce(Pe),Wt=t=>{const{__scopeSelect:a,children:s,open:n,defaultOpen:l,onOpenChange:p,value:c,defaultValue:i,onValueChange:o,dir:f,name:N,autoComplete:S,disabled:I,required:R,form:C}=t,m=$e(a),[g,w]=r.useState(null),[x,h]=r.useState(null),[b,M]=r.useState(!1),F=As(f),[v=!1,L]=pt({prop:n,defaultProp:l,onChange:p}),[G,z]=pt({prop:c,defaultProp:i,onChange:o}),K=r.useRef(null),_=g?C||!!g.closest("form"):!0,[T,k]=r.useState(new Set),B=Array.from(T).map(y=>y.props.value).join(";");return e.jsx(Ds,{...m,children:e.jsxs(Cr,{required:R,scope:a,trigger:g,onTriggerChange:w,valueNode:x,onValueNodeChange:h,valueNodeHasChildren:b,onValueNodeHasChildrenChange:M,contentId:tt(),value:G,onValueChange:z,open:v,onOpenChange:L,dir:F,triggerPointerDownPosRef:K,disabled:I,children:[e.jsx(Oe.Provider,{scope:a,children:e.jsx(br,{scope:t.__scopeSelect,onNativeOptionAdd:r.useCallback(y=>{k(V=>new Set(V).add(y))},[]),onNativeOptionRemove:r.useCallback(y=>{k(V=>{const W=new Set(V);return W.delete(y),W})},[]),children:s})}),_?e.jsxs(fs,{"aria-hidden":!0,required:R,tabIndex:-1,name:N,autoComplete:S,value:G,onChange:y=>z(y.target.value),disabled:I,form:C,children:[G===void 0?e.jsx("option",{value:""}):null,Array.from(T)]},B):null]})})};Wt.displayName=Pe;var qt="SelectTrigger",Kt=r.forwardRef((t,a)=>{const{__scopeSelect:s,disabled:n=!1,...l}=t,p=$e(s),c=ce(qt,s),i=c.disabled||n,o=se(a,c.onTriggerChange),f=Fe(s),N=r.useRef("touch"),[S,I,R]=gs(m=>{const g=f().filter(h=>!h.disabled),w=g.find(h=>h.value===c.value),x=vs(g,m,w);x!==void 0&&c.onValueChange(x.value)}),C=m=>{i||(c.onOpenChange(!0),R()),m&&(c.triggerPointerDownPosRef.current={x:Math.round(m.pageX),y:Math.round(m.pageY)})};return e.jsx(Fs,{asChild:!0,...p,children:e.jsx(Q.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:i,"data-disabled":i?"":void 0,"data-placeholder":xs(c.value)?"":void 0,...l,ref:o,onClick:X(l.onClick,m=>{m.currentTarget.focus(),N.current!=="mouse"&&C(m)}),onPointerDown:X(l.onPointerDown,m=>{N.current=m.pointerType;const g=m.target;g.hasPointerCapture(m.pointerId)&&g.releasePointerCapture(m.pointerId),m.button===0&&m.ctrlKey===!1&&m.pointerType==="mouse"&&(C(m),m.preventDefault())}),onKeyDown:X(l.onKeyDown,m=>{const g=S.current!=="";!(m.ctrlKey||m.altKey||m.metaKey)&&m.key.length===1&&I(m.key),!(g&&m.key===" ")&&jr.includes(m.key)&&(C(),m.preventDefault())})})})});Kt.displayName=qt;var Gt="SelectValue",Yt=r.forwardRef((t,a)=>{const{__scopeSelect:s,className:n,style:l,children:p,placeholder:c="",...i}=t,o=ce(Gt,s),{onValueNodeHasChildrenChange:f}=o,N=p!==void 0,S=se(a,o.onValueNodeChange);return ie(()=>{f(N)},[f,N]),e.jsx(Q.span,{...i,ref:S,style:{pointerEvents:"none"},children:xs(o.value)?e.jsx(e.Fragment,{children:c}):p})});Yt.displayName=Gt;var _r="SelectIcon",Xt=r.forwardRef((t,a)=>{const{__scopeSelect:s,children:n,...l}=t;return e.jsx(Q.span,{"aria-hidden":!0,...l,ref:a,children:n||"▼"})});Xt.displayName=_r;var Tr="SelectPortal",Zt=t=>e.jsx($s,{asChild:!0,...t});Zt.displayName=Tr;var ye="SelectContent",Jt=r.forwardRef((t,a)=>{const s=ce(ye,t.__scopeSelect),[n,l]=r.useState();if(ie(()=>{l(new DocumentFragment)},[]),!s.open){const p=n;return p?Pt.createPortal(e.jsx(Qt,{scope:t.__scopeSelect,children:e.jsx(Oe.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),p):null}return e.jsx(es,{...t,ref:a})});Jt.displayName=ye;var ee=10,[Qt,de]=Ce(ye),kr="SelectContentImpl",es=r.forwardRef((t,a)=>{const{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:p,onPointerDownOutside:c,side:i,sideOffset:o,align:f,alignOffset:N,arrowPadding:S,collisionBoundary:I,collisionPadding:R,sticky:C,hideWhenDetached:m,avoidCollisions:g,...w}=t,x=ce(ye,s),[h,b]=r.useState(null),[M,F]=r.useState(null),v=se(a,u=>b(u)),[L,G]=r.useState(null),[z,K]=r.useState(null),_=Fe(s),[T,k]=r.useState(!1),B=r.useRef(!1);r.useEffect(()=>{if(h)return Hs(h)},[h]),Vs();const y=r.useCallback(u=>{const[j,...A]=_().map(O=>O.ref.current),[P]=A.slice(-1),D=document.activeElement;for(const O of u)if(O===D||(O==null||O.scrollIntoView({block:"nearest"}),O===j&&M&&(M.scrollTop=0),O===P&&M&&(M.scrollTop=M.scrollHeight),O==null||O.focus(),document.activeElement!==D))return},[_,M]),V=r.useCallback(()=>y([L,h]),[y,L,h]);r.useEffect(()=>{T&&V()},[T,V]);const{onOpenChange:W,triggerPointerDownPosRef:J}=x;r.useEffect(()=>{if(h){let u={x:0,y:0};const j=P=>{var D,O;u={x:Math.abs(Math.round(P.pageX)-(((D=J.current)==null?void 0:D.x)??0)),y:Math.abs(Math.round(P.pageY)-(((O=J.current)==null?void 0:O.y)??0))}},A=P=>{u.x<=10&&u.y<=10?P.preventDefault():h.contains(P.target)||W(!1),document.removeEventListener("pointermove",j),J.current=null};return J.current!==null&&(document.addEventListener("pointermove",j),document.addEventListener("pointerup",A,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",j),document.removeEventListener("pointerup",A,{capture:!0})}}},[h,W,J]),r.useEffect(()=>{const u=()=>W(!1);return window.addEventListener("blur",u),window.addEventListener("resize",u),()=>{window.removeEventListener("blur",u),window.removeEventListener("resize",u)}},[W]);const[re,ae]=gs(u=>{const j=_().filter(D=>!D.disabled),A=j.find(D=>D.ref.current===document.activeElement),P=vs(j,u,A);P&&setTimeout(()=>P.ref.current.focus())}),te=r.useCallback((u,j,A)=>{const P=!B.current&&!A;(x.value!==void 0&&x.value===j||P)&&(G(u),P&&(B.current=!0))},[x.value]),ne=r.useCallback(()=>h==null?void 0:h.focus(),[h]),q=r.useCallback((u,j,A)=>{const P=!B.current&&!A;(x.value!==void 0&&x.value===j||P)&&K(u)},[x.value]),U=n==="popper"?Xe:ts,d=U===Xe?{side:i,sideOffset:o,align:f,alignOffset:N,arrowPadding:S,collisionBoundary:I,collisionPadding:R,sticky:C,hideWhenDetached:m,avoidCollisions:g}:{};return e.jsx(Qt,{scope:s,content:h,viewport:M,onViewportChange:F,itemRefCallback:te,selectedItem:L,onItemLeave:ne,itemTextRefCallback:q,focusSelectedItem:V,selectedItemText:z,position:n,isPositioned:T,searchRef:re,children:e.jsx(Us,{as:Rs,allowPinchZoom:!0,children:e.jsx(Bs,{asChild:!0,trapped:x.open,onMountAutoFocus:u=>{u.preventDefault()},onUnmountAutoFocus:X(l,u=>{var j;(j=x.trigger)==null||j.focus({preventScroll:!0}),u.preventDefault()}),children:e.jsx(zs,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:p,onPointerDownOutside:c,onFocusOutside:u=>u.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:e.jsx(U,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:u=>u.preventDefault(),...w,...d,onPlaced:()=>k(!0),ref:v,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:X(w.onKeyDown,u=>{const j=u.ctrlKey||u.altKey||u.metaKey;if(u.key==="Tab"&&u.preventDefault(),!j&&u.key.length===1&&ae(u.key),["ArrowUp","ArrowDown","Home","End"].includes(u.key)){let P=_().filter(D=>!D.disabled).map(D=>D.ref.current);if(["ArrowUp","End"].includes(u.key)&&(P=P.slice().reverse()),["ArrowUp","ArrowDown"].includes(u.key)){const D=u.target,O=P.indexOf(D);P=P.slice(O+1)}setTimeout(()=>y(P)),u.preventDefault()}})})})})})})});es.displayName=kr;var Pr="SelectItemAlignedPosition",ts=r.forwardRef((t,a)=>{const{__scopeSelect:s,onPlaced:n,...l}=t,p=ce(ye,s),c=de(ye,s),[i,o]=r.useState(null),[f,N]=r.useState(null),S=se(a,v=>N(v)),I=Fe(s),R=r.useRef(!1),C=r.useRef(!0),{viewport:m,selectedItem:g,selectedItemText:w,focusSelectedItem:x}=c,h=r.useCallback(()=>{if(p.trigger&&p.valueNode&&i&&f&&m&&g&&w){const v=p.trigger.getBoundingClientRect(),L=f.getBoundingClientRect(),G=p.valueNode.getBoundingClientRect(),z=w.getBoundingClientRect();if(p.dir!=="rtl"){const D=z.left-L.left,O=G.left-D,ue=v.left-O,pe=v.width+ue,He=Math.max(pe,L.width),Ve=window.innerWidth-ee,Ue=St(O,[ee,Math.max(ee,Ve-He)]);i.style.minWidth=pe+"px",i.style.left=Ue+"px"}else{const D=L.right-z.right,O=window.innerWidth-G.right-D,ue=window.innerWidth-v.right-O,pe=v.width+ue,He=Math.max(pe,L.width),Ve=window.innerWidth-ee,Ue=St(O,[ee,Math.max(ee,Ve-He)]);i.style.minWidth=pe+"px",i.style.right=Ue+"px"}const K=I(),_=window.innerHeight-ee*2,T=m.scrollHeight,k=window.getComputedStyle(f),B=parseInt(k.borderTopWidth,10),y=parseInt(k.paddingTop,10),V=parseInt(k.borderBottomWidth,10),W=parseInt(k.paddingBottom,10),J=B+y+T+W+V,re=Math.min(g.offsetHeight*5,J),ae=window.getComputedStyle(m),te=parseInt(ae.paddingTop,10),ne=parseInt(ae.paddingBottom,10),q=v.top+v.height/2-ee,U=_-q,d=g.offsetHeight/2,u=g.offsetTop+d,j=B+y+u,A=J-j;if(j<=q){const D=K.length>0&&g===K[K.length-1].ref.current;i.style.bottom="0px";const O=f.clientHeight-m.offsetTop-m.offsetHeight,ue=Math.max(U,d+(D?ne:0)+O+V),pe=j+ue;i.style.height=pe+"px"}else{const D=K.length>0&&g===K[0].ref.current;i.style.top="0px";const ue=Math.max(q,B+m.offsetTop+(D?te:0)+d)+A;i.style.height=ue+"px",m.scrollTop=j-q+m.offsetTop}i.style.margin=`${ee}px 0`,i.style.minHeight=re+"px",i.style.maxHeight=_+"px",n==null||n(),requestAnimationFrame(()=>R.current=!0)}},[I,p.trigger,p.valueNode,i,f,m,g,w,p.dir,n]);ie(()=>h(),[h]);const[b,M]=r.useState();ie(()=>{f&&M(window.getComputedStyle(f).zIndex)},[f]);const F=r.useCallback(v=>{v&&C.current===!0&&(h(),x==null||x(),C.current=!1)},[h,x]);return e.jsx(Ir,{scope:s,contentWrapper:i,shouldExpandOnScrollRef:R,onScrollButtonChange:F,children:e.jsx("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:b},children:e.jsx(Q.div,{...l,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});ts.displayName=Pr;var Er="SelectPopperPosition",Xe=r.forwardRef((t,a)=>{const{__scopeSelect:s,align:n="start",collisionPadding:l=ee,...p}=t,c=$e(s);return e.jsx(Ws,{...c,...p,ref:a,align:n,collisionPadding:l,style:{boxSizing:"border-box",...p.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Xe.displayName=Er;var[Ir,ut]=Ce(ye,{}),Ze="SelectViewport",ss=r.forwardRef((t,a)=>{const{__scopeSelect:s,nonce:n,...l}=t,p=de(Ze,s),c=ut(Ze,s),i=se(a,p.onViewportChange),o=r.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(Oe.Slot,{scope:s,children:e.jsx(Q.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:i,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:X(l.onScroll,f=>{const N=f.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:I}=c;if(I!=null&&I.current&&S){const R=Math.abs(o.current-N.scrollTop);if(R>0){const C=window.innerHeight-ee*2,m=parseFloat(S.style.minHeight),g=parseFloat(S.style.height),w=Math.max(m,g);if(w<C){const x=w+R,h=Math.min(C,x),b=x-h;S.style.height=h+"px",S.style.bottom==="0px"&&(N.scrollTop=b>0?b:0,S.style.justifyContent="flex-end")}}}o.current=N.scrollTop})})})]})});ss.displayName=Ze;var as="SelectGroup",[Rr,Mr]=Ce(as),Ar=r.forwardRef((t,a)=>{const{__scopeSelect:s,...n}=t,l=tt();return e.jsx(Rr,{scope:s,id:l,children:e.jsx(Q.div,{role:"group","aria-labelledby":l,...n,ref:a})})});Ar.displayName=as;var rs="SelectLabel",ns=r.forwardRef((t,a)=>{const{__scopeSelect:s,...n}=t,l=Mr(rs,s);return e.jsx(Q.div,{id:l.id,...n,ref:a})});ns.displayName=rs;var Le="SelectItem",[Dr,ls]=Ce(Le),os=r.forwardRef((t,a)=>{const{__scopeSelect:s,value:n,disabled:l=!1,textValue:p,...c}=t,i=ce(Le,s),o=de(Le,s),f=i.value===n,[N,S]=r.useState(p??""),[I,R]=r.useState(!1),C=se(a,x=>{var h;return(h=o.itemRefCallback)==null?void 0:h.call(o,x,n,l)}),m=tt(),g=r.useRef("touch"),w=()=>{l||(i.onValueChange(n),i.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Dr,{scope:s,value:n,disabled:l,textId:m,isSelected:f,onItemTextChange:r.useCallback(x=>{S(h=>h||((x==null?void 0:x.textContent)??"").trim())},[]),children:e.jsx(Oe.ItemSlot,{scope:s,value:n,disabled:l,textValue:N,children:e.jsx(Q.div,{role:"option","aria-labelledby":m,"data-highlighted":I?"":void 0,"aria-selected":f&&I,"data-state":f?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...c,ref:C,onFocus:X(c.onFocus,()=>R(!0)),onBlur:X(c.onBlur,()=>R(!1)),onClick:X(c.onClick,()=>{g.current!=="mouse"&&w()}),onPointerUp:X(c.onPointerUp,()=>{g.current==="mouse"&&w()}),onPointerDown:X(c.onPointerDown,x=>{g.current=x.pointerType}),onPointerMove:X(c.onPointerMove,x=>{var h;g.current=x.pointerType,l?(h=o.onItemLeave)==null||h.call(o):g.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:X(c.onPointerLeave,x=>{var h;x.currentTarget===document.activeElement&&((h=o.onItemLeave)==null||h.call(o))}),onKeyDown:X(c.onKeyDown,x=>{var b;((b=o.searchRef)==null?void 0:b.current)!==""&&x.key===" "||(Nr.includes(x.key)&&w(),x.key===" "&&x.preventDefault())})})})})});os.displayName=Le;var _e="SelectItemText",is=r.forwardRef((t,a)=>{const{__scopeSelect:s,className:n,style:l,...p}=t,c=ce(_e,s),i=de(_e,s),o=ls(_e,s),f=Sr(_e,s),[N,S]=r.useState(null),I=se(a,w=>S(w),o.onItemTextChange,w=>{var x;return(x=i.itemTextRefCallback)==null?void 0:x.call(i,w,o.value,o.disabled)}),R=N==null?void 0:N.textContent,C=r.useMemo(()=>e.jsx("option",{value:o.value,disabled:o.disabled,children:R},o.value),[o.disabled,o.value,R]),{onNativeOptionAdd:m,onNativeOptionRemove:g}=f;return ie(()=>(m(C),()=>g(C)),[m,g,C]),e.jsxs(e.Fragment,{children:[e.jsx(Q.span,{id:o.textId,...p,ref:I}),o.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Pt.createPortal(p.children,c.valueNode):null]})});is.displayName=_e;var cs="SelectItemIndicator",ds=r.forwardRef((t,a)=>{const{__scopeSelect:s,...n}=t;return ls(cs,s).isSelected?e.jsx(Q.span,{"aria-hidden":!0,...n,ref:a}):null});ds.displayName=cs;var Je="SelectScrollUpButton",us=r.forwardRef((t,a)=>{const s=de(Je,t.__scopeSelect),n=ut(Je,t.__scopeSelect),[l,p]=r.useState(!1),c=se(a,n.onScrollButtonChange);return ie(()=>{if(s.viewport&&s.isPositioned){let i=function(){const f=o.scrollTop>0;p(f)};const o=s.viewport;return i(),o.addEventListener("scroll",i),()=>o.removeEventListener("scroll",i)}},[s.viewport,s.isPositioned]),l?e.jsx(ms,{...t,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:o}=s;i&&o&&(i.scrollTop=i.scrollTop-o.offsetHeight)}}):null});us.displayName=Je;var Qe="SelectScrollDownButton",ps=r.forwardRef((t,a)=>{const s=de(Qe,t.__scopeSelect),n=ut(Qe,t.__scopeSelect),[l,p]=r.useState(!1),c=se(a,n.onScrollButtonChange);return ie(()=>{if(s.viewport&&s.isPositioned){let i=function(){const f=o.scrollHeight-o.clientHeight,N=Math.ceil(o.scrollTop)<f;p(N)};const o=s.viewport;return i(),o.addEventListener("scroll",i),()=>o.removeEventListener("scroll",i)}},[s.viewport,s.isPositioned]),l?e.jsx(ms,{...t,ref:c,onAutoScroll:()=>{const{viewport:i,selectedItem:o}=s;i&&o&&(i.scrollTop=i.scrollTop+o.offsetHeight)}}):null});ps.displayName=Qe;var ms=r.forwardRef((t,a)=>{const{__scopeSelect:s,onAutoScroll:n,...l}=t,p=de("SelectScrollButton",s),c=r.useRef(null),i=Fe(s),o=r.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return r.useEffect(()=>()=>o(),[o]),ie(()=>{var N;const f=i().find(S=>S.ref.current===document.activeElement);(N=f==null?void 0:f.ref.current)==null||N.scrollIntoView({block:"nearest"})},[i]),e.jsx(Q.div,{"aria-hidden":!0,...l,ref:a,style:{flexShrink:0,...l.style},onPointerDown:X(l.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(n,50))}),onPointerMove:X(l.onPointerMove,()=>{var f;(f=p.onItemLeave)==null||f.call(p),c.current===null&&(c.current=window.setInterval(n,50))}),onPointerLeave:X(l.onPointerLeave,()=>{o()})})}),Lr="SelectSeparator",hs=r.forwardRef((t,a)=>{const{__scopeSelect:s,...n}=t;return e.jsx(Q.div,{"aria-hidden":!0,...n,ref:a})});hs.displayName=Lr;var et="SelectArrow",Or=r.forwardRef((t,a)=>{const{__scopeSelect:s,...n}=t,l=$e(s),p=ce(et,s),c=de(et,s);return p.open&&c.position==="popper"?e.jsx(qs,{...l,...n,ref:a}):null});Or.displayName=et;function xs(t){return t===""||t===void 0}var fs=r.forwardRef((t,a)=>{const{value:s,...n}=t,l=r.useRef(null),p=se(a,l),c=Qs(s);return r.useEffect(()=>{const i=l.current,o=window.HTMLSelectElement.prototype,N=Object.getOwnPropertyDescriptor(o,"value").set;if(c!==s&&N){const S=new Event("change",{bubbles:!0});N.call(i,s),i.dispatchEvent(S)}},[c,s]),e.jsx(Os,{asChild:!0,children:e.jsx("select",{...n,ref:p,defaultValue:s})})});fs.displayName="BubbleSelect";function gs(t){const a=Zs(t),s=r.useRef(""),n=r.useRef(0),l=r.useCallback(c=>{const i=s.current+c;a(i),function o(f){s.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>o(""),1e3))}(i)},[a]),p=r.useCallback(()=>{s.current="",window.clearTimeout(n.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(n.current),[]),[s,l,p]}function vs(t,a,s){const l=a.length>1&&Array.from(a).every(f=>f===a[0])?a[0]:a,p=s?t.indexOf(s):-1;let c=Fr(t,Math.max(p,0));l.length===1&&(c=c.filter(f=>f!==s));const o=c.find(f=>f.textValue.toLowerCase().startsWith(l.toLowerCase()));return o!==s?o:void 0}function Fr(t,a){return t.map((s,n)=>t[(a+n)%t.length])}var $r=Wt,ys=Kt,Hr=Yt,Vr=Xt,Ur=Zt,js=Jt,Br=ss,Ns=ns,ws=os,zr=is,Wr=ds,Cs=us,bs=ps,Ss=hs;const qr=$r,Kr=Hr,_s=r.forwardRef(({className:t,children:a,...s},n)=>e.jsxs(ys,{ref:n,className:H("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[a,e.jsx(Vr,{asChild:!0,children:e.jsx(st,{className:"h-4 w-4 opacity-50"})})]}));_s.displayName=ys.displayName;const Ts=r.forwardRef(({className:t,...a},s)=>e.jsx(Cs,{ref:s,className:H("flex cursor-default items-center justify-center py-1",t),...a,children:e.jsx(Et,{className:"h-4 w-4"})}));Ts.displayName=Cs.displayName;const ks=r.forwardRef(({className:t,...a},s)=>e.jsx(bs,{ref:s,className:H("flex cursor-default items-center justify-center py-1",t),...a,children:e.jsx(st,{className:"h-4 w-4"})}));ks.displayName=bs.displayName;const Ps=r.forwardRef(({className:t,children:a,position:s="popper",...n},l)=>e.jsx(Ur,{children:e.jsxs(js,{ref:l,className:H("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...n,children:[e.jsx(Ts,{}),e.jsx(Br,{className:H("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(ks,{})]})}));Ps.displayName=js.displayName;const Gr=r.forwardRef(({className:t,...a},s)=>e.jsx(Ns,{ref:s,className:H("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a}));Gr.displayName=Ns.displayName;const Es=r.forwardRef(({className:t,children:a,...s},n)=>e.jsxs(ws,{ref:n,className:H("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Wr,{children:e.jsx(Js,{className:"h-4 w-4"})})}),e.jsx(zr,{children:a})]}));Es.displayName=ws.displayName;const Yr=r.forwardRef(({className:t,...a},s)=>e.jsx(Ss,{ref:s,className:H("-mx-1 my-1 h-px bg-muted",t),...a}));Yr.displayName=Ss.displayName;function Xr(){const[t,a]=r.useState([]),[s,n]=r.useState(null),[l,p]=r.useState([]),[c,i]=r.useState([]),[o,f]=r.useState(!0),[N,S]=r.useState(!1),[I,R]=r.useState(null),[C,m]=r.useState(1),{toast:g}=we(),w=r.useCallback(async(F=1)=>{try{f(!0),R(null);const v=await wt.getCampaigns(F);a(v.data),n({current_page:v.current_page,first_page_url:v.first_page_url,from:v.from,last_page:v.last_page,last_page_url:v.last_page_url,links:v.links,next_page_url:v.next_page_url,path:v.path,per_page:v.per_page,prev_page_url:v.prev_page_url,to:v.to,total:v.total}),m(F)}catch(v){const L=v instanceof Error?v.message:"Failed to fetch campaigns";R(L),g({title:"Error",description:L,variant:"destructive"})}finally{f(!1)}},[g]);r.useEffect(()=>{(async()=>{try{const[v,L]=await Promise.all([je.getAllContacts(),Ne.getAllTemplates()]);p(v),i(L)}catch(v){console.error("Failed to load contacts/templates:",v)}})()},[]),r.useEffect(()=>{w(1)},[w]);const x=async F=>{try{S(!0);const v=await wt.createCampaign(F);return v.success?(g({title:"Campaign Created",description:v.message||"Campaign has been created and is being processed."}),await w(C)):g({title:"Campaign Failed",description:v.message||"Failed to create campaign",variant:"destructive"}),v}catch(v){const L=v instanceof Error?v.message:"Failed to create campaign";throw g({title:"Campaign Error",description:L,variant:"destructive"}),v}finally{S(!1)}},h=F=>{F>=1&&s&&F<=s.last_page&&w(F)};return{campaigns:t,pagination:s,contacts:l,templates:c,loading:o,creating:N,error:I,currentPage:C,fetchCampaigns:w,createCampaign:x,goToPage:h,goToNextPage:()=>{s!=null&&s.next_page_url&&h(C+1)},goToPrevPage:()=>{s!=null&&s.prev_page_url&&h(C-1)},refetch:()=>w(C)}}function Zr(){const{campaigns:t,pagination:a,contacts:s,templates:n,loading:l,creating:p,error:c,currentPage:i,createCampaign:o,goToPage:f,goToNextPage:N,goToPrevPage:S,refetch:I}=Xr(),[R,C]=r.useState(!1),[m,g]=r.useState(null),[w,x]=r.useState([]),[h,b]=r.useState(!1),[M,F]=r.useState(""),[v,L]=r.useState(null),{toast:G}=we(),z=async()=>{if(!M||!m){G({title:"Error",description:"Please fill in campaign name and select a template.",variant:"destructive"});return}if(!h&&w.length===0){G({title:"Error",description:"Please select recipients or choose 'Send to All'.",variant:"destructive"});return}try{await o({template_id:m,name:M,contact_ids:h?[]:w}),F(""),g(null),x([]),b(!1),C(!1)}catch{}},K=(y,V)=>{x(V?[...w,y]:w.filter(W=>W!==y))},_=y=>{x(y?s.map(V=>V.id):[])},T=y=>{switch(y.toLowerCase()){case"completed":case"sent":return e.jsx(It,{className:"h-4 w-4 text-green-500"});case"processing":case"sending":return e.jsx(oe,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":case"error":return e.jsx(qe,{className:"h-4 w-4 text-red-500"});case"pending":case"queued":return e.jsx(ha,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(ia,{className:"h-4 w-4 text-gray-500"})}},k=y=>{switch(y.toLowerCase()){case"completed":case"sent":return"bg-green-500";case"processing":case"sending":return"bg-blue-500";case"failed":case"error":return"bg-red-500";case"pending":case"queued":return"bg-yellow-500";default:return"bg-gray-500"}},B=y=>new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return c?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading campaigns: ",c]}),e.jsx(E,{onClick:I,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Campaigns"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email campaigns"})]}),e.jsxs(me,{open:R,onOpenChange:C,children:[e.jsx(he,{asChild:!0,children:e.jsxs(E,{disabled:l,children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})}),e.jsxs(xe,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(fe,{children:[e.jsx(ge,{children:"Create New Email Campaign"}),e.jsx(ve,{children:"Create and send an email campaign to your subscribers."})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"campaign-name",children:"Campaign Name"}),e.jsx(le,{id:"campaign-name",value:M,onChange:y=>F(y.target.value),placeholder:"Enter campaign name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Y,{htmlFor:"campaign-template",children:"Email Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(qr,{value:(m==null?void 0:m.toString())||"",onValueChange:y=>g(Number.parseInt(y)),children:[e.jsx(_s,{className:"flex-1",children:e.jsx(Kr,{placeholder:"Select template"})}),e.jsx(Ps,{children:n.map(y=>e.jsx(Es,{value:y.id.toString(),children:y.title},y.id))})]}),m&&e.jsxs(me,{children:[e.jsx(he,{asChild:!0,children:e.jsx(E,{variant:"outline",size:"sm",onClick:()=>L(n.find(y=>y.id===m)||null),children:e.jsx(Mt,{className:"h-4 w-4"})})}),e.jsxs(xe,{className:"max-w-2xl",children:[e.jsxs(fe,{children:[e.jsx(ge,{children:v==null?void 0:v.title}),e.jsx(ve,{children:"Template Preview"})]}),v&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Y,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:v.subject})]}),e.jsxs("div",{children:[e.jsx(Y,{children:"Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:v.body}})]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Y,{children:"Select Recipients"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{id:"send-to-all",checked:h,onCheckedChange:y=>{b(y),y&&x([])}}),e.jsxs(Y,{htmlFor:"send-to-all",className:"text-sm font-medium",children:["Send to All Users (",s.length," contacts)"]})]})})]}),!h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[w.length," of ",s.length," contacts selected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Be,{id:"select-all-contacts",checked:w.length===s.length,onCheckedChange:_}),e.jsx(Y,{htmlFor:"select-all-contacts",className:"text-sm",children:"Select All"})]})]}),e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:e.jsx("div",{className:"p-4 space-y-3",children:s.map(y=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[e.jsx(Be,{id:`contact-${y.id}`,checked:w.includes(y.id),onCheckedChange:V=>K(y.id,V)}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:y.name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:y.email})]})})})]},y.id))})})]}),h&&e.jsxs(Ae,{children:[e.jsx(Ta,{className:"h-4 w-4"}),e.jsxs(De,{children:["This campaign will be sent to all ",s.length," contacts in your database."]})]})]})]}),e.jsxs(Re,{children:[e.jsx(E,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(E,{onClick:z,disabled:p,children:p?e.jsxs(e.Fragment,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Campaign"})]})]})]})]}),l?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(oe,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading campaigns..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(y=>e.jsxs(nt,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(lt,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(ot,{className:"text-lg",children:y.name}),e.jsxs(it,{className:"mt-1",children:["Template: ",y.template.title]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[T(y.status),e.jsx(yr,{className:`${k(y.status)} text-white`,children:y.status.charAt(0).toUpperCase()+y.status.slice(1)})]})]})}),e.jsx(ct,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Contacts:"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:y.total_contacts})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Emails Sent:"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:y.emails_sent})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Created:"}),e.jsx("p",{className:"text-sm text-gray-600",children:B(y.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:B(y.updated_at)})]})]})}),e.jsx(dt,{children:e.jsxs("div",{className:"w-full text-center text-sm text-gray-500",children:["Campaign ID: ",y.id]})})]},y.id))}),a&&a.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(E,{variant:"outline",size:"sm",onClick:S,disabled:!a.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,a.last_page)},(y,V)=>{const W=V+1;return e.jsx(E,{variant:i===W?"default":"outline",size:"sm",onClick:()=>f(W),children:W},W)})}),e.jsx(E,{variant:"outline",size:"sm",onClick:N,disabled:!a.next_page_url,children:"Next"})]})}),t.length===0&&!l&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Ge,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first email campaign to get started."}),e.jsxs(E,{onClick:()=>C(!0),disabled:l,children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})]})]})]})}function dn(){const t=Is(),{auth:a}=t.props,[s,n]=r.useState("users"),l=()=>{switch(s){case"users":return e.jsx(bt,{});case"templates":return e.jsx(gr,{});case"campaigns":return e.jsx(Zr,{});default:return e.jsx(bt,{})}};return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsxs("div",{className:"w-64 bg-cyan-500 text-white flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-cyan-400",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ya,{className:"h-5 w-5"}),e.jsx("h1",{className:"text-lg font-semibold",children:"Email Automation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ks,{className:"h-10 w-10",children:[e.jsx(Gs,{src:"/placeholder.svg?height=40&width=40"}),e.jsx(Ys,{children:"JD"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.user.name}),e.jsx("div",{className:"text-sm text-cyan-200",children:a.user.email})]})]})]}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs(E,{variant:s==="users"?"secondary":"ghost",className:`w-full justify-start ${s==="users"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>n("users"),children:[e.jsx(Va,{className:"mr-2 h-4 w-4"}),"Users"]})}),e.jsx("li",{children:e.jsxs(E,{variant:s==="templates"?"secondary":"ghost",className:`w-full justify-start ${s==="templates"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>n("templates"),children:[e.jsx(Ke,{className:"mr-2 h-4 w-4"}),"Email Templates"]})}),e.jsx("li",{children:e.jsxs(E,{variant:s==="campaigns"?"secondary":"ghost",className:`w-full justify-start ${s==="campaigns"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>n("campaigns"),children:[e.jsx(Ge,{className:"mr-2 h-4 w-4"}),"Send Campaigns"]})})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:l()})]})}export{dn as default};
