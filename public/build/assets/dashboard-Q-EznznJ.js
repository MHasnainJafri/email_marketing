import{r as n,j as e,a as Tt}from"./app-BuIDApOg.js";import{a as H,c as K,b as as,B as g,u as ge,S as ea}from"./button-D9_wZLgZ.js";import{X as ns,c as rs,u as ta,R as sa,a as kt,b as aa,V as na,A as ra,P as la,h as ca,d as ia,e as oa,F as da,D as ma,C as ha,f as ua,g as pa,i as xa,j as ga}from"./index-DUpxREvA.js";import{I as de,P as se,r as ls}from"./index-JifmKwTS.js";import{D as me,a as je,b as he,c as ue,d as pe,e as xe,f as $e}from"./dialog-C0Xb6clv.js";import{L as G}from"./label-BRlHfGpo.js";import{L as J}from"./loader-circle-B59jh1tu.js";import{u as Bt,c as fa,a as Ne,b as Z,d as ja,C as ya}from"./index-tT8C7Z5j.js";import{u as va,C as jt}from"./checkbox-C-qXPkSv.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Ft=H("AlignCenter",Na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Ot=H("AlignLeft",wa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Ht=H("AlignRight",ba);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],$t=H("Bold",Ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_a=H("Calendar",Sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Et=H("ChevronDown",Ta);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],cs=H("ChevronUp",ka);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Ge=H("CircleAlert",Ea);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mt=H("CircleCheckBig",Pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Ma=H("Clock",Ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aa=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],is=H("Copy",Aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ht=H("Eye",Ra);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Da=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],st=H("FileText",Da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const La=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],zt=H("Heading1",La);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],Vt=H("Heading2",Ba);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Oa=H("House",Fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ut=H("Image",Ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Wt=H("Italic",$a);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],qt=H("Link",za);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]],Kt=H("ListOrdered",Va);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],Gt=H("List",Ua);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],ke=H("Mail",Wa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qa=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Xe=H("Package",qa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],We=H("Plus",Ka);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ga=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],Xa=H("Printer",Ga);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Za=H("RefreshCw",Ya);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xt=H("Save",Ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],os=H("Search",Qa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Re=H("Send",en);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],sn=H("SquarePen",tn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ds=H("Trash2",an);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Yt=H("Underline",nn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],qe=H("Upload",rn);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ln=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Nt=H("Users",ln),at=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:K("w-full caption-bottom text-sm",t),...a})}));at.displayName="Table";const nt=n.forwardRef(({className:t,...a},s)=>e.jsx("thead",{ref:s,className:K("[&_tr]:border-b",t),...a}));nt.displayName="TableHeader";const rt=n.forwardRef(({className:t,...a},s)=>e.jsx("tbody",{ref:s,className:K("[&_tr:last-child]:border-0",t),...a}));rt.displayName="TableBody";const cn=n.forwardRef(({className:t,...a},s)=>e.jsx("tfoot",{ref:s,className:K("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...a}));cn.displayName="TableFooter";const _e=n.forwardRef(({className:t,...a},s)=>e.jsx("tr",{ref:s,className:K("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...a}));_e.displayName="TableRow";const ee=n.forwardRef(({className:t,...a},s)=>e.jsx("th",{ref:s,className:K("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...a}));ee.displayName="TableHead";const te=n.forwardRef(({className:t,...a},s)=>e.jsx("td",{ref:s,className:K("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...a}));te.displayName="TableCell";const on=n.forwardRef(({className:t,...a},s)=>e.jsx("caption",{ref:s,className:K("mt-4 text-sm text-muted-foreground",t),...a}));on.displayName="TableCaption";function dn(t,a=[]){let s=[];function r(u,d){const c=n.createContext(d),o=s.length;s=[...s,d];const x=_=>{var m;const{scope:P,children:I,...w}=_,f=((m=P==null?void 0:P[t])==null?void 0:m[o])||c,j=n.useMemo(()=>w,Object.values(w));return e.jsx(f.Provider,{value:j,children:I})};x.displayName=u+"Provider";function b(_,P){var f;const I=((f=P==null?void 0:P[t])==null?void 0:f[o])||c,w=n.useContext(I);if(w)return w;if(d!==void 0)return d;throw new Error(`\`${_}\` must be used within \`${u}\``)}return[x,b]}const l=()=>{const u=s.map(d=>n.createContext(d));return function(c){const o=(c==null?void 0:c[t])||u;return n.useMemo(()=>({[`__scope${t}`]:{...c,[t]:o}}),[c,o])}};return l.scopeName=t,[r,mn(l,...a)]}function mn(...t){const a=t[0];if(t.length===1)return a;const s=()=>{const r=t.map(l=>({useScope:l(),scopeName:l.scopeName}));return function(u){const d=r.reduce((c,{useScope:o,scopeName:x})=>{const _=o(u)[`__scope${x}`];return{...c,..._}},{});return n.useMemo(()=>({[`__scope${a.scopeName}`]:d}),[d])}};return s.scopeName=a.scopeName,s}function Zt(t,a){if(typeof t=="function")return t(a);t!=null&&(t.current=a)}function hn(...t){return a=>{let s=!1;const r=t.map(l=>{const u=Zt(l,a);return!s&&typeof u=="function"&&(s=!0),u});if(s)return()=>{for(let l=0;l<r.length;l++){const u=r[l];typeof u=="function"?u():Zt(t[l],null)}}}}function un(t){const a=pn(t),s=n.forwardRef((r,l)=>{const{children:u,...d}=r,c=n.Children.toArray(u),o=c.find(gn);if(o){const x=o.props.children,b=c.map(_=>_===o?n.Children.count(x)>1?n.Children.only(null):n.isValidElement(x)?x.props.children:null:_);return e.jsx(a,{...d,ref:l,children:n.isValidElement(x)?n.cloneElement(x,void 0,b):null})}return e.jsx(a,{...d,ref:l,children:u})});return s.displayName=`${t}.Slot`,s}function pn(t){const a=n.forwardRef((s,r)=>{const{children:l,...u}=s;if(n.isValidElement(l)){const d=jn(l),c=fn(u,l.props);return l.type!==n.Fragment&&(c.ref=r?hn(r,d):d),n.cloneElement(l,c)}return n.Children.count(l)>1?n.Children.only(null):null});return a.displayName=`${t}.SlotClone`,a}var xn=Symbol("radix.slottable");function gn(t){return n.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===xn}function fn(t,a){const s={...a};for(const r in a){const l=t[r],u=a[r];/^on[A-Z]/.test(r)?l&&u?s[r]=(...c)=>{const o=u(...c);return l(...c),o}:l&&(s[r]=l):r==="style"?s[r]={...l,...u}:r==="className"&&(s[r]=[l,u].filter(Boolean).join(" "))}return{...t,...s}}function jn(t){var r,l;let a=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,s=a&&"isReactWarning"in a&&a.isReactWarning;return s?t.ref:(a=(l=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:l.get,s=a&&"isReactWarning"in a&&a.isReactWarning,s?t.props.ref:t.props.ref||t.ref)}var yn=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ms=yn.reduce((t,a)=>{const s=un(`Primitive.${a}`),r=n.forwardRef((l,u)=>{const{asChild:d,...c}=l,o=d?s:a;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(o,{...c,ref:u})});return r.displayName=`Primitive.${a}`,{...t,[a]:r}},{}),Pt="Progress",It=100,[vn,Tr]=dn(Pt),[Nn,wn]=vn(Pt),hs=n.forwardRef((t,a)=>{const{__scopeProgress:s,value:r=null,max:l,getValueLabel:u=bn,...d}=t;(l||l===0)&&!Jt(l)&&console.error(Cn(`${l}`,"Progress"));const c=Jt(l)?l:It;r!==null&&!Qt(r,c)&&console.error(Sn(`${r}`,"Progress"));const o=Qt(r,c)?r:null,x=lt(o)?u(o,c):void 0;return e.jsx(Nn,{scope:s,value:o,max:c,children:e.jsx(ms.div,{"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":lt(o)?o:void 0,"aria-valuetext":x,role:"progressbar","data-state":xs(o,c),"data-value":o??void 0,"data-max":c,...d,ref:a})})});hs.displayName=Pt;var us="ProgressIndicator",ps=n.forwardRef((t,a)=>{const{__scopeProgress:s,...r}=t,l=wn(us,s);return e.jsx(ms.div,{"data-state":xs(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...r,ref:a})});ps.displayName=us;function bn(t,a){return`${Math.round(t/a*100)}%`}function xs(t,a){return t==null?"indeterminate":t===a?"complete":"loading"}function lt(t){return typeof t=="number"}function Jt(t){return lt(t)&&!isNaN(t)&&t>0}function Qt(t,a){return lt(t)&&!isNaN(t)&&t<=a&&t>=0}function Cn(t,a){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${It}\`.`}function Sn(t,a){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${It} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var gs=hs,_n=ps;const Mt=n.forwardRef(({className:t,value:a,...s},r)=>e.jsx(gs,{ref:r,className:K("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...s,children:e.jsx(_n,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));Mt.displayName=gs.displayName;const Tn=as("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ye=n.forwardRef(({className:t,variant:a,...s},r)=>e.jsx("div",{ref:r,role:"alert",className:K(Tn({variant:a}),t),...s}));ye.displayName="Alert";const kn=n.forwardRef(({className:t,...a},s)=>e.jsx("h5",{ref:s,className:K("mb-1 font-medium leading-none tracking-tight",t),...a}));kn.displayName="AlertTitle";const ve=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:K("text-sm [&_p]:leading-relaxed",t),...a}));ve.displayName="AlertDescription";const At="/api",Y=Tt.create({baseURL:At,headers:{Accept:"application/json","Content-Type":"application/json"}}),He={getContacts:async(t=1,a="")=>{const s=new URLSearchParams({page:t.toString()});return a.trim()&&s.append("search",a.trim()),(await Y.get(`/contacts?${s.toString()}`)).data},getAllContacts:async()=>(await Y.get("/contacts?per_page=1000")).data.data||[],importContacts:async t=>{const a=new FormData;return a.append("file",t),(await Tt.post(`${At}/contacts/import`,a,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data},createContact:async t=>(await Y.post("/contacts",t)).data,updateContact:async(t,a)=>(await Y.put(`/contacts/${t}`,a)).data,deleteContact:async t=>(await Y.delete(`/contacts/${t}`)).data},Ve={getBatches:async(t=1,a="")=>{const s=new URLSearchParams({page:t.toString()});return a.trim()&&s.append("search",a.trim()),(await Y.get(`/batches?${s.toString()}`)).data},getBatchDetail:async t=>(await Y.get(`/batches/${t}`)).data,importBatch:async(t,a)=>{const s=new FormData;return s.append("file",t),s.append("batch_name",a),(await Tt.post(`${At}/contacts/import`,s,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}})).data},getBatchContacts:async t=>(await Y.get(`/batches/${t}/contacts`)).data,deleteBatch:async t=>(await Y.delete(`/batches/${t}`)).data},Te={getTemplates:async(t=1)=>(await Y.get(`/templates?page=${t}`)).data,getAllTemplates:async()=>(await Y.get("/templates?per_page=1000")).data.data||[],createTemplate:async t=>(await Y.post("/templates",t)).data,updateTemplate:async(t,a)=>(await Y.put(`/templates/${t}`,a)).data,deleteTemplate:async t=>(await Y.delete(`/templates/${t}`)).data,getTemplate:async t=>(await Y.get(`/templates/${t}`)).data},ct={getCampaigns:async(t=1)=>(await Y.get(`/campaigns?page=${t}`)).data,createCampaign:async t=>(await Y.post("/send-email",t)).data,sendEmailToBatch:async(t,a)=>(await Y.post(`/send-email/batch/${t}`,a)).data},En=1,Pn=1e6;let yt=0;function In(){return yt=(yt+1)%Number.MAX_SAFE_INTEGER,yt.toString()}const vt=new Map,es=t=>{if(vt.has(t))return;const a=setTimeout(()=>{vt.delete(t),Ke({type:"REMOVE_TOAST",toastId:t})},Pn);vt.set(t,a)},Mn=(t,a)=>{switch(a.type){case"ADD_TOAST":return{...t,toasts:[a.toast,...t.toasts].slice(0,En)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(s=>s.id===a.toast.id?{...s,...a.toast}:s)};case"DISMISS_TOAST":{const{toastId:s}=a;return s?es(s):t.toasts.forEach(r=>{es(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===s||s===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(s=>s.id!==a.toastId)}}},et=[];let tt={toasts:[]};function Ke(t){tt=Mn(tt,t),et.forEach(a=>{a(tt)})}function An({...t}){const a=In(),s=l=>Ke({type:"UPDATE_TOAST",toast:{...l,id:a}}),r=()=>Ke({type:"DISMISS_TOAST",toastId:a});return Ke({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:l=>{l||r()}}}),{id:a,dismiss:r,update:s}}function we(){const[t,a]=n.useState(tt);return n.useEffect(()=>(et.push(a),()=>{const s=et.indexOf(a);s>-1&&et.splice(s,1)}),[t]),{...t,toast:An,dismiss:s=>Ke({type:"DISMISS_TOAST",toastId:s})}}function Rn(){const[t,a]=n.useState([]),[s,r]=n.useState(null),[l,u]=n.useState(!0),[d,c]=n.useState(!1),[o,x]=n.useState(null),[b,_]=n.useState(1),[P,I]=n.useState(""),[w,f]=n.useState(""),{toast:j}=we(),m=n.useRef();n.useEffect(()=>(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{f(P)},500),()=>{m.current&&clearTimeout(m.current)}),[P]);const h=n.useCallback(async(v=1,C="")=>{try{u(!0),x(null);const i=await He.getContacts(v,C);a(i.data),r({current_page:i.current_page,first_page_url:i.first_page_url,from:i.from,last_page:i.last_page,last_page_url:i.last_page_url,links:i.links,next_page_url:i.next_page_url,path:i.path,per_page:i.per_page,prev_page_url:i.prev_page_url,to:i.to,total:i.total}),_(v)}catch(i){const S=i instanceof Error?i.message:"Failed to fetch contacts";x(S),j({title:"Error",description:S,variant:"destructive"})}finally{u(!1)}},[j]),y=async v=>{try{c(!0);const C=await He.importContacts(v);return C.success?(j({title:"Import Successful",description:`Successfully imported ${C.imported_count||0} contacts${C.failed_count?`. ${C.failed_count} failed.`:""}`}),await h(1,w)):j({title:"Import Failed",description:C.message||"Failed to import contacts",variant:"destructive"}),C}catch(C){const i=C instanceof Error?C.message:"Failed to import contacts";throw j({title:"Import Error",description:i,variant:"destructive"}),C}finally{c(!1)}};n.useEffect(()=>{_(1),h(1,w)},[w,h]),n.useEffect(()=>{h(1,"")},[]);const O=async v=>{try{await He.createContact(v),j({title:"Success",description:"Contact created successfully"}),await h(b,w)}catch(C){const i=C instanceof Error?C.message:"Failed to create contact";throw j({title:"Error",description:i,variant:"destructive"}),C}},$=async(v,C)=>{try{await He.updateContact(v,C),j({title:"Success",description:"Contact updated successfully"}),await h(b,w)}catch(i){const S=i instanceof Error?i.message:"Failed to update contact";throw j({title:"Error",description:S,variant:"destructive"}),i}},A=async v=>{try{await He.deleteContact(v),j({title:"Success",description:"Contact deleted successfully"}),await h(b,w)}catch(C){const i=C instanceof Error?C.message:"Failed to delete contact";throw j({title:"Error",description:i,variant:"destructive"}),C}},N=v=>{v>=1&&s&&v<=s.last_page&&h(v,w)};return{contacts:t,pagination:s,loading:l,importing:d,error:o,currentPage:b,searchTerm:P,debouncedSearchTerm:w,fetchContacts:h,importContacts:y,createContact:O,updateContact:$,deleteContact:A,goToPage:N,goToNextPage:()=>{s!=null&&s.next_page_url&&N(b+1)},goToPrevPage:()=>{s!=null&&s.prev_page_url&&N(b-1)},handleSearch:v=>{I(v)},clearSearch:()=>{I(""),f("")},refetch:()=>h(b,w)}}function Dn(){const{contacts:t,pagination:a,loading:s,importing:r,error:l,currentPage:u,searchTerm:d,debouncedSearchTerm:c,importContacts:o,createContact:x,goToPage:b,goToNextPage:_,goToPrevPage:P,handleSearch:I,clearSearch:w,refetch:f}=Rn(),[j,m]=n.useState(null),[h,y]=n.useState("asc"),[O,$]=n.useState(!1),[A,N]=n.useState(!1),[D,L]=n.useState({name:"",email:""}),[T,F]=n.useState(null),[v,C]=n.useState(null),i=n.useRef(null),{toast:S}=we(),p=[...t].sort((R,E)=>{if(!j)return 0;const B=R[j],U=E[j];return B===null&&U===null?0:B===null?h==="asc"?1:-1:U===null||B<U?h==="asc"?-1:1:B>U?h==="asc"?1:-1:0}),M=R=>{j===R?y(E=>E==="asc"?"desc":"asc"):(m(R),y("asc"))},z=R=>{var B,U;const E=(B=R.target.files)==null?void 0:B[0];if(E){const V=(U=E.name.split(".").pop())==null?void 0:U.toLowerCase();V==="csv"||V==="xlsx"||V==="xls"?(F(E),C(null)):(S({title:"Invalid file format",description:"Please upload a CSV or Excel file (.csv, .xlsx, .xls).",variant:"destructive"}),F(null))}},X=async()=>{if(!T){S({title:"No file selected",description:"Please select a file to import.",variant:"destructive"});return}try{const R=await o(T);C(R),R.success&&setTimeout(()=>{N(!1),F(null),C(null)},3e3)}catch{C({success:!1,message:"Failed to import contacts. Please try again."})}},Q=()=>{F(null),C(null),i.current&&(i.current.value="")},ae=()=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Search:"}),e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(de,{placeholder:"Search users...",value:d,onChange:R=>I(R.target.value),className:"pl-8 w-64"}),d&&e.jsx(g,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-6 w-6 p-0",onClick:w,children:e.jsx(ns,{className:"h-3 w-3"})})]}),c&&e.jsxs("span",{className:"text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:['Searching: "',c,'"']})]}),ne=R=>{S({title:`Export ${R}`,description:`User data exported as ${R} format.`})},fe=async()=>{if(!D.name||!D.email){S({title:"Error",description:"Please fill in all required fields.",variant:"destructive"});return}try{await x(D),L({name:"",email:""}),$(!1)}catch{}},re=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),le=({field:R})=>j!==R?null:h==="asc"?e.jsx(cs,{className:"h-4 w-4"}):e.jsx(Et,{className:"h-4 w-4"});return l?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading contacts: ",l]}),e.jsx(g,{onClick:f,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"All Users"}),e.jsx("p",{className:"text-gray-600",children:"Manage your email subscribers"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{open:O,onOpenChange:$,children:[e.jsx(je,{asChild:!0,children:e.jsxs(g,{variant:"outline",children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),"Add Contact"]})}),e.jsxs(he,{children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Add New Contact"}),e.jsx(xe,{children:"Add a new contact to your email list."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"contact-name",children:"Name"}),e.jsx(de,{id:"contact-name",value:D.name,onChange:R=>L({...D,name:R.target.value}),placeholder:"Enter contact name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"contact-email",children:"Email"}),e.jsx(de,{id:"contact-email",type:"email",value:D.email,onChange:R=>L({...D,email:R.target.value}),placeholder:"Enter email address"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(g,{variant:"outline",onClick:()=>$(!1),children:"Cancel"}),e.jsx(g,{onClick:fe,children:"Add Contact"})]})]})]})]}),e.jsxs(me,{open:A,onOpenChange:R=>{N(R),R||Q()},children:[e.jsx(je,{asChild:!0,children:e.jsxs(g,{className:"bg-gray-600 hover:bg-gray-700",children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Import Excel"]})}),e.jsxs(he,{className:"max-w-md",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Import Contacts"}),e.jsx(xe,{children:"Upload a CSV or Excel file to import contacts. The file should contain columns for Name and Email."})]}),e.jsxs("div",{className:"space-y-4",children:[!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"file-upload",children:"Select File"}),e.jsx("input",{id:"file-upload",type:"file",ref:i,onChange:z,accept:".csv,.xlsx,.xls",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),T&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:T.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(T.size/1024).toFixed(1)," KB)"]})]})}),e.jsxs(ye,{children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx(ve,{children:'Make sure your file has columns named "name" and "email". The first row should contain headers.'})]})]}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Importing contacts..."})]}),e.jsx(Mt,{value:void 0,className:"w-full"})]}),v&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ye,{className:v.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[v.success?e.jsx(mt,{className:"h-4 w-4 text-green-600"}):e.jsx(Ge,{className:"h-4 w-4 text-red-600"}),e.jsx(ve,{className:v.success?"text-green-800":"text-red-800",children:v.message})]}),v.success&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center p-2 bg-green-100 rounded",children:[e.jsx("div",{className:"font-semibold text-green-800",children:v.imported_count||0}),e.jsx("div",{className:"text-green-600",children:"Imported"})]}),v.failed_count&&v.failed_count>0&&e.jsxs("div",{className:"text-center p-2 bg-red-100 rounded",children:[e.jsx("div",{className:"font-semibold text-red-800",children:v.failed_count}),e.jsx("div",{className:"text-red-600",children:"Failed"})]})]}),v.errors&&v.errors.length>0&&e.jsxs("div",{className:"max-h-32 overflow-y-auto",children:[e.jsx("div",{className:"text-sm font-medium text-red-800 mb-1",children:"Errors:"}),e.jsx("ul",{className:"text-xs text-red-600 space-y-1",children:v.errors.map((R,E)=>e.jsxs("li",{children:["• ",R]},E))})]})]})]}),e.jsxs($e,{children:[!v&&e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsx(g,{onClick:X,disabled:!T||r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Import"]})})]}),v&&e.jsx(g,{onClick:()=>N(!1),className:"w-full",children:"Close"})]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Data"}),e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>ne("copy"),children:[e.jsx(is,{className:"mr-1 h-3 w-3"}),"Copy"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>ne("CSV"),children:[e.jsx(st,{className:"mr-1 h-3 w-3"}),"CSV"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>ne("print"),children:[e.jsx(Xa,{className:"mr-1 h-3 w-3"}),"Print"]})]}),e.jsx(ae,{})]})]}),e.jsx("div",{className:"overflow-x-auto",children:s?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading contacts..."})]}):e.jsxs(at,{children:[e.jsx(nt,{children:e.jsxs(_e,{children:[e.jsx(ee,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("name"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Name",e.jsx(le,{field:"name"})]})}),e.jsx(ee,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("email"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Email",e.jsx(le,{field:"email"})]})}),e.jsx(ee,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("created_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Created At",e.jsx(le,{field:"created_at"})]})}),e.jsx(ee,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>M("updated_at"),children:e.jsxs("div",{className:"flex items-center gap-1",children:["Updated At",e.jsx(le,{field:"updated_at"})]})})]})}),e.jsx(rt,{children:p.map(R=>e.jsxs(_e,{children:[e.jsx(te,{className:"font-medium",children:R.name||"N/A"}),e.jsx(te,{children:R.email}),e.jsx(te,{children:re(R.created_at)}),e.jsx(te,{children:re(R.updated_at)})]},R.id))})]})}),e.jsxs("div",{className:"p-4 border-t flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gray-600",children:a&&e.jsxs(e.Fragment,{children:["Showing ",a.from," to ",a.to," of ",a.total," entries (Page"," ",a.current_page," of ",a.last_page,")"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:P,disabled:!(a!=null&&a.prev_page_url),children:"Previous"}),a&&a.last_page>1&&e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,a.last_page)},(R,E)=>{const B=E+1;return e.jsx(g,{variant:u===B?"default":"outline",size:"sm",onClick:()=>b(B),children:B},B)})}),e.jsx(g,{variant:"outline",size:"sm",onClick:_,disabled:!(a!=null&&a.next_page_url),children:"Next"})]})]})]})]})}const Ee=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:K("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a}));Ee.displayName="Card";const Pe=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:K("flex flex-col space-y-1.5 p-6",t),...a}));Pe.displayName="CardHeader";const Ie=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:K("text-2xl font-semibold leading-none tracking-tight",t),...a}));Ie.displayName="CardTitle";const Me=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:K("text-sm text-muted-foreground",t),...a}));Me.displayName="CardDescription";const Ae=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:K("p-6 pt-0",t),...a}));Ae.displayName="CardContent";const ut=n.forwardRef(({className:t,...a},s)=>e.jsx("div",{ref:s,className:K("flex items-center p-6 pt-0",t),...a}));ut.displayName="CardFooter";function Ln(){const[t,a]=n.useState([]),[s,r]=n.useState(null),[l,u]=n.useState(!0),[d,c]=n.useState(!1),[o,x]=n.useState(!1),[b,_]=n.useState(!1),[P,I]=n.useState(null),[w,f]=n.useState(1),{toast:j}=we(),m=n.useCallback(async(L=1)=>{try{u(!0),I(null);const T=await Te.getTemplates(L);a(T.data),r({current_page:T.current_page,first_page_url:T.first_page_url,from:T.from,last_page:T.last_page,last_page_url:T.last_page_url,links:T.links,next_page_url:T.next_page_url,path:T.path,per_page:T.per_page,prev_page_url:T.prev_page_url,to:T.to,total:T.total}),f(L)}catch(T){const F=T instanceof Error?T.message:"Failed to fetch templates";I(F),j({title:"Error",description:F,variant:"destructive"})}finally{u(!1)}},[j]),h=async L=>{try{c(!0);const T=await Te.createTemplate(L);return j({title:"Success",description:"Template created successfully"}),await m(w),T}catch(T){const F=T instanceof Error?T.message:"Failed to create template";throw j({title:"Error",description:F,variant:"destructive"}),T}finally{c(!1)}},y=async(L,T)=>{try{x(!0),await Te.updateTemplate(L,T),j({title:"Success",description:"Template updated successfully"}),await m(w)}catch(F){const v=F instanceof Error?F.message:"Failed to update template";throw j({title:"Error",description:v,variant:"destructive"}),F}finally{x(!1)}},O=async L=>{try{_(!0),await Te.deleteTemplate(L),j({title:"Success",description:"Template deleted successfully"}),await m(w)}catch(T){const F=T instanceof Error?T.message:"Failed to delete template";throw j({title:"Error",description:F,variant:"destructive"}),T}finally{_(!1)}},$=async L=>{try{const T={title:`${L.title} (Copy)`,subject:L.subject,body:L.body};await h(T)}catch(T){throw T}},A=L=>{L>=1&&s&&L<=s.last_page&&m(L)},N=()=>{s!=null&&s.next_page_url&&A(w+1)},D=()=>{s!=null&&s.prev_page_url&&A(w-1)};return n.useEffect(()=>{m(1)},[m]),{templates:t,pagination:s,loading:l,creating:d,updating:o,deleting:b,error:P,currentPage:w,fetchTemplates:m,createTemplate:h,updateTemplate:y,deleteTemplate:O,duplicateTemplate:$,goToPage:A,goToNextPage:N,goToPrevPage:D,refetch:()=>m(w)}}function Bn(){const{templates:t,pagination:a,loading:s,creating:r,updating:l,deleting:u,error:d,currentPage:c,createTemplate:o,updateTemplate:x,deleteTemplate:b,duplicateTemplate:_,goToPage:P,goToNextPage:I,goToPrevPage:w,refetch:f}=Ln(),[j,m]=n.useState(!1),[h,y]=n.useState(null),[O,$]=n.useState(null),[A,N]=n.useState({title:"",subject:"",body:""}),D=async()=>{if(!A.title||!A.subject||!A.body){alert("Please fill in all fields");return}try{await o(A),N({title:"",subject:"",body:""}),m(!1)}catch{}},L=async()=>{if(h)try{await x(h.id,{title:h.title,subject:h.subject,body:h.body}),y(null)}catch{}},T=async i=>{if(confirm("Are you sure you want to delete this template?"))try{await b(i)}catch{}},F=async i=>{try{await _(i)}catch{}},v=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),C=(i,S=!1)=>{const p=`<span style="background-color: #e0f2fe; padding: 2px 4px; border-radius: 3px; font-weight: bold;">{{${i}}}</span>`;document.execCommand("insertHTML",!1,p)};return d?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading templates: ",d]}),e.jsx(g,{onClick:f,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Templates"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email templates"})]}),e.jsxs(me,{open:j,onOpenChange:m,children:[e.jsx(je,{asChild:!0,children:e.jsxs(g,{disabled:s,children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),"Create Template"]})}),e.jsxs(he,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Create New Email Template"}),e.jsx(xe,{children:"Create a new email template for your campaigns."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"template-title",children:"Template Title"}),e.jsx(de,{id:"template-title",value:A.title,onChange:i=>N({...A,title:i.target.value}),placeholder:"Enter template title"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"template-subject",children:"Subject Line"}),e.jsx(de,{id:"template-subject",value:A.subject,onChange:i=>N({...A,subject:i.target.value}),placeholder:"Enter email subject"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Email Body"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(g,{type:"button",variant:"outline",size:"sm",onClick:()=>C("name"),children:["Add ","{{ name }}"]}),e.jsxs(g,{type:"button",variant:"outline",size:"sm",onClick:()=>C("email"),children:["Add ","{{ email }}"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("bold"),className:"h-8 w-8 p-0",title:"Bold",children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("italic"),className:"h-8 w-8 p-0",title:"Italic",children:e.jsx(Wt,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("underline"),className:"h-8 w-8 p-0",title:"Underline",children:e.jsx(Yt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h1>");const i=window.getSelection();if(i&&i.rangeCount>0){const p=i.getRangeAt(0).commonAncestorContainer.parentElement;p&&p.tagName==="H1"&&(p.style.fontSize="2em",p.style.fontWeight="bold",p.style.marginBottom="0.5em")}},className:"h-8 px-2",title:"Heading 1",children:e.jsx(zt,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h2>");const i=window.getSelection();if(i&&i.rangeCount>0){const p=i.getRangeAt(0).commonAncestorContainer.parentElement;p&&p.tagName==="H2"&&(p.style.fontSize="1.5em",p.style.fontWeight="bold",p.style.marginBottom="0.4em")}},className:"h-8 px-2",title:"Heading 2",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyLeft"),className:"h-8 w-8 p-0",title:"Align Left",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyCenter"),className:"h-8 w-8 p-0",title:"Align Center",children:e.jsx(Ft,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyRight"),className:"h-8 w-8 p-0",title:"Align Right",children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertUnorderedList"),className:"h-8 w-8 p-0",title:"Bullet List",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertOrderedList"),className:"h-8 w-8 p-0",title:"Numbered List",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const i=document.createElement("input");i.type="file",i.accept="image/*",i.onchange=async S=>{var M;const p=(M=S.target.files)==null?void 0:M[0];if(p)try{const z=new FormData;z.append("file",p);const X=await fetch("/api/store-file",{method:"POST",body:z});if(X.ok){const ae=(await X.json()).url;document.execCommand("insertImage",!1,ae)}else alert("Failed to upload image")}catch(z){console.error("Upload error:",z),alert("Error uploading image")}},i.click()},className:"h-8 w-8 p-0",title:"Insert Image",children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const i=prompt("Enter link URL:");i&&document.execCommand("createLink",!1,i)},className:"h-8 w-8 p-0",title:"Insert Link",children:e.jsx(qt,{className:"h-4 w-4"})})]}),e.jsx("div",{contentEditable:!0,dir:"ltr",lang:"en",spellCheck:"false",className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif",direction:"ltr",textAlign:"left",unicodeBidi:"embed"},ref:i=>{i&&A.body===""&&i.innerHTML!=="<p>Write your email content here...</p>"?i.innerHTML="<p>Write your email content here...</p>":i&&A.body!==""&&i.innerHTML!==A.body&&(i.innerHTML=A.body)},onInput:i=>{const S=i.currentTarget.innerHTML;N({...A,body:S})},suppressContentEditableWarning:!0})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Use variables like ","{{ name }}",", ","{{ email }}"," for personalization. They will be replaced with actual values when sending."]})]})]}),e.jsxs($e,{children:[e.jsx(g,{variant:"outline",onClick:()=>m(!1),children:"Cancel"}),e.jsx(g,{onClick:D,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"mr-2 h-4 w-4"}),"Create Template"]})})]})]})]})]}),s?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading templates..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(i=>e.jsxs(Ee,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Pe,{children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(Ie,{className:"text-lg",children:i.title}),e.jsxs(Me,{className:"mt-1",children:["Created: ",v(i.created_at)]})]})})}),e.jsx(Ae,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Subject:"}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:i.subject})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Content Preview:"}),e.jsx("div",{className:"text-sm text-gray-600 line-clamp-3",dangerouslySetInnerHTML:{__html:i.body.replace(/<[^>]*>/g,"").substring(0,100)+"..."}})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:v(i.updated_at)})]})]})}),e.jsxs(ut,{className:"flex justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(me,{children:[e.jsx(je,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"sm",onClick:()=>$(i),children:e.jsx(ht,{className:"h-3 w-3"})})}),e.jsxs(he,{className:"max-w-2xl",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:O==null?void 0:O.title}),e.jsx(xe,{children:"Template Preview"})]}),O&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:O.subject})]}),e.jsxs("div",{children:[e.jsx(G,{children:"Email Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:O.body}})]})]})]})]}),e.jsxs(me,{children:[e.jsx(je,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"sm",onClick:()=>y({...i}),children:e.jsx(sn,{className:"h-3 w-3"})})}),e.jsxs(he,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Edit Template"}),e.jsx(xe,{children:"Make changes to your email template."})]}),h&&e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Template Title"}),e.jsx(de,{value:h.title,onChange:S=>y({...h,title:S.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Subject Line"}),e.jsx(de,{value:h.subject,onChange:S=>y({...h,subject:S.target.value})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Email Body"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e.jsxs(g,{type:"button",variant:"outline",size:"sm",onClick:()=>C("name",!0),children:["Add ","{{ name }}"]}),e.jsxs(g,{type:"button",variant:"outline",size:"sm",onClick:()=>C("email",!0),children:["Add ","{{ email }}"]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-1 p-2 border-b bg-gray-50 flex-wrap",children:[e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("bold"),className:"h-8 w-8 p-0",title:"Bold",children:e.jsx($t,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("italic"),className:"h-8 w-8 p-0",title:"Italic",children:e.jsx(Wt,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("underline"),className:"h-8 w-8 p-0",title:"Underline",children:e.jsx(Yt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h1>");const S=window.getSelection();if(S&&S.rangeCount>0){const M=S.getRangeAt(0).commonAncestorContainer.parentElement;M&&M.tagName==="H1"&&(M.style.fontSize="2em",M.style.fontWeight="bold",M.style.marginBottom="0.5em")}},className:"h-8 px-2",title:"Heading 1",children:e.jsx(zt,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{document.execCommand("formatBlock",!1,"<h2>");const S=window.getSelection();if(S&&S.rangeCount>0){const M=S.getRangeAt(0).commonAncestorContainer.parentElement;M&&M.tagName==="H2"&&(M.style.fontSize="1.5em",M.style.fontWeight="bold",M.style.marginBottom="0.4em")}},className:"h-8 px-2",title:"Heading 2",children:e.jsx(Vt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyLeft"),className:"h-8 w-8 p-0",title:"Align Left",children:e.jsx(Ot,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyCenter"),className:"h-8 w-8 p-0",title:"Align Center",children:e.jsx(Ft,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("justifyRight"),className:"h-8 w-8 p-0",title:"Align Right",children:e.jsx(Ht,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertUnorderedList"),className:"h-8 w-8 p-0",title:"Bullet List",children:e.jsx(Gt,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>document.execCommand("insertOrderedList"),className:"h-8 w-8 p-0",title:"Numbered List",children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const S=document.createElement("input");S.type="file",S.accept="image/*",S.onchange=async p=>{var z;const M=(z=p.target.files)==null?void 0:z[0];if(M)try{const X=new FormData;X.append("file",M);const Q=await fetch("/api/store-file",{method:"POST",body:X});if(Q.ok){const ne=(await Q.json()).url;document.execCommand("insertImage",!1,ne)}else alert("Failed to upload image")}catch(X){console.error("Upload error:",X),alert("Error uploading image")}},S.click()},className:"h-8 w-8 p-0",title:"Insert Image",children:e.jsx(Ut,{className:"h-4 w-4"})}),e.jsx(g,{type:"button",variant:"ghost",size:"sm",onClick:()=>{const S=prompt("Enter link URL:");S&&document.execCommand("createLink",!1,S)},className:"h-8 w-8 p-0",title:"Insert Link",children:e.jsx(qt,{className:"h-4 w-4"})})]}),e.jsx("div",{contentEditable:!0,dir:"ltr",lang:"en",spellCheck:"false",className:"min-h-[300px] p-4 focus:outline-none bg-white",style:{lineHeight:"1.6",fontFamily:"Arial, sans-serif",direction:"ltr",textAlign:"left",unicodeBidi:"embed"},onInput:S=>{const p=S.currentTarget.innerHTML;y({...h,body:p})},dangerouslySetInnerHTML:{__html:h.body},suppressContentEditableWarning:!0})]})]})]})]}),e.jsxs($e,{children:[e.jsx(g,{variant:"outline",onClick:()=>y(null),children:"Cancel"}),e.jsx(g,{onClick:L,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>F(i),disabled:r,children:e.jsx(is,{className:"h-3 w-3"})})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>T(i.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",disabled:u,children:e.jsx(ds,{className:"h-3 w-3"})})]})]},i.id))}),a&&a.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:w,disabled:!a.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,a.last_page)},(i,S)=>{const p=S+1;return e.jsx(g,{variant:c===p?"default":"outline",size:"sm",onClick:()=>P(p),children:p},p)})}),e.jsx(g,{variant:"outline",size:"sm",onClick:I,disabled:!a.next_page_url,children:"Next"})]})}),t.length===0&&!s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(We,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Get started by creating your first email template."}),e.jsxs(g,{onClick:()=>m(!0),children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),"Create Template"]})]})]})]})}const Fn=as("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Rt({className:t,variant:a,...s}){return e.jsx("div",{className:K(Fn({variant:a}),t),...s})}function ts(t,[a,s]){return Math.min(s,Math.max(a,t))}var On=[" ","Enter","ArrowUp","ArrowDown"],Hn=[" ","Enter"],Qe="Select",[pt,xt,$n]=aa(Qe),[ze,kr]=fa(Qe,[$n,rs]),gt=rs(),[zn,be]=ze(Qe),[Vn,Un]=ze(Qe),fs=t=>{const{__scopeSelect:a,children:s,open:r,defaultOpen:l,onOpenChange:u,value:d,defaultValue:c,onValueChange:o,dir:x,name:b,autoComplete:_,disabled:P,required:I,form:w}=t,f=gt(a),[j,m]=n.useState(null),[h,y]=n.useState(null),[O,$]=n.useState(!1),A=ta(x),[N=!1,D]=Bt({prop:r,defaultProp:l,onChange:u}),[L,T]=Bt({prop:d,defaultProp:c,onChange:o}),F=n.useRef(null),v=j?w||!!j.closest("form"):!0,[C,i]=n.useState(new Set),S=Array.from(C).map(p=>p.props.value).join(";");return e.jsx(sa,{...f,children:e.jsxs(zn,{required:I,scope:a,trigger:j,onTriggerChange:m,valueNode:h,onValueNodeChange:y,valueNodeHasChildren:O,onValueNodeHasChildrenChange:$,contentId:kt(),value:L,onValueChange:T,open:N,onOpenChange:D,dir:A,triggerPointerDownPosRef:F,disabled:P,children:[e.jsx(pt.Provider,{scope:a,children:e.jsx(Vn,{scope:t.__scopeSelect,onNativeOptionAdd:n.useCallback(p=>{i(M=>new Set(M).add(p))},[]),onNativeOptionRemove:n.useCallback(p=>{i(M=>{const z=new Set(M);return z.delete(p),z})},[]),children:s})}),v?e.jsxs(zs,{"aria-hidden":!0,required:I,tabIndex:-1,name:b,autoComplete:_,value:L,onChange:p=>T(p.target.value),disabled:P,form:w,children:[L===void 0?e.jsx("option",{value:""}):null,Array.from(C)]},S):null]})})};fs.displayName=Qe;var js="SelectTrigger",ys=n.forwardRef((t,a)=>{const{__scopeSelect:s,disabled:r=!1,...l}=t,u=gt(s),d=be(js,s),c=d.disabled||r,o=ge(a,d.onTriggerChange),x=xt(s),b=n.useRef("touch"),[_,P,I]=Vs(f=>{const j=x().filter(y=>!y.disabled),m=j.find(y=>y.value===d.value),h=Us(j,f,m);h!==void 0&&d.onValueChange(h.value)}),w=f=>{c||(d.onOpenChange(!0),I()),f&&(d.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)})};return e.jsx(ra,{asChild:!0,...u,children:e.jsx(se.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":$s(d.value)?"":void 0,...l,ref:o,onClick:Z(l.onClick,f=>{f.currentTarget.focus(),b.current!=="mouse"&&w(f)}),onPointerDown:Z(l.onPointerDown,f=>{b.current=f.pointerType;const j=f.target;j.hasPointerCapture(f.pointerId)&&j.releasePointerCapture(f.pointerId),f.button===0&&f.ctrlKey===!1&&f.pointerType==="mouse"&&(w(f),f.preventDefault())}),onKeyDown:Z(l.onKeyDown,f=>{const j=_.current!=="";!(f.ctrlKey||f.altKey||f.metaKey)&&f.key.length===1&&P(f.key),!(j&&f.key===" ")&&On.includes(f.key)&&(w(),f.preventDefault())})})})});ys.displayName=js;var vs="SelectValue",Ns=n.forwardRef((t,a)=>{const{__scopeSelect:s,className:r,style:l,children:u,placeholder:d="",...c}=t,o=be(vs,s),{onValueNodeHasChildrenChange:x}=o,b=u!==void 0,_=ge(a,o.onValueNodeChange);return Ne(()=>{x(b)},[x,b]),e.jsx(se.span,{...c,ref:_,style:{pointerEvents:"none"},children:$s(o.value)?e.jsx(e.Fragment,{children:d}):u})});Ns.displayName=vs;var Wn="SelectIcon",ws=n.forwardRef((t,a)=>{const{__scopeSelect:s,children:r,...l}=t;return e.jsx(se.span,{"aria-hidden":!0,...l,ref:a,children:r||"▼"})});ws.displayName=Wn;var qn="SelectPortal",bs=t=>e.jsx(la,{asChild:!0,...t});bs.displayName=qn;var De="SelectContent",Cs=n.forwardRef((t,a)=>{const s=be(De,t.__scopeSelect),[r,l]=n.useState();if(Ne(()=>{l(new DocumentFragment)},[]),!s.open){const u=r;return u?ls.createPortal(e.jsx(Ss,{scope:t.__scopeSelect,children:e.jsx(pt.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),u):null}return e.jsx(_s,{...t,ref:a})});Cs.displayName=De;var ce=10,[Ss,Ce]=ze(De),Kn="SelectContentImpl",_s=n.forwardRef((t,a)=>{const{__scopeSelect:s,position:r="item-aligned",onCloseAutoFocus:l,onEscapeKeyDown:u,onPointerDownOutside:d,side:c,sideOffset:o,align:x,alignOffset:b,arrowPadding:_,collisionBoundary:P,collisionPadding:I,sticky:w,hideWhenDetached:f,avoidCollisions:j,...m}=t,h=be(De,s),[y,O]=n.useState(null),[$,A]=n.useState(null),N=ge(a,E=>O(E)),[D,L]=n.useState(null),[T,F]=n.useState(null),v=xt(s),[C,i]=n.useState(!1),S=n.useRef(!1);n.useEffect(()=>{if(y)return ca(y)},[y]),ia();const p=n.useCallback(E=>{const[B,...U]=v().map(q=>q.ref.current),[V]=U.slice(-1),W=document.activeElement;for(const q of E)if(q===W||(q==null||q.scrollIntoView({block:"nearest"}),q===B&&$&&($.scrollTop=0),q===V&&$&&($.scrollTop=$.scrollHeight),q==null||q.focus(),document.activeElement!==W))return},[v,$]),M=n.useCallback(()=>p([D,y]),[p,D,y]);n.useEffect(()=>{C&&M()},[C,M]);const{onOpenChange:z,triggerPointerDownPosRef:X}=h;n.useEffect(()=>{if(y){let E={x:0,y:0};const B=V=>{var W,q;E={x:Math.abs(Math.round(V.pageX)-(((W=X.current)==null?void 0:W.x)??0)),y:Math.abs(Math.round(V.pageY)-(((q=X.current)==null?void 0:q.y)??0))}},U=V=>{E.x<=10&&E.y<=10?V.preventDefault():y.contains(V.target)||z(!1),document.removeEventListener("pointermove",B),X.current=null};return X.current!==null&&(document.addEventListener("pointermove",B),document.addEventListener("pointerup",U,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",U,{capture:!0})}}},[y,z,X]),n.useEffect(()=>{const E=()=>z(!1);return window.addEventListener("blur",E),window.addEventListener("resize",E),()=>{window.removeEventListener("blur",E),window.removeEventListener("resize",E)}},[z]);const[Q,ae]=Vs(E=>{const B=v().filter(W=>!W.disabled),U=B.find(W=>W.ref.current===document.activeElement),V=Us(B,E,U);V&&setTimeout(()=>V.ref.current.focus())}),ne=n.useCallback((E,B,U)=>{const V=!S.current&&!U;(h.value!==void 0&&h.value===B||V)&&(L(E),V&&(S.current=!0))},[h.value]),fe=n.useCallback(()=>y==null?void 0:y.focus(),[y]),re=n.useCallback((E,B,U)=>{const V=!S.current&&!U;(h.value!==void 0&&h.value===B||V)&&F(E)},[h.value]),le=r==="popper"?wt:Ts,R=le===wt?{side:c,sideOffset:o,align:x,alignOffset:b,arrowPadding:_,collisionBoundary:P,collisionPadding:I,sticky:w,hideWhenDetached:f,avoidCollisions:j}:{};return e.jsx(Ss,{scope:s,content:y,viewport:$,onViewportChange:A,itemRefCallback:ne,selectedItem:D,onItemLeave:fe,itemTextRefCallback:re,focusSelectedItem:M,selectedItemText:T,position:r,isPositioned:C,searchRef:Q,children:e.jsx(oa,{as:ea,allowPinchZoom:!0,children:e.jsx(da,{asChild:!0,trapped:h.open,onMountAutoFocus:E=>{E.preventDefault()},onUnmountAutoFocus:Z(l,E=>{var B;(B=h.trigger)==null||B.focus({preventScroll:!0}),E.preventDefault()}),children:e.jsx(ma,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:E=>E.preventDefault(),onDismiss:()=>h.onOpenChange(!1),children:e.jsx(le,{role:"listbox",id:h.contentId,"data-state":h.open?"open":"closed",dir:h.dir,onContextMenu:E=>E.preventDefault(),...m,...R,onPlaced:()=>i(!0),ref:N,style:{display:"flex",flexDirection:"column",outline:"none",...m.style},onKeyDown:Z(m.onKeyDown,E=>{const B=E.ctrlKey||E.altKey||E.metaKey;if(E.key==="Tab"&&E.preventDefault(),!B&&E.key.length===1&&ae(E.key),["ArrowUp","ArrowDown","Home","End"].includes(E.key)){let V=v().filter(W=>!W.disabled).map(W=>W.ref.current);if(["ArrowUp","End"].includes(E.key)&&(V=V.slice().reverse()),["ArrowUp","ArrowDown"].includes(E.key)){const W=E.target,q=V.indexOf(W);V=V.slice(q+1)}setTimeout(()=>p(V)),E.preventDefault()}})})})})})})});_s.displayName=Kn;var Gn="SelectItemAlignedPosition",Ts=n.forwardRef((t,a)=>{const{__scopeSelect:s,onPlaced:r,...l}=t,u=be(De,s),d=Ce(De,s),[c,o]=n.useState(null),[x,b]=n.useState(null),_=ge(a,N=>b(N)),P=xt(s),I=n.useRef(!1),w=n.useRef(!0),{viewport:f,selectedItem:j,selectedItemText:m,focusSelectedItem:h}=d,y=n.useCallback(()=>{if(u.trigger&&u.valueNode&&c&&x&&f&&j&&m){const N=u.trigger.getBoundingClientRect(),D=x.getBoundingClientRect(),L=u.valueNode.getBoundingClientRect(),T=m.getBoundingClientRect();if(u.dir!=="rtl"){const W=T.left-D.left,q=L.left-W,ie=N.left-q,oe=N.width+ie,Le=Math.max(oe,D.width),Be=window.innerWidth-ce,Fe=ts(q,[ce,Math.max(ce,Be-Le)]);c.style.minWidth=oe+"px",c.style.left=Fe+"px"}else{const W=D.right-T.right,q=window.innerWidth-L.right-W,ie=window.innerWidth-N.right-q,oe=N.width+ie,Le=Math.max(oe,D.width),Be=window.innerWidth-ce,Fe=ts(q,[ce,Math.max(ce,Be-Le)]);c.style.minWidth=oe+"px",c.style.right=Fe+"px"}const F=P(),v=window.innerHeight-ce*2,C=f.scrollHeight,i=window.getComputedStyle(x),S=parseInt(i.borderTopWidth,10),p=parseInt(i.paddingTop,10),M=parseInt(i.borderBottomWidth,10),z=parseInt(i.paddingBottom,10),X=S+p+C+z+M,Q=Math.min(j.offsetHeight*5,X),ae=window.getComputedStyle(f),ne=parseInt(ae.paddingTop,10),fe=parseInt(ae.paddingBottom,10),re=N.top+N.height/2-ce,le=v-re,R=j.offsetHeight/2,E=j.offsetTop+R,B=S+p+E,U=X-B;if(B<=re){const W=F.length>0&&j===F[F.length-1].ref.current;c.style.bottom="0px";const q=x.clientHeight-f.offsetTop-f.offsetHeight,ie=Math.max(le,R+(W?fe:0)+q+M),oe=B+ie;c.style.height=oe+"px"}else{const W=F.length>0&&j===F[0].ref.current;c.style.top="0px";const ie=Math.max(re,S+f.offsetTop+(W?ne:0)+R)+U;c.style.height=ie+"px",f.scrollTop=B-re+f.offsetTop}c.style.margin=`${ce}px 0`,c.style.minHeight=Q+"px",c.style.maxHeight=v+"px",r==null||r(),requestAnimationFrame(()=>I.current=!0)}},[P,u.trigger,u.valueNode,c,x,f,j,m,u.dir,r]);Ne(()=>y(),[y]);const[O,$]=n.useState();Ne(()=>{x&&$(window.getComputedStyle(x).zIndex)},[x]);const A=n.useCallback(N=>{N&&w.current===!0&&(y(),h==null||h(),w.current=!1)},[y,h]);return e.jsx(Yn,{scope:s,contentWrapper:c,shouldExpandOnScrollRef:I,onScrollButtonChange:A,children:e.jsx("div",{ref:o,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:O},children:e.jsx(se.div,{...l,ref:_,style:{boxSizing:"border-box",maxHeight:"100%",...l.style}})})})});Ts.displayName=Gn;var Xn="SelectPopperPosition",wt=n.forwardRef((t,a)=>{const{__scopeSelect:s,align:r="start",collisionPadding:l=ce,...u}=t,d=gt(s);return e.jsx(ha,{...d,...u,ref:a,align:r,collisionPadding:l,style:{boxSizing:"border-box",...u.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});wt.displayName=Xn;var[Yn,Dt]=ze(De,{}),bt="SelectViewport",ks=n.forwardRef((t,a)=>{const{__scopeSelect:s,nonce:r,...l}=t,u=Ce(bt,s),d=Dt(bt,s),c=ge(a,u.onViewportChange),o=n.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(pt.Slot,{scope:s,children:e.jsx(se.div,{"data-radix-select-viewport":"",role:"presentation",...l,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...l.style},onScroll:Z(l.onScroll,x=>{const b=x.currentTarget,{contentWrapper:_,shouldExpandOnScrollRef:P}=d;if(P!=null&&P.current&&_){const I=Math.abs(o.current-b.scrollTop);if(I>0){const w=window.innerHeight-ce*2,f=parseFloat(_.style.minHeight),j=parseFloat(_.style.height),m=Math.max(f,j);if(m<w){const h=m+I,y=Math.min(w,h),O=h-y;_.style.height=y+"px",_.style.bottom==="0px"&&(b.scrollTop=O>0?O:0,_.style.justifyContent="flex-end")}}}o.current=b.scrollTop})})})]})});ks.displayName=bt;var Es="SelectGroup",[Zn,Jn]=ze(Es),Qn=n.forwardRef((t,a)=>{const{__scopeSelect:s,...r}=t,l=kt();return e.jsx(Zn,{scope:s,id:l,children:e.jsx(se.div,{role:"group","aria-labelledby":l,...r,ref:a})})});Qn.displayName=Es;var Ps="SelectLabel",Is=n.forwardRef((t,a)=>{const{__scopeSelect:s,...r}=t,l=Jn(Ps,s);return e.jsx(se.div,{id:l.id,...r,ref:a})});Is.displayName=Ps;var it="SelectItem",[er,Ms]=ze(it),As=n.forwardRef((t,a)=>{const{__scopeSelect:s,value:r,disabled:l=!1,textValue:u,...d}=t,c=be(it,s),o=Ce(it,s),x=c.value===r,[b,_]=n.useState(u??""),[P,I]=n.useState(!1),w=ge(a,h=>{var y;return(y=o.itemRefCallback)==null?void 0:y.call(o,h,r,l)}),f=kt(),j=n.useRef("touch"),m=()=>{l||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(er,{scope:s,value:r,disabled:l,textId:f,isSelected:x,onItemTextChange:n.useCallback(h=>{_(y=>y||((h==null?void 0:h.textContent)??"").trim())},[]),children:e.jsx(pt.ItemSlot,{scope:s,value:r,disabled:l,textValue:b,children:e.jsx(se.div,{role:"option","aria-labelledby":f,"data-highlighted":P?"":void 0,"aria-selected":x&&P,"data-state":x?"checked":"unchecked","aria-disabled":l||void 0,"data-disabled":l?"":void 0,tabIndex:l?void 0:-1,...d,ref:w,onFocus:Z(d.onFocus,()=>I(!0)),onBlur:Z(d.onBlur,()=>I(!1)),onClick:Z(d.onClick,()=>{j.current!=="mouse"&&m()}),onPointerUp:Z(d.onPointerUp,()=>{j.current==="mouse"&&m()}),onPointerDown:Z(d.onPointerDown,h=>{j.current=h.pointerType}),onPointerMove:Z(d.onPointerMove,h=>{var y;j.current=h.pointerType,l?(y=o.onItemLeave)==null||y.call(o):j.current==="mouse"&&h.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(d.onPointerLeave,h=>{var y;h.currentTarget===document.activeElement&&((y=o.onItemLeave)==null||y.call(o))}),onKeyDown:Z(d.onKeyDown,h=>{var O;((O=o.searchRef)==null?void 0:O.current)!==""&&h.key===" "||(Hn.includes(h.key)&&m(),h.key===" "&&h.preventDefault())})})})})});As.displayName=it;var Ue="SelectItemText",Rs=n.forwardRef((t,a)=>{const{__scopeSelect:s,className:r,style:l,...u}=t,d=be(Ue,s),c=Ce(Ue,s),o=Ms(Ue,s),x=Un(Ue,s),[b,_]=n.useState(null),P=ge(a,m=>_(m),o.onItemTextChange,m=>{var h;return(h=c.itemTextRefCallback)==null?void 0:h.call(c,m,o.value,o.disabled)}),I=b==null?void 0:b.textContent,w=n.useMemo(()=>e.jsx("option",{value:o.value,disabled:o.disabled,children:I},o.value),[o.disabled,o.value,I]),{onNativeOptionAdd:f,onNativeOptionRemove:j}=x;return Ne(()=>(f(w),()=>j(w)),[f,j,w]),e.jsxs(e.Fragment,{children:[e.jsx(se.span,{id:o.textId,...u,ref:P}),o.isSelected&&d.valueNode&&!d.valueNodeHasChildren?ls.createPortal(u.children,d.valueNode):null]})});Rs.displayName=Ue;var Ds="SelectItemIndicator",Ls=n.forwardRef((t,a)=>{const{__scopeSelect:s,...r}=t;return Ms(Ds,s).isSelected?e.jsx(se.span,{"aria-hidden":!0,...r,ref:a}):null});Ls.displayName=Ds;var Ct="SelectScrollUpButton",Bs=n.forwardRef((t,a)=>{const s=Ce(Ct,t.__scopeSelect),r=Dt(Ct,t.__scopeSelect),[l,u]=n.useState(!1),d=ge(a,r.onScrollButtonChange);return Ne(()=>{if(s.viewport&&s.isPositioned){let c=function(){const x=o.scrollTop>0;u(x)};const o=s.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),l?e.jsx(Os,{...t,ref:d,onAutoScroll:()=>{const{viewport:c,selectedItem:o}=s;c&&o&&(c.scrollTop=c.scrollTop-o.offsetHeight)}}):null});Bs.displayName=Ct;var St="SelectScrollDownButton",Fs=n.forwardRef((t,a)=>{const s=Ce(St,t.__scopeSelect),r=Dt(St,t.__scopeSelect),[l,u]=n.useState(!1),d=ge(a,r.onScrollButtonChange);return Ne(()=>{if(s.viewport&&s.isPositioned){let c=function(){const x=o.scrollHeight-o.clientHeight,b=Math.ceil(o.scrollTop)<x;u(b)};const o=s.viewport;return c(),o.addEventListener("scroll",c),()=>o.removeEventListener("scroll",c)}},[s.viewport,s.isPositioned]),l?e.jsx(Os,{...t,ref:d,onAutoScroll:()=>{const{viewport:c,selectedItem:o}=s;c&&o&&(c.scrollTop=c.scrollTop+o.offsetHeight)}}):null});Fs.displayName=St;var Os=n.forwardRef((t,a)=>{const{__scopeSelect:s,onAutoScroll:r,...l}=t,u=Ce("SelectScrollButton",s),d=n.useRef(null),c=xt(s),o=n.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return n.useEffect(()=>()=>o(),[o]),Ne(()=>{var b;const x=c().find(_=>_.ref.current===document.activeElement);(b=x==null?void 0:x.ref.current)==null||b.scrollIntoView({block:"nearest"})},[c]),e.jsx(se.div,{"aria-hidden":!0,...l,ref:a,style:{flexShrink:0,...l.style},onPointerDown:Z(l.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(r,50))}),onPointerMove:Z(l.onPointerMove,()=>{var x;(x=u.onItemLeave)==null||x.call(u),d.current===null&&(d.current=window.setInterval(r,50))}),onPointerLeave:Z(l.onPointerLeave,()=>{o()})})}),tr="SelectSeparator",Hs=n.forwardRef((t,a)=>{const{__scopeSelect:s,...r}=t;return e.jsx(se.div,{"aria-hidden":!0,...r,ref:a})});Hs.displayName=tr;var _t="SelectArrow",sr=n.forwardRef((t,a)=>{const{__scopeSelect:s,...r}=t,l=gt(s),u=be(_t,s),d=Ce(_t,s);return u.open&&d.position==="popper"?e.jsx(ua,{...l,...r,ref:a}):null});sr.displayName=_t;function $s(t){return t===""||t===void 0}var zs=n.forwardRef((t,a)=>{const{value:s,...r}=t,l=n.useRef(null),u=ge(a,l),d=va(s);return n.useEffect(()=>{const c=l.current,o=window.HTMLSelectElement.prototype,b=Object.getOwnPropertyDescriptor(o,"value").set;if(d!==s&&b){const _=new Event("change",{bubbles:!0});b.call(c,s),c.dispatchEvent(_)}},[d,s]),e.jsx(na,{asChild:!0,children:e.jsx("select",{...r,ref:u,defaultValue:s})})});zs.displayName="BubbleSelect";function Vs(t){const a=ja(t),s=n.useRef(""),r=n.useRef(0),l=n.useCallback(d=>{const c=s.current+d;a(c),function o(x){s.current=x,window.clearTimeout(r.current),x!==""&&(r.current=window.setTimeout(()=>o(""),1e3))}(c)},[a]),u=n.useCallback(()=>{s.current="",window.clearTimeout(r.current)},[]);return n.useEffect(()=>()=>window.clearTimeout(r.current),[]),[s,l,u]}function Us(t,a,s){const l=a.length>1&&Array.from(a).every(x=>x===a[0])?a[0]:a,u=s?t.indexOf(s):-1;let d=ar(t,Math.max(u,0));l.length===1&&(d=d.filter(x=>x!==s));const o=d.find(x=>x.textValue.toLowerCase().startsWith(l.toLowerCase()));return o!==s?o:void 0}function ar(t,a){return t.map((s,r)=>t[(a+r)%t.length])}var nr=fs,Ws=ys,rr=Ns,lr=ws,cr=bs,qs=Cs,ir=ks,Ks=Is,Gs=As,or=Rs,dr=Ls,Xs=Bs,Ys=Fs,Zs=Hs;const ot=nr,dt=rr,Ye=n.forwardRef(({className:t,children:a,...s},r)=>e.jsxs(Ws,{ref:r,className:K("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...s,children:[a,e.jsx(lr,{asChild:!0,children:e.jsx(Et,{className:"h-4 w-4 opacity-50"})})]}));Ye.displayName=Ws.displayName;const Js=n.forwardRef(({className:t,...a},s)=>e.jsx(Xs,{ref:s,className:K("flex cursor-default items-center justify-center py-1",t),...a,children:e.jsx(cs,{className:"h-4 w-4"})}));Js.displayName=Xs.displayName;const Qs=n.forwardRef(({className:t,...a},s)=>e.jsx(Ys,{ref:s,className:K("flex cursor-default items-center justify-center py-1",t),...a,children:e.jsx(Et,{className:"h-4 w-4"})}));Qs.displayName=Ys.displayName;const Ze=n.forwardRef(({className:t,children:a,position:s="popper",...r},l)=>e.jsx(cr,{children:e.jsxs(qs,{ref:l,className:K("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...r,children:[e.jsx(Js,{}),e.jsx(ir,{className:K("p-1",s==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(Qs,{})]})}));Ze.displayName=qs.displayName;const mr=n.forwardRef(({className:t,...a},s)=>e.jsx(Ks,{ref:s,className:K("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...a}));mr.displayName=Ks.displayName;const Je=n.forwardRef(({className:t,children:a,...s},r)=>e.jsxs(Gs,{ref:r,className:K("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...s,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(dr,{children:e.jsx(ya,{className:"h-4 w-4"})})}),e.jsx(or,{children:a})]}));Je.displayName=Gs.displayName;const hr=n.forwardRef(({className:t,...a},s)=>e.jsx(Zs,{ref:s,className:K("-mx-1 my-1 h-px bg-muted",t),...a}));hr.displayName=Zs.displayName;function ur(){const[t,a]=n.useState([]),[s,r]=n.useState(null),[l,u]=n.useState([]),[d,c]=n.useState([]),[o,x]=n.useState(!0),[b,_]=n.useState(!1),[P,I]=n.useState(null),[w,f]=n.useState(1),{toast:j}=we(),m=n.useCallback(async(A=1)=>{try{x(!0),I(null);const N=await ct.getCampaigns(A);a(N.data),r({current_page:N.current_page,first_page_url:N.first_page_url,from:N.from,last_page:N.last_page,last_page_url:N.last_page_url,links:N.links,next_page_url:N.next_page_url,path:N.path,per_page:N.per_page,prev_page_url:N.prev_page_url,to:N.to,total:N.total}),f(A)}catch(N){const D=N instanceof Error?N.message:"Failed to fetch campaigns";I(D),j({title:"Error",description:D,variant:"destructive"})}finally{x(!1)}},[j]);n.useEffect(()=>{(async()=>{try{const[N,D]=await Promise.all([He.getAllContacts(),Te.getAllTemplates()]);u(N),c(D)}catch(N){console.error("Failed to load contacts/templates:",N)}})()},[]),n.useEffect(()=>{m(1)},[m]);const h=async A=>{try{_(!0);const N=await ct.createCampaign(A);return N.success?(j({title:"Campaign Created",description:N.message||"Campaign has been created and is being processed."}),await m(w)):j({title:"Campaign Failed",description:N.message||"Failed to create campaign",variant:"destructive"}),N}catch(N){const D=N instanceof Error?N.message:"Failed to create campaign";throw j({title:"Campaign Error",description:D,variant:"destructive"}),N}finally{_(!1)}},y=A=>{A>=1&&s&&A<=s.last_page&&m(A)};return{campaigns:t,pagination:s,contacts:l,templates:d,loading:o,creating:b,error:P,currentPage:w,fetchCampaigns:m,createCampaign:h,goToPage:y,goToNextPage:()=>{s!=null&&s.next_page_url&&y(w+1)},goToPrevPage:()=>{s!=null&&s.prev_page_url&&y(w-1)},refetch:()=>m(w)}}function pr(){const{campaigns:t,pagination:a,contacts:s,templates:r,loading:l,creating:u,error:d,currentPage:c,createCampaign:o,goToPage:x,goToNextPage:b,goToPrevPage:_,refetch:P}=ur(),[I,w]=n.useState(!1),[f,j]=n.useState(null),[m,h]=n.useState([]),[y,O]=n.useState(!1),[$,A]=n.useState(""),[N,D]=n.useState(null),{toast:L}=we(),T=async()=>{if(!$||!f){L({title:"Error",description:"Please fill in campaign name and select a template.",variant:"destructive"});return}if(!y&&m.length===0){L({title:"Error",description:"Please select recipients or choose 'Send to All'.",variant:"destructive"});return}try{await o({template_id:f,name:$,contact_ids:y?[]:m}),A(""),j(null),h([]),O(!1),w(!1)}catch{}},F=(p,M)=>{h(M?[...m,p]:m.filter(z=>z!==p))},v=p=>{h(p?s.map(M=>M.id):[])},C=p=>{switch(p.toLowerCase()){case"completed":case"sent":return e.jsx(mt,{className:"h-4 w-4 text-green-500"});case"processing":case"sending":return e.jsx(J,{className:"h-4 w-4 text-blue-500 animate-spin"});case"failed":case"error":return e.jsx(Ge,{className:"h-4 w-4 text-red-500"});case"pending":case"queued":return e.jsx(Ma,{className:"h-4 w-4 text-yellow-500"});default:return e.jsx(_a,{className:"h-4 w-4 text-gray-500"})}},i=p=>{switch(p.toLowerCase()){case"completed":case"sent":return"bg-green-500";case"processing":case"sending":return"bg-blue-500";case"failed":case"error":return"bg-red-500";case"pending":case"queued":return"bg-yellow-500";default:return"bg-gray-500"}},S=p=>new Date(p).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"});return d?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading campaigns: ",d]}),e.jsx(g,{onClick:P,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Email Campaigns"}),e.jsx("p",{className:"text-gray-600",children:"Create and manage your email campaigns"})]}),e.jsxs(me,{open:I,onOpenChange:w,children:[e.jsx(je,{asChild:!0,children:e.jsxs(g,{disabled:l,children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})}),e.jsxs(he,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Create New Email Campaign"}),e.jsx(xe,{children:"Create and send an email campaign to your subscribers."})]}),e.jsxs("div",{className:"grid gap-6 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"campaign-name",children:"Campaign Name"}),e.jsx(de,{id:"campaign-name",value:$,onChange:p=>A(p.target.value),placeholder:"Enter campaign name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"campaign-template",children:"Email Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ot,{value:(f==null?void 0:f.toString())||"",onValueChange:p=>j(Number.parseInt(p)),children:[e.jsx(Ye,{className:"flex-1",children:e.jsx(dt,{placeholder:"Select template"})}),e.jsx(Ze,{children:r.map(p=>e.jsx(Je,{value:p.id.toString(),children:p.title},p.id))})]}),f&&e.jsxs(me,{children:[e.jsx(je,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"sm",onClick:()=>D(r.find(p=>p.id===f)||null),children:e.jsx(ht,{className:"h-4 w-4"})})}),e.jsxs(he,{className:"max-w-2xl",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:N==null?void 0:N.title}),e.jsx(xe,{children:"Template Preview"})]}),N&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:N.subject})]}),e.jsxs("div",{children:[e.jsx(G,{children:"Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:N.body}})]})]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(G,{children:"Select Recipients"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"send-to-all",checked:y,onCheckedChange:p=>{O(p),p&&h([])}}),e.jsxs(G,{htmlFor:"send-to-all",className:"text-sm font-medium",children:["Send to All Users (",s.length," contacts)"]})]})})]}),!y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[m.length," of ",s.length," contacts selected"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jt,{id:"select-all-contacts",checked:m.length===s.length,onCheckedChange:v}),e.jsx(G,{htmlFor:"select-all-contacts",className:"text-sm",children:"Select All"})]})]}),e.jsx("div",{className:"border rounded-lg max-h-60 overflow-y-auto",children:e.jsx("div",{className:"p-4 space-y-3",children:s.map(p=>e.jsxs("div",{className:"flex items-center space-x-3 p-2 hover:bg-gray-50 rounded",children:[e.jsx(jt,{id:`contact-${p.id}`,checked:m.includes(p.id),onCheckedChange:M=>F(p.id,M)}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:p.name||"N/A"}),e.jsx("p",{className:"text-sm text-gray-600",children:p.email})]})})})]},p.id))})})]}),y&&e.jsxs(ye,{children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsxs(ve,{children:["This campaign will be sent to all ",s.length," contacts in your database."]})]})]})]}),e.jsxs($e,{children:[e.jsx(g,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(g,{onClick:T,disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Campaign"})]})]})]})]}),l?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading campaigns..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(p=>e.jsxs(Ee,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Pe,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(Ie,{className:"text-lg",children:p.name}),e.jsxs(Me,{className:"mt-1",children:["Template: ",p.template.title]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[C(p.status),e.jsx(Rt,{className:`${i(p.status)} text-white`,children:p.status.charAt(0).toUpperCase()+p.status.slice(1)})]})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Total Contacts:"}),e.jsx("p",{className:"text-lg font-semibold text-blue-600",children:p.total_contacts})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Emails Sent:"}),e.jsx("p",{className:"text-lg font-semibold text-green-600",children:p.emails_sent})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Created:"}),e.jsx("p",{className:"text-sm text-gray-600",children:S(p.created_at)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:S(p.updated_at)})]})]})}),e.jsx(ut,{children:e.jsxs("div",{className:"w-full text-center text-sm text-gray-500",children:["Campaign ID: ",p.id]})})]},p.id))}),a&&a.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:_,disabled:!a.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,a.last_page)},(p,M)=>{const z=M+1;return e.jsx(g,{variant:c===z?"default":"outline",size:"sm",onClick:()=>x(z),children:z},z)})}),e.jsx(g,{variant:"outline",size:"sm",onClick:b,disabled:!a.next_page_url,children:"Next"})]})}),t.length===0&&!l&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Re,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No campaigns yet"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Create your first email campaign to get started."}),e.jsxs(g,{onClick:()=>w(!0),disabled:l,children:[e.jsx(We,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})]})]})]})}function xr(){const[t,a]=n.useState([]),[s,r]=n.useState(null),[l,u]=n.useState(!0),[d,c]=n.useState(!1),[o,x]=n.useState(null),[b,_]=n.useState(1),[P,I]=n.useState(""),[w,f]=n.useState(null),[j,m]=n.useState(!1),{toast:h}=we(),y=n.useCallback(async(v=1,C="")=>{try{u(!0),x(null);const i=await Ve.getBatches(v,C);a(i.data),r({current_page:i.current_page,first_page_url:i.first_page_url,from:i.from,last_page:i.last_page,last_page_url:i.last_page_url,links:i.links,next_page_url:i.next_page_url,path:i.path,per_page:i.per_page,prev_page_url:i.prev_page_url,to:i.to,total:i.total}),_(v)}catch(i){const S=i instanceof Error?i.message:"Failed to fetch batches";x(S),h({title:"Error",description:S,variant:"destructive"})}finally{u(!1)}},[h]),O=async(v,C)=>{try{c(!0);const i=await Ve.importBatch(v,C);return i.success?(h({title:"Import Successful",description:`Successfully imported batch "${C}" with ${i.imported_count||0} contacts${i.failed_count?`. ${i.failed_count} failed.`:""}`}),await y(1,P)):h({title:"Import Failed",description:i.message||"Failed to import batch",variant:"destructive"}),i}catch(i){const S=i instanceof Error?i.message:"Failed to import batch";throw h({title:"Import Error",description:S,variant:"destructive"}),i}finally{c(!1)}},$=async v=>{try{m(!0);const C=await Ve.getBatchDetail(v);return f(C),C}catch(C){const i=C instanceof Error?C.message:"Failed to fetch batch details";throw h({title:"Error",description:i,variant:"destructive"}),C}finally{m(!1)}},A=async v=>{try{await Ve.deleteBatch(v),h({title:"Success",description:"Batch deleted successfully"}),await y(b,P)}catch(C){const i=C instanceof Error?C.message:"Failed to delete batch";throw h({title:"Error",description:i,variant:"destructive"}),C}},N=v=>{v>=1&&s&&v<=s.last_page&&y(v,P)},D=()=>{s!=null&&s.next_page_url&&N(b+1)},L=()=>{s!=null&&s.prev_page_url&&N(b-1)},T=v=>{I(v),_(1),y(1,v)},F=()=>{I(""),y(1,"")};return n.useEffect(()=>{y(1,"")},[y]),{batches:t,pagination:s,loading:l,importing:d,error:o,currentPage:b,searchTerm:P,selectedBatchDetail:w,loadingBatchDetail:j,fetchBatches:y,importBatch:O,fetchBatchDetail:$,deleteBatch:A,goToPage:N,goToNextPage:D,goToPrevPage:L,handleSearch:T,clearSearch:F,refetch:()=>y(b,P),setSelectedBatchDetail:f}}function ss(){var ie,oe,Le,Be,Fe;const{batches:t,pagination:a,loading:s,importing:r,error:l,currentPage:u,searchTerm:d,selectedBatchDetail:c,loadingBatchDetail:o,importBatch:x,fetchBatchDetail:b,deleteBatch:_,goToPage:P,goToNextPage:I,goToPrevPage:w,handleSearch:f,clearSearch:j,refetch:m}=xr(),[h,y]=n.useState(!1),[O,$]=n.useState(null),[A,N]=n.useState("users"),[D,L]=n.useState(""),[T,F]=n.useState(null),[v,C]=n.useState(null),i=n.useRef(null),[S,p]=n.useState(!1),[M,z]=n.useState(null),[X,Q]=n.useState(!1),[ae,ne]=n.useState([]),{toast:fe}=we(),re=k=>{var Se,Lt;const Oe=(Se=k.target.files)==null?void 0:Se[0];if(Oe){const ft=(Lt=Oe.name.split(".").pop())==null?void 0:Lt.toLowerCase();ft==="csv"||ft==="xlsx"||ft==="xls"?(F(Oe),C(null)):(alert("Please select a CSV or Excel file"),F(null))}},le=async()=>{if(!T||!D.trim()){alert("Please select a file and enter a batch name");return}try{const k=await x(T,D.trim());C(k),k.success&&(await m(),setTimeout(()=>{y(!1),R()},3e3))}catch{C({success:!1,message:"Failed to import batch. Please try again."})}},R=()=>{F(null),C(null),L(""),i.current&&(i.current.value="")},E=async k=>{$(k),await b(k.id)},B=async k=>{if(confirm("Are you sure you want to delete this batch? This action cannot be undone."))try{await _(k)}catch{}},U=k=>new Date(k).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),V=k=>k>0?"bg-green-500":"bg-gray-500",W=async()=>{try{const k=await Te.getAllTemplates();ne(k)}catch(k){console.error("Failed to load templates:",k)}},q=async()=>{if(!M||!O){alert("Please select a template");return}try{Q(!0);const k=await ct.sendEmailToBatch(O.id,{template_id:M});k.success?(fe({title:"Campaign Sent Successfully",description:k.message||"Campaign has been sent to all users in this batch."}),p(!1),z(null),await b(O.id)):fe({title:"Campaign Failed",description:k.message||"Failed to send campaign to batch",variant:"destructive"})}catch{fe({title:"Campaign Error",description:"An error occurred while sending the campaign. Please try again.",variant:"destructive"})}finally{Q(!1)}};return n.useEffect(()=>{S&&W()},[S]),O&&c?e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(g,{variant:"outline",onClick:()=>{$(null)},children:"← Back to Batches"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:c.name}),e.jsxs("p",{className:"text-gray-600",children:["Created on ",U(c.created_at)," • ",((ie=c.contacts)==null?void 0:ie.length)||0," ","users"]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(g,{variant:A==="users"?"default":"outline",onClick:()=>N("users"),size:"sm",children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"Users (",((oe=c.contacts)==null?void 0:oe.length)||0,")"]}),e.jsxs(g,{variant:A==="campaigns"?"default":"outline",onClick:()=>N("campaigns"),size:"sm",children:[e.jsx(ke,{className:"mr-2 h-4 w-4"}),"Campaigns (",c.campaigns.length,")"]}),e.jsxs(g,{onClick:()=>p(!0),disabled:!c.contacts||c.contacts.length===0,children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Send Campaign"]})]})]}),e.jsx(me,{open:S,onOpenChange:p,children:e.jsxs(he,{className:"max-w-md",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Send Campaign to Batch"}),e.jsxs(xe,{children:["Send an email campaign to all ",((Le=c.contacts)==null?void 0:Le.length)||0,' users in "',c.name,'" batch.']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Select Email Template"}),e.jsxs(ot,{value:(M==null?void 0:M.toString())||"",onValueChange:k=>z(Number(k)),children:[e.jsx(Ye,{children:e.jsx(dt,{placeholder:"Choose a template"})}),e.jsx(Ze,{children:ae.map(k=>e.jsx(Je,{value:k.id.toString(),children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.title}),e.jsx("div",{className:"text-sm text-gray-500",children:k.subject})]})},k.id))})]})]}),M&&e.jsxs(ye,{children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsxs(ve,{children:["This campaign will be sent to ",((Be=c.contacts)==null?void 0:Be.length)||0," users in this batch."]})]})]}),e.jsxs($e,{children:[e.jsx(g,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(g,{onClick:q,disabled:!M||X,children:X?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Send Campaign"]})})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow",children:A==="users"?e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Batch Users"}),e.jsx("p",{className:"text-gray-600",children:"Users imported in this batch"})]}),o?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading contacts..."})]}):e.jsxs(at,{children:[e.jsx(nt,{children:e.jsxs(_e,{children:[e.jsx(ee,{children:"Name"}),e.jsx(ee,{children:"Email"}),e.jsx(ee,{children:"Imported At"})]})}),e.jsx(rt,{children:((Fe=c.contacts)==null?void 0:Fe.map(k=>e.jsxs(_e,{children:[e.jsx(te,{className:"font-medium",children:k.name||"N/A"}),e.jsx(te,{children:k.email}),e.jsx(te,{children:U(k.created_at)})]},k.id)))||[]})]}),(!c.contacts||c.contacts.length===0)&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Nt,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No contacts found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This batch doesn't have any contacts yet."})]})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h2",{className:"text-lg font-semibold",children:"Campaign History"}),e.jsx("p",{className:"text-gray-600",children:"Campaigns sent to this batch"})]}),e.jsxs(at,{children:[e.jsx(nt,{children:e.jsxs(_e,{children:[e.jsx(ee,{children:"Campaign ID"}),e.jsx(ee,{children:"Template"}),e.jsx(ee,{children:"Subject"}),e.jsx(ee,{children:"Sent At"})]})}),e.jsx(rt,{children:c.campaigns.map(k=>e.jsxs(_e,{children:[e.jsxs(te,{className:"font-medium",children:["#",k.id]}),e.jsx(te,{children:k.email_template.title}),e.jsx(te,{children:k.email_template.subject}),e.jsx(te,{children:U(k.created_at)})]},k.id))})]}),c.campaigns.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ke,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No campaigns sent"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"No campaigns have been sent to this batch yet."})]})]})})]}):l?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading batches: ",l]}),e.jsx(g,{onClick:m,children:"Try Again"})]})}):e.jsxs("div",{className:"flex-1 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Batches"}),e.jsx("p",{className:"text-gray-600",children:"Manage your user import batches and track campaigns"})]}),e.jsxs(me,{open:h,onOpenChange:k=>{y(k),k||R()},children:[e.jsx(je,{asChild:!0,children:e.jsxs(g,{children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Import New Batch"]})}),e.jsxs(he,{className:"max-w-md",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:"Import User Batch"}),e.jsx(xe,{children:"Upload a CSV or Excel file and give your batch a name to organize your users."})]}),e.jsxs("div",{className:"space-y-4",children:[!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"batch-name",children:"Batch Name"}),e.jsx(de,{id:"batch-name",value:D,onChange:k=>L(k.target.value),placeholder:"e.g., Q1 2024 Customers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{htmlFor:"file-upload",children:"Select File"}),e.jsx("input",{id:"file-upload",type:"file",ref:i,onChange:re,accept:".csv,.xlsx,.xls",className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]}),T&&e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium",children:T.name}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",(T.size/1024).toFixed(1)," KB)"]})]})}),e.jsxs(ye,{children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx(ve,{children:'Make sure your file has columns named "name" and "email". The first row should contain headers.'})]})]}),r&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(J,{className:"h-4 w-4 animate-spin"}),e.jsxs("span",{className:"text-sm",children:['Creating batch "',D,'"...']})]}),e.jsx(Mt,{value:void 0,className:"w-full"})]}),v&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ye,{className:v.success?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:[v.success?e.jsx(mt,{className:"h-4 w-4 text-green-600"}):e.jsx(Ge,{className:"h-4 w-4 text-red-600"}),e.jsx(ve,{className:v.success?"text-green-800":"text-red-800",children:v.message})]}),v.success&&e.jsxs("div",{className:"text-center p-4 bg-green-100 rounded",children:[e.jsx("div",{className:"font-semibold text-green-800 text-lg",children:v.imported_count||0}),e.jsxs("div",{className:"text-green-600",children:['Users imported to "',D,'"']})]})]})]}),e.jsxs($e,{children:[!v&&e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(g,{onClick:le,disabled:!T||!D.trim()||r,children:r?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Import Batch"]})})]}),v&&e.jsx(g,{onClick:()=>y(!1),className:"w-full",children:"Close"})]})]})]})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(os,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(de,{placeholder:"Search batches...",value:d,onChange:k=>f(k.target.value),className:"pl-8"}),d&&e.jsx(g,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-6 w-6 p-0",onClick:j,children:e.jsx(ns,{className:"h-3 w-3"})})]})}),s?e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading batches..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(k=>e.jsxs(Ee,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Pe,{children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(Ie,{className:"text-lg flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-cyan-500"}),k.name]}),e.jsxs(Me,{className:"mt-1",children:["Created: ",U(k.created_at)]})]}),e.jsx(Rt,{className:`${V(k.contacts_count)} text-white`,children:k.contacts_count>0?"Active":"Empty"})]})}),e.jsx(Ae,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:k.contacts_count}),e.jsx("div",{className:"text-sm text-blue-800",children:"Total Users"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:k.campaigns.length}),e.jsx("div",{className:"text-sm text-green-800",children:"Campaigns Sent"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Last Updated:"}),e.jsx("p",{className:"text-sm text-gray-600",children:U(k.updated_at)})]})]})}),e.jsxs(ut,{className:"flex justify-between",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>E(k),children:[e.jsx(ht,{className:"h-3 w-3 mr-1"}),"View Details"]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>B(k.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:e.jsx(ds,{className:"h-3 w-3"})})]})]},k.id))}),a&&a.last_page>1&&e.jsx("div",{className:"mt-8 flex justify-center",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:w,disabled:!a.prev_page_url,children:"Previous"}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:Math.min(5,a.last_page)},(k,Oe)=>{const Se=Oe+1;return e.jsx(g,{variant:u===Se?"default":"outline",size:"sm",onClick:()=>P(Se),children:Se},Se)})}),e.jsx(g,{variant:"outline",size:"sm",onClick:I,disabled:!a.next_page_url,children:"Next"})]})}),t.length===0&&!s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsx(Xe,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No batches found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:d?"No batches match your search criteria.":"Import your first user batch to get started."}),e.jsxs(g,{onClick:()=>y(!0),children:[e.jsx(qe,{className:"mr-2 h-4 w-4"}),"Import New Batch"]})]})]})]})}function gr(){const[t,a]=n.useState([]),[s,r]=n.useState([]),[l,u]=n.useState(!0),[d,c]=n.useState(!1),[o,x]=n.useState(null),{toast:b}=we(),_=n.useCallback(async()=>{try{u(!0),x(null);const[I,w]=await Promise.all([Ve.getBatches(1,""),Te.getAllTemplates()]);a(I.data),r(w)}catch(I){const w=I instanceof Error?I.message:"Failed to fetch data";x(w),b({title:"Error",description:w,variant:"destructive"})}finally{u(!1)}},[b]),P=async(I,w)=>{try{c(!0);const f={template_id:w},j=await ct.sendEmailToBatch(I,f);return j.success?b({title:"Campaign Sent",description:j.message||"Email campaign has been sent to the batch successfully."}):b({title:"Campaign Failed",description:j.message||"Failed to send campaign to batch",variant:"destructive"}),j}catch(f){const j=f instanceof Error?f.message:"Failed to send campaign";throw b({title:"Campaign Error",description:j,variant:"destructive"}),f}finally{c(!1)}};return n.useEffect(()=>{_()},[_]),{batches:t,templates:s,loading:l,sending:d,error:o,sendEmailToBatch:P,refetch:_}}function fr(){const{batches:t,templates:a,loading:s,sending:r,error:l,sendEmailToBatch:u,refetch:d}=gr(),[c,o]=n.useState(null),[x,b]=n.useState(null),[_,P]=n.useState(null),I=async()=>{if(!c||!x){alert("Please select both a batch and an email template");return}try{await u(c,x),o(null),b(null)}catch{}},w=m=>new Date(m).toLocaleDateString("en-US",{year:"numeric",month:"2-digit",day:"2-digit"}),f=t.find(m=>m.id===c),j=a.find(m=>m.id===x);return l?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxs("p",{className:"text-red-600 mb-4",children:["Error loading data: ",l]}),e.jsxs(g,{onClick:d,children:[e.jsx(Za,{className:"mr-2 h-4 w-4"}),"Try Again"]})]})}):s?e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex items-center justify-center h-64",children:[e.jsx(J,{className:"h-8 w-8 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading batches and templates..."})]})}):e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Send Mail to Batch"}),e.jsx("p",{className:"text-gray-600",children:"Select a batch and email template to send a campaign"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(Ee,{children:[e.jsxs(Pe,{children:[e.jsxs(Ie,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-5 w-5 text-cyan-500"}),"Campaign Setup"]}),e.jsx(Me,{children:"Configure your email campaign settings"})]}),e.jsxs(Ae,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Select Batch"}),e.jsxs(ot,{value:(c==null?void 0:c.toString())||"",onValueChange:m=>o(Number(m)),children:[e.jsx(Ye,{children:e.jsx(dt,{placeholder:"Choose a batch"})}),e.jsx(Ze,{children:t.map(m=>e.jsx(Je,{value:m.id.toString(),children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:m.name}),e.jsxs(Rt,{variant:"secondary",className:"ml-2",children:[m.contacts_count||0," users"]})]})},m.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(G,{children:"Email Template"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ot,{value:(x==null?void 0:x.toString())||"",onValueChange:m=>b(Number(m)),children:[e.jsx(Ye,{className:"flex-1",children:e.jsx(dt,{placeholder:"Choose a template"})}),e.jsx(Ze,{children:a.map(m=>e.jsx(Je,{value:m.id.toString(),children:m.title},m.id))})]}),x&&e.jsxs(me,{children:[e.jsx(je,{asChild:!0,children:e.jsx(g,{variant:"outline",size:"sm",onClick:()=>P(j||null),children:e.jsx(ht,{className:"h-4 w-4"})})}),e.jsxs(he,{className:"max-w-2xl",children:[e.jsxs(ue,{children:[e.jsx(pe,{children:_==null?void 0:_.title}),e.jsx(xe,{children:"Template Preview"})]}),_&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(G,{children:"Subject:"}),e.jsx("p",{className:"mt-1 p-2 bg-gray-50 rounded",children:_.subject})]}),e.jsxs("div",{children:[e.jsx(G,{children:"Content:"}),e.jsx("div",{className:"mt-1 p-4 bg-white border rounded max-h-64 overflow-y-auto",dangerouslySetInnerHTML:{__html:_.body}})]})]})]})]})]})]}),f&&j&&e.jsxs(ye,{children:[e.jsx(mt,{className:"h-4 w-4"}),e.jsxs(ve,{children:['Ready to send "',j.title,'" to ',f.contacts_count||0,' users in "',f.name,'" batch.']})]}),e.jsx(g,{onClick:I,disabled:!c||!x||r,className:"w-full",children:r?e.jsxs(e.Fragment,{children:[e.jsx(J,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending Campaign..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Send Campaign"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(Ee,{children:[e.jsxs(Pe,{children:[e.jsxs(Ie,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"h-5 w-5 text-cyan-500"}),"Available Batches"]}),e.jsx(Me,{children:"Select from your imported user batches"})]}),e.jsx(Ae,{children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:t.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No batches available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Import some user batches first."})]}):t.map(m=>e.jsx("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${c===m.id?"border-cyan-500 bg-cyan-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>o(m.id),children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:m.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Created: ",w(m.created_at)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-semibold text-cyan-600",children:m.contacts_count||0}),e.jsx("div",{className:"text-xs text-gray-500",children:"users"})]})]})},m.id))})})]}),e.jsxs(Ee,{children:[e.jsxs(Pe,{children:[e.jsxs(Ie,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-5 w-5 text-cyan-500"}),"Email Templates"]}),e.jsx(Me,{children:"Choose from your created templates"})]}),e.jsx(Ae,{children:e.jsx("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ke,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No templates available"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Create some email templates first."})]}):a.map(m=>e.jsxs("div",{className:`p-3 border rounded-lg cursor-pointer transition-colors ${x===m.id?"border-cyan-500 bg-cyan-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(m.id),children:[e.jsx("h4",{className:"font-medium",children:m.title}),e.jsx("p",{className:"text-sm text-gray-600 truncate",children:m.subject})]},m.id))})})]})]})]})]})})}function Er(){const[t,a]=n.useState("batches"),s=()=>{switch(t){case"users":return e.jsx(Dn,{});case"templates":return e.jsx(Bn,{});case"campaigns":return e.jsx(pr,{});case"batches":return e.jsx(ss,{});case"send-to-batch":return e.jsx(fr,{});default:return e.jsx(ss,{})}};return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsxs("div",{className:"w-64 bg-cyan-500 text-white flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-cyan-400",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Oa,{className:"h-5 w-5"}),e.jsx("h1",{className:"text-lg font-semibold",children:"Email Automation"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(pa,{className:"h-10 w-10",children:[e.jsx(xa,{src:"/placeholder.svg?height=40&width=40"}),e.jsx(ga,{children:"JD"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"John Doe"}),e.jsx("div",{className:"text-sm text-cyan-200",children:"john.doe@example.com"})]})]})]}),e.jsx("nav",{className:"flex-1 p-4",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsxs(g,{variant:t==="batches"?"secondary":"ghost",className:`w-full justify-start ${t==="batches"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>a("batches"),children:[e.jsx(Xe,{className:"mr-2 h-4 w-4"}),"User Batches"]})}),e.jsx("li",{children:e.jsxs(g,{variant:t==="users"?"secondary":"ghost",className:`w-full justify-start ${t==="users"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>a("users"),children:[e.jsx(Nt,{className:"mr-2 h-4 w-4"}),"All Users"]})}),e.jsx("li",{children:e.jsxs(g,{variant:t==="templates"?"secondary":"ghost",className:`w-full justify-start ${t==="templates"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>a("templates"),children:[e.jsx(st,{className:"mr-2 h-4 w-4"}),"Email Templates"]})}),e.jsx("li",{children:e.jsxs(g,{variant:t==="send-to-batch"?"secondary":"ghost",className:`w-full justify-start ${t==="send-to-batch"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>a("send-to-batch"),children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),"Send Mail to Batch"]})}),e.jsx("li",{children:e.jsxs(g,{variant:t==="campaigns"?"secondary":"ghost",className:`w-full justify-start ${t==="campaigns"?"bg-white text-cyan-500 hover:bg-gray-100":"text-white hover:bg-cyan-400"}`,onClick:()=>a("campaigns"),children:[e.jsx(ke,{className:"mr-2 h-4 w-4"}),"Campaign History"]})})]})})]}),e.jsx("div",{className:"flex-1 flex flex-col",children:s()})]})}export{Er as default};
